import{g as Br}from"./DrawSVGPlugin-B4QUZqwI.js";import{g as se,c as mr,e as as,i as Va,_ as os,a as hs,b as us,d as fs,f as ja,h as za,j as ls,k as $a,l as Ya,m as Wa,n as $t,o as qa,p as cs,q as Za,r as Ka}from"./storeHelper-Dip-Ut0B.js";import{t as Ja,i as tr}from"./toNumber-Brt_E0mo.js";import{h as Qa}from"./obs-C6HihO26.js";import{d as to,r as eo,o as ro,_ as io,a as no,b as so}from"./_plugin-vue_export-helper-Dg3X6I8a.js";/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vt;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(vt||(vt={}));var ee;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(ee||(ee={}));var _e;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(_e||(_e={}));var T;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(T||(T={}));var re;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(re||(re={}));var g;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(g||(g={}));var Nt;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Nt||(Nt={}));var A;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(A||(A={}));var me;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(me||(me={}));var dt;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(dt||(dt={}));var $e;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})($e||($e={}));var St;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(St||(St={}));var It;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(It||(It={}));var xt;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(xt||(xt={}));var Ye;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Ye||(Ye={}));var ht;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(ht||(ht={}));var W;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(W||(W={}));var L;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(L||(L={}));var ut;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(ut||(ut={}));/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ds=Math.PI*2,ps=180/Math.PI,vs=Math.PI/180,Pt;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(Pt||(Pt={}));var O=function(){function e(t,r,i,n){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(r),this.width=Number(i),this.height=Number(n),this.type=Pt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(i-r,0),this.y=n,this.height=Math.max(s-n,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*t)/t,n=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=i-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=i-r,this.y=n,this.height=s-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),ao=function(){function e(t,r,i){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=t,this.y=r,this.radius=i,this.type=Pt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,s=this.y-r;return n*=n,s*=s,n+s<=i},e.prototype.getBounds=function(){return new O(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),oo=function(){function e(t,r,i,n){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=r,this.width=i,this.height=n,this.type=Pt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(r-this.y)/this.height;return i*=i,n*=n,i+n<=1},e.prototype.getBounds=function(){return new O(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),ho=function(){function e(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var n=Array.isArray(r[0])?r[0]:r;if(typeof n[0]!="number"){for(var s=[],a=0,o=n.length;a<o;a++)s.push(n[a].x,n[a].y);n=s}this.points=n,this.type=Pt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var i=!1,n=this.points.length/2,s=0,a=n-1;s<n;a=s++){var o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],f=this.points[a*2+1],l=h>r!=f>r&&t<(u-o)*((r-h)/(f-h))+o;l&&(i=!i)}return i},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),uo=function(){function e(t,r,i,n,s){t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=r,this.width=i,this.height=n,this.radius=s,this.type=Pt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){if(r>=this.y+this.radius&&r<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=r-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s||(i=t-(this.x+this.width-this.radius),i*i+n*n<=s)||(n=r-(this.y+this.height-this.radius),i*i+n*n<=s)||(i=t-(this.x+this.radius),i*i+n*n<=s))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),pt=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),Kt=function(){function e(t,r,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Q=function(){function e(t,r,i,n,s,a){t===void 0&&(t=1),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=a}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,i,n,s,a){return this.a=t,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=a,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(t,r){r=r||new pt;var i=t.x,n=t.y;return r.x=this.a*i+this.c*n+this.tx,r.y=this.b*i+this.d*n+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new pt;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return r.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*r-this.b*i,this.b=n*i+this.b*r,this.c=s*r-this.d*i,this.d=s*i+this.d*r,this.tx=a*r-this.ty*i,this.ty=a*i+this.ty*r,this},e.prototype.append=function(t){var r=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*r+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*r+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*r+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},e.prototype.setTransform=function(t,r,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=r-(i*this.b+n*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,r),u=Math.abs(o+h);return u<1e-5||Math.abs(ds-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(r*r+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*r+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},e.prototype.invert=function(){var t=this.a,r=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-r*i;return this.a=n/a,this.b=-r/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-r*s)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),kt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Dt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ht=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gr=[],_s=[],Se=Math.sign;function fo(){for(var e=0;e<16;e++){var t=[];Gr.push(t);for(var r=0;r<16;r++)for(var i=Se(kt[e]*kt[r]+Xt[e]*Dt[r]),n=Se(Dt[e]*kt[r]+Ht[e]*Dt[r]),s=Se(kt[e]*Xt[r]+Xt[e]*Ht[r]),a=Se(Dt[e]*Xt[r]+Ht[e]*Ht[r]),o=0;o<16;o++)if(kt[o]===i&&Dt[o]===n&&Xt[o]===s&&Ht[o]===a){t.push(o);break}}for(var e=0;e<16;e++){var h=new Q;h.set(kt[e],Dt[e],Xt[e],Ht[e],0,0),_s.push(h)}}fo();var P={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return kt[e]},uY:function(e){return Dt[e]},vX:function(e){return Xt[e]},vY:function(e){return Ht[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return Gr[e][t]},sub:function(e,t){return Gr[e][P.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?P.S:P.N:Math.abs(t)*2<=Math.abs(e)?e>0?P.E:P.W:t>0?e>0?P.SE:P.SW:e>0?P.NE:P.NW},matrixAppendRotationInv:function(e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var n=_s[P.inv(t)];n.tx=r,n.ty=i,e.append(n)}},ms=function(){function e(){this.worldTransform=new Q,this.localTransform=new Q,this.position=new Kt(this.onChange,this,0,0),this.scale=new Kt(this.onChange,this,1,1),this.pivot=new Kt(this.onChange,this,0,0),this.skew=new Kt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=r.a*i.a+r.b*i.c,n.b=r.a*i.b+r.b*i.d,n.c=r.c*i.a+r.d*i.c,n.d=r.c*i.b+r.d*i.d,n.tx=r.tx*i.a+r.ty*i.c+i.tx,n.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/runner - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var X=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,i,n,s,a,o,h){if(arguments.length>8)throw new Error("max arguments reached");var u=this,f=u.name,l=u.items;this._aliasCount++;for(var d=0,c=l.length;d<c;d++)l[d][f](t,r,i,n,s,a,o,h);return l===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(X.prototype,{dispatch:{value:X.prototype.emit},run:{value:X.prototype.emit}});var yr=/iPhone/i,ki=/iPod/i,Di=/iPad/i,Xi=/\biOS-universal(?:.+)Mac\b/i,gr=/\bAndroid(?:.+)Mobile\b/i,Hi=/Android/i,Zt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pe=/Silk/i,gt=/Windows Phone/i,Vi=/\bWindows(?:.+)ARM\b/i,ji=/BlackBerry/i,zi=/BB10/i,$i=/Opera Mini/i,Yi=/\b(CriOS|Chrome)(?:.+)Mobile/i,Wi=/Mobile(?:.+)Firefox\b/i,qi=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function lo(e){return function(t){return t.test(e)}}function co(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var n=lo(r),s={apple:{phone:n(yr)&&!n(gt),ipod:n(ki),tablet:!n(yr)&&(n(Di)||qi(t))&&!n(gt),universal:n(Xi),device:(n(yr)||n(ki)||n(Di)||n(Xi)||qi(t))&&!n(gt)},amazon:{phone:n(Zt),tablet:!n(Zt)&&n(Pe),device:n(Zt)||n(Pe)},android:{phone:!n(gt)&&n(Zt)||!n(gt)&&n(gr),tablet:!n(gt)&&!n(Zt)&&!n(gr)&&(n(Pe)||n(Hi)),device:!n(gt)&&(n(Zt)||n(Pe)||n(gr)||n(Hi))||n(/\bokhttp\b/i)},windows:{phone:n(gt),tablet:n(Vi),device:n(gt)||n(Vi)},other:{blackberry:n(ji),blackberry10:n(zi),opera:n($i),firefox:n(Wi),chrome:n(Yi),device:n(ji)||n(zi)||n($i)||n(Wi)||n(Yi)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}/*!
 * @pixi/settings - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Et=co(self.navigator);function po(e){var t=!0;if(Et.tablet||Et.phone){if(Et.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(t=!1)}}if(Et.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(t=!1)}}}return t?e:4}function vo(){return!Et.apple.device}/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zi;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Zi||(Zi={}));var Ki;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Ki||(Ki={}));var Ji;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Ji||(Ji={}));var Qi;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Qi||(Qi={}));var tn;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(tn||(tn={}));var en;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(en||(en={}));var rn;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(rn||(rn={}));var nn;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(nn||(nn={}));var sn;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(sn||(sn={}));var kr;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(kr||(kr={}));var Dr;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Dr||(Dr={}));var Xr;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Xr||(Xr={}));var an;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(an||(an={}));var on;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(on||(on={}));var Hr;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Hr||(Hr={}));var de;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(de||(de={}));var hn;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(hn||(hn={}));var Vr;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Vr||(Vr={}));var un;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(un||(un={}));var I={MIPMAP_TEXTURES:Xr.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Vr.NONE,SPRITE_MAX_TEXTURES:po(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Hr.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Dr.CLAMP,SCALE_MODE:kr.LINEAR,PRECISION_VERTEX:de.HIGH,PRECISION_FRAGMENT:Et.apple.device?de.HIGH:de.MEDIUM,CAN_UPLOAD_SAME_BUFFER:vo(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */I.TARGET_FPMS=.06;var ie;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(ie||(ie={}));var xr=function(){function e(t,r,i,n){r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=i,this.once=n}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),bt=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xr(null,null,1/0),this.deltaMS=1/I.TARGET_FPMS,this.elapsedMS=1/I.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,i){return i===void 0&&(i=ie.NORMAL),this._addListener(new xr(t,r,i))},e.prototype.addOnce=function(t,r,i){return i===void 0&&(i=ie.NORMAL),this._addListener(new xr(t,r,i,!0))},e.prototype._addListener=function(t){var r=this._head.next,i=this._head;if(!r)t.connect(i);else{for(;r;){if(t.priority>r.priority){t.connect(i);break}i=r,r=r.next}t.previous||t.connect(i)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var i=this._head.next;i;)i.match(t,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*I.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,r)/1e3,I.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),ys=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,ie.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?bt.shared:new bt,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}(),gs={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function n(h,u,f){this.fn=h,this.context=u,this.once=f||!1}function s(h,u,f,l,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var c=new n(f,l||h,d),p=r?r+u:u;return h._events[p]?h._events[p].fn?h._events[p]=[h._events[p],c]:h._events[p].push(c):(h._events[p]=c,h._eventsCount++),h}function a(h,u){--h._eventsCount===0?h._events=new i:delete h._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,l;if(this._eventsCount===0)return u;for(l in f=this._events)t.call(f,l)&&u.push(r?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=r?r+u:u,l=this._events[f];if(!l)return[];if(l.fn)return[l.fn];for(var d=0,c=l.length,p=new Array(c);d<c;d++)p[d]=l[d].fn;return p},o.prototype.listenerCount=function(u){var f=r?r+u:u,l=this._events[f];return l?l.fn?1:l.length:0},o.prototype.emit=function(u,f,l,d,c,p){var _=r?r+u:u;if(!this._events[_])return!1;var v=this._events[_],y=arguments.length,m,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,l),!0;case 4:return v.fn.call(v.context,f,l,d),!0;case 5:return v.fn.call(v.context,f,l,d,c),!0;case 6:return v.fn.call(v.context,f,l,d,c,p),!0}for(x=1,m=new Array(y-1);x<y;x++)m[x-1]=arguments[x];v.fn.apply(v.context,m)}else{var R=v.length,E;for(x=0;x<R;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),y){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,f);break;case 3:v[x].fn.call(v[x].context,f,l);break;case 4:v[x].fn.call(v[x].context,f,l,d);break;default:if(!m)for(E=1,m=new Array(y-1);E<y;E++)m[E-1]=arguments[E];v[x].fn.apply(v[x].context,m)}}return!0},o.prototype.on=function(u,f,l){return s(this,u,f,l,!1)},o.prototype.once=function(u,f,l){return s(this,u,f,l,!0)},o.prototype.removeListener=function(u,f,l,d){var c=r?r+u:u;if(!this._events[c])return this;if(!f)return a(this,c),this;var p=this._events[c];if(p.fn)p.fn===f&&(!d||p.once)&&(!l||p.context===l)&&a(this,c);else{for(var _=0,v=[],y=p.length;_<y;_++)(p[_].fn!==f||d&&!p[_].once||l&&p[_].context!==l)&&v.push(p[_]);v.length?this._events[c]=v.length===1?v[0]:v:a(this,c)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(gs);var _o=gs.exports;const Re=se(_o);var ui={exports:{}};ui.exports=er;ui.exports.default=er;function er(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,s=xs(e,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;var o,h,u,f,l,d,c;if(i&&(s=bo(e,t,s,r)),e.length>80*r){o=u=e[0],h=f=e[1];for(var p=r;p<n;p+=r)l=e[p],d=e[p+1],l<o&&(o=l),d<h&&(h=d),l>u&&(u=l),d>f&&(f=d);c=Math.max(u-o,f-h),c=c!==0?1/c:0}return ye(s,a,r,o,h,c),a}function xs(e,t,r,i,n){var s,a;if(n===$r(e,t,r,i)>0)for(s=t;s<r;s+=i)a=fn(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=fn(s,e[s],e[s+1],a);return a&&rr(a,a.next)&&(xe(a),a=a.next),a}function Ft(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(rr(r,r.next)||U(r.prev,r,r.next)===0)){if(xe(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function ye(e,t,r,i,n,s,a){if(e){!a&&s&&Ro(e,i,n,s);for(var o=e,h,u;e.prev!==e.next;){if(h=e.prev,u=e.next,s?yo(e,i,n,s):mo(e)){t.push(h.i/r),t.push(e.i/r),t.push(u.i/r),xe(e),e=u.next,o=u.next;continue}if(e=u,e===o){a?a===1?(e=go(Ft(e),t,r),ye(e,t,r,i,n,s,2)):a===2&&xo(e,t,r,i,n,s):ye(Ft(e),t,r,i,n,s,1);break}}}}function mo(e){var t=e.prev,r=e,i=e.next;if(U(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(Jt(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&U(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function yo(e,t,r,i){var n=e.prev,s=e,a=e.next;if(U(n,s,a)>=0)return!1;for(var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,h=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,u=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,f=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,l=jr(o,h,t,r,i),d=jr(u,f,t,r,i),c=e.prevZ,p=e.nextZ;c&&c.z>=l&&p&&p.z<=d;){if(c!==e.prev&&c!==e.next&&Jt(n.x,n.y,s.x,s.y,a.x,a.y,c.x,c.y)&&U(c.prev,c,c.next)>=0||(c=c.prevZ,p!==e.prev&&p!==e.next&&Jt(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&U(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;c&&c.z>=l;){if(c!==e.prev&&c!==e.next&&Jt(n.x,n.y,s.x,s.y,a.x,a.y,c.x,c.y)&&U(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Jt(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&U(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function go(e,t,r){var i=e;do{var n=i.prev,s=i.next.next;!rr(n,s)&&bs(n,i,i.next,s)&&ge(n,s)&&ge(s,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(s.i/r),xe(i),xe(i.next),i=e=s),i=i.next}while(i!==e);return Ft(i)}function xo(e,t,r,i,n,s){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Oo(a,o)){var h=Ts(a,o);a=Ft(a,a.next),h=Ft(h,h.next),ye(a,t,r,i,n,s),ye(h,t,r,i,n,s);return}o=o.next}a=a.next}while(a!==e)}function bo(e,t,r,i){var n=[],s,a,o,h,u;for(s=0,a=t.length;s<a;s++)o=t[s]*i,h=s<a-1?t[s+1]*i:e.length,u=xs(e,o,h,i,!1),u===u.next&&(u.steiner=!0),n.push(Co(u));for(n.sort(To),s=0;s<n.length;s++)r=Eo(n[s],r),r=Ft(r,r.next);return r}function To(e,t){return e.x-t.x}function Eo(e,t){var r=Io(e,t);if(!r)return t;var i=Ts(r,e),n=Ft(r,r.next);return Ft(i,i.next),t===r?n:t}function Io(e,t){var r=t,i=e.x,n=e.y,s=-1/0,a;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var o=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>s){if(s=o,o===i){if(n===r.y)return r;if(n===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!a)return null;if(i===s)return a;var h=a,u=a.x,f=a.y,l=1/0,d;r=a;do i>=r.x&&r.x>=u&&i!==r.x&&Jt(n<f?i:s,n,u,f,n<f?s:i,n,r.x,r.y)&&(d=Math.abs(n-r.y)/(i-r.x),ge(r,e)&&(d<l||d===l&&(r.x>a.x||r.x===a.x&&wo(a,r)))&&(a=r,l=d)),r=r.next;while(r!==h);return a}function wo(e,t){return U(e.prev,e,t.prev)<0&&U(t.next,e,e.next)<0}function Ro(e,t,r,i){var n=e;do n.z===null&&(n.z=jr(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Ao(n)}function Ao(e){var t,r,i,n,s,a,o,h,u=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<u&&(o++,i=i.nextZ,!!i);t++);for(h=u;o>0||h>0&&i;)o!==0&&(h===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,u*=2}while(a>1);return e}function jr(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Co(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Jt(e,t,r,i,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(i-o)-(r-a)*(t-o)>=0&&(r-a)*(s-o)-(n-a)*(i-o)>=0}function Oo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!No(e,t)&&(ge(e,t)&&ge(t,e)&&So(e,t)&&(U(e.prev,e,t.prev)||U(e,t.prev,t))||rr(e,t)&&U(e.prev,e,e.next)>0&&U(t.prev,t,t.next)>0)}function U(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function rr(e,t){return e.x===t.x&&e.y===t.y}function bs(e,t,r,i){var n=Ue(U(e,t,r)),s=Ue(U(e,t,i)),a=Ue(U(r,i,e)),o=Ue(U(r,i,t));return!!(n!==s&&a!==o||n===0&&Fe(e,r,t)||s===0&&Fe(e,i,t)||a===0&&Fe(r,e,i)||o===0&&Fe(r,t,i))}function Fe(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Ue(e){return e>0?1:e<0?-1:0}function No(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&bs(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function ge(e,t){return U(e.prev,e,e.next)<0?U(e,t,e.next)>=0&&U(e,e.prev,t)>=0:U(e,t,e.prev)<0||U(e,e.next,t)<0}function So(e,t){var r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function Ts(e,t){var r=new zr(e.i,e.x,e.y),i=new zr(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function fn(e,t,r,i){var n=new zr(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function xe(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zr(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}er.deviation=function(e,t,r,i){var n=t&&t.length,s=n?t[0]*r:e.length,a=Math.abs($r(e,0,s,r));if(n)for(var o=0,h=t.length;o<h;o++){var u=t[o]*r,f=o<h-1?t[o+1]*r:e.length;a-=Math.abs($r(e,u,f,r))}var l=0;for(o=0;o<i.length;o+=3){var d=i[o]*r,c=i[o+1]*r,p=i[o+2]*r;l+=Math.abs((e[d]-e[p])*(e[c+1]-e[d+1])-(e[d]-e[c])*(e[p+1]-e[d+1]))}return a===0&&l===0?0:Math.abs((l-a)/a)};function $r(e,t,r,i){for(var n=0,s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}er.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var a=0;a<t;a++)r.vertices.push(e[n][s][a]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r};var Po=ui.exports;const Fo=se(Po);var We={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */We.exports;(function(e,t){(function(r){var i=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,s=typeof mr=="object"&&mr;(s.global===s||s.window===s||s.self===s)&&(r=s);var a,o=2147483647,h=36,u=1,f=26,l=38,d=700,c=72,p=128,_="-",v=/^xn--/,y=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=h-u,E=Math.floor,S=String.fromCharCode,V;function B(b){throw RangeError(x[b])}function j(b,w){for(var C=b.length,F=[];C--;)F[C]=w(b[C]);return F}function mt(b,w){var C=b.split("@"),F="";C.length>1&&(F=C[0]+"@",b=C[1]),b=b.replace(m,".");var M=b.split("."),$=j(M,w).join(".");return F+$}function Yt(b){for(var w=[],C=0,F=b.length,M,$;C<F;)M=b.charCodeAt(C++),M>=55296&&M<=56319&&C<F?($=b.charCodeAt(C++),($&64512)==56320?w.push(((M&1023)<<10)+($&1023)+65536):(w.push(M),C--)):w.push(M);return w}function Oe(b){return j(b,function(w){var C="";return w>65535&&(w-=65536,C+=S(w>>>10&1023|55296),w=56320|w&1023),C+=S(w),C}).join("")}function Ut(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:h}function Wt(b,w){return b+22+75*(b<26)-((w!=0)<<5)}function qt(b,w,C){var F=0;for(b=C?E(b/d):b>>1,b+=E(b/w);b>R*f>>1;F+=h)b=E(b/R);return E(F+(R+1)*b/(b+l))}function Mt(b){var w=[],C=b.length,F,M=0,$=p,D=c,K,at,lt,yt,z,tt,ot,At,Lt;for(K=b.lastIndexOf(_),K<0&&(K=0),at=0;at<K;++at)b.charCodeAt(at)>=128&&B("not-basic"),w.push(b.charCodeAt(at));for(lt=K>0?K+1:0;lt<C;){for(yt=M,z=1,tt=h;lt>=C&&B("invalid-input"),ot=Ut(b.charCodeAt(lt++)),(ot>=h||ot>E((o-M)/z))&&B("overflow"),M+=ot*z,At=tt<=D?u:tt>=D+f?f:tt-D,!(ot<At);tt+=h)Lt=h-At,z>E(o/Lt)&&B("overflow"),z*=Lt;F=w.length+1,D=qt(M-yt,F,yt==0),E(M/F)>o-$&&B("overflow"),$+=E(M/F),M%=F,w.splice(M++,0,$)}return Oe(w)}function Ne(b){var w,C,F,M,$,D,K,at,lt,yt,z,tt=[],ot,At,Lt,_r;for(b=Yt(b),ot=b.length,w=p,C=0,$=c,D=0;D<ot;++D)z=b[D],z<128&&tt.push(S(z));for(F=M=tt.length,M&&tt.push(_);F<ot;){for(K=o,D=0;D<ot;++D)z=b[D],z>=w&&z<K&&(K=z);for(At=F+1,K-w>E((o-C)/At)&&B("overflow"),C+=(K-w)*At,w=K,D=0;D<ot;++D)if(z=b[D],z<w&&++C>o&&B("overflow"),z==w){for(at=C,lt=h;yt=lt<=$?u:lt>=$+f?f:lt-$,!(at<yt);lt+=h)_r=at-yt,Lt=h-yt,tt.push(S(Wt(yt+_r%Lt,0))),at=E(_r/Lt);tt.push(S(Wt(at,0))),$=qt(C,At,F==M),C=0,++F}++C,++w}return tt.join("")}function Xa(b){return mt(b,function(w){return v.test(w)?Mt(w.slice(4).toLowerCase()):w})}function Ha(b){return mt(b,function(w){return y.test(w)?"xn--"+Ne(w):w})}if(a={version:"1.3.2",ucs2:{decode:Yt,encode:Oe},decode:Mt,encode:Ne,toASCII:Ha,toUnicode:Xa},i&&n)if(e.exports==i)n.exports=a;else for(V in a)a.hasOwnProperty(V)&&(i[V]=a[V]);else r.punycode=a})(mr)})(We,We.exports);var Uo=We.exports,Mo={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},be={};function Lo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Bo=function(e,t,r,i){t=t||"&",r=r||"=";var n={};if(typeof e!="string"||e.length===0)return n;var s=/\+/g;e=e.split(t);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var o=e.length;a>0&&o>a&&(o=a);for(var h=0;h<o;++h){var u=e[h].replace(s,"%20"),f=u.indexOf(r),l,d,c,p;f>=0?(l=u.substr(0,f),d=u.substr(f+1)):(l=u,d=""),c=decodeURIComponent(l),p=decodeURIComponent(d),Lo(n,c)?Array.isArray(n[c])?n[c].push(p):n[c]=[n[c],p]:n[c]=p}return n},ae=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Go=function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var s=encodeURIComponent(ae(n))+r;return Array.isArray(e[n])?e[n].map(function(a){return s+encodeURIComponent(ae(a))}).join(t):s+encodeURIComponent(ae(e[n]))}).join(t):i?encodeURIComponent(ae(i))+r+encodeURIComponent(ae(e)):""};be.decode=be.parse=Bo;be.encode=be.stringify=Go;var ko=Uo,ct=Mo,Do=ir,Xo=Jo,Ho=Ko;function ft(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Vo=/^([a-z0-9.+-]+:)/i,jo=/:[0-9]*$/,zo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,$o=["<",">",'"',"`"," ","\r",`
`,"	"],Yo=["{","}","|","\\","^","`"].concat($o),Yr=["'"].concat(Yo),ln=["%","/","?",";","#"].concat(Yr),cn=["/","?","#"],Wo=255,dn=/^[+a-z0-9A-Z_-]{0,63}$/,qo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Zo={javascript:!0,"javascript:":!0},Wr={javascript:!0,"javascript:":!0},te={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},qr=be;function ir(e,t,r){if(e&&ct.isObject(e)&&e instanceof ft)return e;var i=new ft;return i.parse(e,t,r),i}ft.prototype.parse=function(e,t,r){if(!ct.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),n=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(n),a=/\\/g;s[0]=s[0].replace(a,"/"),e=s.join(n);var o=e;if(o=o.trim(),!r&&e.split("#").length===1){var h=zo.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=qr.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=Vo.exec(o);if(u){u=u[0];var f=u.toLowerCase();this.protocol=f,o=o.substr(u.length)}if(r||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=o.substr(0,2)==="//";l&&!(u&&Wr[u])&&(o=o.substr(2),this.slashes=!0)}if(!Wr[u]&&(l||u&&!te[u])){for(var d=-1,c=0;c<cn.length;c++){var p=o.indexOf(cn[c]);p!==-1&&(d===-1||p<d)&&(d=p)}var _,v;d===-1?v=o.lastIndexOf("@"):v=o.lastIndexOf("@",d),v!==-1&&(_=o.slice(0,v),o=o.slice(v+1),this.auth=decodeURIComponent(_)),d=-1;for(var c=0;c<ln.length;c++){var p=o.indexOf(ln[c]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var m=this.hostname.split(/\./),c=0,x=m.length;c<x;c++){var R=m[c];if(R&&!R.match(dn)){for(var E="",S=0,V=R.length;S<V;S++)R.charCodeAt(S)>127?E+="x":E+=R[S];if(!E.match(dn)){var B=m.slice(0,c),j=m.slice(c+1),mt=R.match(qo);mt&&(B.push(mt[1]),j.unshift(mt[2])),j.length&&(o="/"+j.join(".")+o),this.hostname=B.join(".");break}}}this.hostname.length>Wo?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=ko.toASCII(this.hostname));var Yt=this.port?":"+this.port:"",Oe=this.hostname||"";this.host=Oe+Yt,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!Zo[f])for(var c=0,x=Yr.length;c<x;c++){var Ut=Yr[c];if(o.indexOf(Ut)!==-1){var Wt=encodeURIComponent(Ut);Wt===Ut&&(Wt=escape(Ut)),o=o.split(Ut).join(Wt)}}var qt=o.indexOf("#");qt!==-1&&(this.hash=o.substr(qt),o=o.slice(0,qt));var Mt=o.indexOf("?");if(Mt!==-1?(this.search=o.substr(Mt),this.query=o.substr(Mt+1),t&&(this.query=qr.parse(this.query)),o=o.slice(0,Mt)):t&&(this.search="",this.query={}),o&&(this.pathname=o),te[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Yt=this.pathname||"",Ne=this.search||"";this.path=Yt+Ne}return this.href=this.format(),this};function Ko(e){return ct.isString(e)&&(e=ir(e)),e instanceof ft?e.format():ft.prototype.format.call(e)}ft.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&ct.isObject(this.query)&&Object.keys(this.query).length&&(s=qr.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||te[t])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),r=r.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),t+n+r+a+i};function Jo(e,t){return ir(e,!1,!0).resolve(t)}ft.prototype.resolve=function(e){return this.resolveObject(ir(e,!1,!0)).format()};ft.prototype.resolveObject=function(e){if(ct.isString(e)){var t=new ft;t.parse(e,!1,!0),e=t}for(var r=new ft,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),o=0;o<a.length;o++){var h=a[o];h!=="protocol"&&(r[h]=e[h])}return te[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!te[e.protocol]){for(var u=Object.keys(e),f=0;f<u.length;f++){var l=u[f];r[l]=e[l]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Wr[e.protocol]){for(var x=(e.pathname||"").split("/");x.length&&!(e.host=x.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),r.pathname=x.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",c=r.search||"";r.path=d+c}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",v=_||p||r.host&&e.pathname,y=v,m=r.pathname&&r.pathname.split("/")||[],x=e.pathname&&e.pathname.split("/")||[],R=r.protocol&&!te[r.protocol];if(R&&(r.hostname="",r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(x[0]===""?x[0]=e.host:x.unshift(e.host)),e.host=null),v=v&&(x[0]===""||m[0]==="")),_)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,m=x;else if(x.length)m||(m=[]),m.pop(),m=m.concat(x),r.search=e.search,r.query=e.query;else if(!ct.isNullOrUndefined(e.search)){if(R){r.hostname=r.host=m.shift();var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return r.search=e.search,r.query=e.query,(!ct.isNull(r.pathname)||!ct.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=m.slice(-1)[0],V=(r.host||e.host||m.length>1)&&(S==="."||S==="..")||S==="",B=0,j=m.length;j>=0;j--)S=m[j],S==="."?m.splice(j,1):S===".."?(m.splice(j,1),B++):B&&(m.splice(j,1),B--);if(!v&&!y)for(;B--;B)m.unshift("..");v&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),V&&m.join("/").substr(-1)!=="/"&&m.push("");var mt=m[0]===""||m[0]&&m[0].charAt(0)==="/";if(R){r.hostname=r.host=mt?"":m.length?m.shift():"";var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return v=v||r.host&&m.length,v&&!mt&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),(!ct.isNull(r.pathname)||!ct.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};ft.prototype.parseHost=function(){var e=this.host,t=jo.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};/*!
 * @pixi/utils - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qt={parse:Do,format:Ho,resolve:Xo};I.RETINA_PREFIX=/@([0-9\.]+)x/;I.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Zr=!1,pn="6.1.2";function Qo(){Zr=!0}function Es(e){var t;if(!Zr){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+pn+" -  "+e+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=self.console).log.apply(t,r)}else self.console&&self.console.log("PixiJS "+pn+" - "+e+" - http://www.pixijs.com/");Zr=!0}}var br;function Is(){return typeof br>"u"&&(br=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:I.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),br}var th="#f0f8ff",eh="#faebd7",rh="#00ffff",ih="#7fffd4",nh="#f0ffff",sh="#f5f5dc",ah="#ffe4c4",oh="#000000",hh="#ffebcd",uh="#0000ff",fh="#8a2be2",lh="#a52a2a",ch="#deb887",dh="#5f9ea0",ph="#7fff00",vh="#d2691e",_h="#ff7f50",mh="#6495ed",yh="#fff8dc",gh="#dc143c",xh="#00ffff",bh="#00008b",Th="#008b8b",Eh="#b8860b",Ih="#a9a9a9",wh="#006400",Rh="#a9a9a9",Ah="#bdb76b",Ch="#8b008b",Oh="#556b2f",Nh="#ff8c00",Sh="#9932cc",Ph="#8b0000",Fh="#e9967a",Uh="#8fbc8f",Mh="#483d8b",Lh="#2f4f4f",Bh="#2f4f4f",Gh="#00ced1",kh="#9400d3",Dh="#ff1493",Xh="#00bfff",Hh="#696969",Vh="#696969",jh="#1e90ff",zh="#b22222",$h="#fffaf0",Yh="#228b22",Wh="#ff00ff",qh="#dcdcdc",Zh="#f8f8ff",Kh="#daa520",Jh="#ffd700",Qh="#808080",tu="#008000",eu="#adff2f",ru="#808080",iu="#f0fff0",nu="#ff69b4",su="#cd5c5c",au="#4b0082",ou="#fffff0",hu="#f0e68c",uu="#fff0f5",fu="#e6e6fa",lu="#7cfc00",cu="#fffacd",du="#add8e6",pu="#f08080",vu="#e0ffff",_u="#fafad2",mu="#d3d3d3",yu="#90ee90",gu="#d3d3d3",xu="#ffb6c1",bu="#ffa07a",Tu="#20b2aa",Eu="#87cefa",Iu="#778899",wu="#778899",Ru="#b0c4de",Au="#ffffe0",Cu="#00ff00",Ou="#32cd32",Nu="#faf0e6",Su="#ff00ff",Pu="#800000",Fu="#66cdaa",Uu="#0000cd",Mu="#ba55d3",Lu="#9370db",Bu="#3cb371",Gu="#7b68ee",ku="#00fa9a",Du="#48d1cc",Xu="#c71585",Hu="#191970",Vu="#f5fffa",ju="#ffe4e1",zu="#ffe4b5",$u="#ffdead",Yu="#000080",Wu="#fdf5e6",qu="#808000",Zu="#6b8e23",Ku="#ffa500",Ju="#ff4500",Qu="#da70d6",tf="#eee8aa",ef="#98fb98",rf="#afeeee",nf="#db7093",sf="#ffefd5",af="#ffdab9",of="#cd853f",hf="#ffc0cb",uf="#dda0dd",ff="#b0e0e6",lf="#800080",cf="#663399",df="#ff0000",pf="#bc8f8f",vf="#4169e1",_f="#8b4513",mf="#fa8072",yf="#f4a460",gf="#2e8b57",xf="#fff5ee",bf="#a0522d",Tf="#c0c0c0",Ef="#87ceeb",If="#6a5acd",wf="#708090",Rf="#708090",Af="#fffafa",Cf="#00ff7f",Of="#4682b4",Nf="#d2b48c",Sf="#008080",Pf="#d8bfd8",Ff="#ff6347",Uf="#40e0d0",Mf="#ee82ee",Lf="#f5deb3",Bf="#ffffff",Gf="#f5f5f5",kf="#ffff00",Df="#9acd32",Xf={aliceblue:th,antiquewhite:eh,aqua:rh,aquamarine:ih,azure:nh,beige:sh,bisque:ah,black:oh,blanchedalmond:hh,blue:uh,blueviolet:fh,brown:lh,burlywood:ch,cadetblue:dh,chartreuse:ph,chocolate:vh,coral:_h,cornflowerblue:mh,cornsilk:yh,crimson:gh,cyan:xh,darkblue:bh,darkcyan:Th,darkgoldenrod:Eh,darkgray:Ih,darkgreen:wh,darkgrey:Rh,darkkhaki:Ah,darkmagenta:Ch,darkolivegreen:Oh,darkorange:Nh,darkorchid:Sh,darkred:Ph,darksalmon:Fh,darkseagreen:Uh,darkslateblue:Mh,darkslategray:Lh,darkslategrey:Bh,darkturquoise:Gh,darkviolet:kh,deeppink:Dh,deepskyblue:Xh,dimgray:Hh,dimgrey:Vh,dodgerblue:jh,firebrick:zh,floralwhite:$h,forestgreen:Yh,fuchsia:Wh,gainsboro:qh,ghostwhite:Zh,goldenrod:Kh,gold:Jh,gray:Qh,green:tu,greenyellow:eu,grey:ru,honeydew:iu,hotpink:nu,indianred:su,indigo:au,ivory:ou,khaki:hu,lavenderblush:uu,lavender:fu,lawngreen:lu,lemonchiffon:cu,lightblue:du,lightcoral:pu,lightcyan:vu,lightgoldenrodyellow:_u,lightgray:mu,lightgreen:yu,lightgrey:gu,lightpink:xu,lightsalmon:bu,lightseagreen:Tu,lightskyblue:Eu,lightslategray:Iu,lightslategrey:wu,lightsteelblue:Ru,lightyellow:Au,lime:Cu,limegreen:Ou,linen:Nu,magenta:Su,maroon:Pu,mediumaquamarine:Fu,mediumblue:Uu,mediumorchid:Mu,mediumpurple:Lu,mediumseagreen:Bu,mediumslateblue:Gu,mediumspringgreen:ku,mediumturquoise:Du,mediumvioletred:Xu,midnightblue:Hu,mintcream:Vu,mistyrose:ju,moccasin:zu,navajowhite:$u,navy:Yu,oldlace:Wu,olive:qu,olivedrab:Zu,orange:Ku,orangered:Ju,orchid:Qu,palegoldenrod:tf,palegreen:ef,paleturquoise:rf,palevioletred:nf,papayawhip:sf,peachpuff:af,peru:of,pink:hf,plum:uf,powderblue:ff,purple:lf,rebeccapurple:cf,red:df,rosybrown:pf,royalblue:vf,saddlebrown:_f,salmon:mf,sandybrown:yf,seagreen:gf,seashell:xf,sienna:bf,silver:Tf,skyblue:Ef,slateblue:If,slategray:wf,slategrey:Rf,snow:Af,springgreen:Cf,steelblue:Of,tan:Nf,teal:Sf,thistle:Pf,tomato:Ff,turquoise:Uf,violet:Mf,wheat:Lf,white:Bf,whitesmoke:Gf,yellow:kf,yellowgreen:Df};function ws(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function Rs(e){var t=e.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function Hf(e){return typeof e=="string"&&(e=Xf[e.toLowerCase()]||e,e[0]==="#"&&(e=e.substr(1))),parseInt(e,16)}function Vf(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function jf(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[T.NORMAL_NPM]=T.NORMAL,e[T.ADD_NPM]=T.ADD,e[T.SCREEN_NPM]=T.SCREEN,t[T.NORMAL]=T.NORMAL_NPM,t[T.ADD]=T.ADD_NPM,t[T.SCREEN]=T.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i}var fi=jf();function zf(e,t){return fi[t?1:0][e]}function $f(e,t,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function As(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,i=e>>8&255,n=e&255;return r=r*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(r<<16)+(i<<8)+n}function Yf(e,t,r,i){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(i||i===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function Wf(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function nr(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var qf={Float32Array,Uint32Array,Int32Array,Uint8Array};function Zf(e,t){for(var r=0,i=0,n={},s=0;s<e.length;s++)i+=t[s],r+=e[s].length;for(var a=new ArrayBuffer(r*4),o=null,h=0,s=0;s<e.length;s++){var u=t[s],f=e[s],l=nr(f);n[l]||(n[l]=new qf[l](a)),o=n[l];for(var d=0;d<f.length;d++){var c=(d/u|0)*i+h,p=d%u;o[c+p]=f[d]}h+=u}return new Float32Array(a)}function Te(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Kr(e){return!(e&e-1)&&!!e}function Jr(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function pe(e,t,r){var i=e.length,n;if(!(t>=i||r===0)){r=t+r>i?i-t:r;var s=i-r;for(n=t;n<s;++n)e[n]=e[n+r];e.length=s}}function ce(e){return e===0?0:e<0?-1:1}var Kf=0;function Ee(){return++Kf}var vn={};function wt(e,t,r){if(r===void 0&&(r=3),!vn[t]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(i))),vn[t]=!0}}var Qr={},q=Object.create(null),nt=Object.create(null);function Jf(){var e;for(e in q)q[e].destroy();for(e in nt)nt[e].destroy()}function Qf(){var e;for(e in q)delete q[e];for(e in nt)delete nt[e]}var tl=function(){function e(t,r,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||I.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function el(e){var t=e.width,r=e.height,i=e.getContext("2d"),n=i.getImageData(0,0,t,r),s=n.data,a=s.length,o={top:null,left:null,right:null,bottom:null},h=null,u,f,l;for(u=0;u<a;u+=4)s[u+3]!==0&&(f=u/4%t,l=~~(u/4/t),o.top===null&&(o.top=l),(o.left===null||f<o.left)&&(o.left=f),(o.right===null||o.right<f)&&(o.right=f+1),(o.bottom===null||o.bottom<l)&&(o.bottom=l));return o.top!==null&&(t=o.right-o.left,r=o.bottom-o.top+1,h=i.getImageData(o.left,o.top,t,r)),{height:r,width:t,data:h}}var Cs=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function rl(e){var t=Cs.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var Me;function Os(e,t){if(t===void 0&&(t=self.location),e.indexOf("data:")===0)return"";t=t||self.location,Me||(Me=document.createElement("a")),Me.href=e;var r=Qt.parse(Me.href),i=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!i||r.protocol!==t.protocol?"anonymous":""}function qe(e,t){var r=I.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}const il=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:nt,CanvasRenderTarget:tl,DATA_URI:Cs,EventEmitter:Re,ProgramCache:Qr,TextureCache:q,clearTextureCache:Qf,correctBlendMode:zf,createIndicesForQuads:Wf,decomposeDataUri:rl,deprecation:wt,destroyTextureCache:Jf,determineCrossOrigin:Os,earcut:Fo,getBufferType:nr,getResolutionOfUrl:qe,hex2rgb:ws,hex2string:Rs,interleaveTypedArrays:Zf,isMobile:Et,isPow2:Kr,isWebGLSupported:Is,log2:Jr,nextPow2:Te,premultiplyBlendMode:fi,premultiplyRgba:$f,premultiplyTint:As,premultiplyTintToRgba:Yf,removeItems:pe,rgb2hex:Vf,sayHello:Es,sign:ce,skipHello:Qo,string2hex:Hf,trimCanvas:el,uid:Ee,url:Qt},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */I.SORTABLE_CHILDREN=!1;var ti=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?O.EMPTY:(t=t||new O(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*r.x+s*r.y+o,f=n*r.x+a*r.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)},e.prototype.addQuad=function(t){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=r,this.minY=i,this.maxX=n,this.maxY=s},e.prototype.addFrame=function(t,r,i,n,s){this.addFrameMatrix(t.worldTransform,r,i,n,s)},e.prototype.addFrameMatrix=function(t,r,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,f=t.tx,l=t.ty,d=this.minX,c=this.minY,p=this.maxX,_=this.maxY,v=a*r+h*i+f,y=o*r+u*i+l;d=v<d?v:d,c=y<c?y:c,p=v>p?v:p,_=y>_?y:_,v=a*n+h*i+f,y=o*n+u*i+l,d=v<d?v:d,c=y<c?y:c,p=v>p?v:p,_=y>_?y:_,v=a*r+h*s+f,y=o*r+u*s+l,d=v<d?v:d,c=y<c?y:c,p=v>p?v:p,_=y>_?y:_,v=a*n+h*s+f,y=o*n+u*s+l,d=v<d?v:d,c=y<c?y:c,p=v>p?v:p,_=y>_?y:_,this.minX=d,this.minY=c,this.maxX=p,this.maxY=_},e.prototype.addVertexData=function(t,r,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=r;h<i;h+=2){var u=t[h],f=t[h+1];n=u<n?u:n,s=f<s?f:s,a=u>a?u:a,o=f>o?f:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},e.prototype.addVertices=function(t,r,i,n){this.addVerticesMatrix(t.worldTransform,r,i,n)},e.prototype.addVerticesMatrix=function(t,r,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,f=t.d,l=t.tx,d=t.ty,c=this.minX,p=this.minY,_=this.maxX,v=this.maxY,y=i;y<n;y+=2){var m=r[y],x=r[y+1],R=o*m+u*x+l,E=f*x+h*m+d;c=Math.min(c,R-s),_=Math.max(_,R+s),p=Math.min(p,E-a),v=Math.max(v,E+a)}this.minX=c,this.minY=p,this.maxX=_,this.maxY=v},e.prototype.addBounds=function(t){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},e.prototype.addBoundsMask=function(t,r){var i=t.minX>r.minX?t.minX:r.minX,n=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,a=t.maxY<r.maxY?t.maxY:r.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>f?a:f}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var i=t.minX>r.x?t.minX:r.x,n=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,a=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>f?a:f}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,i,n,s,a){t-=s,r-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ei=function(e,t){return ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},ei(e,t)};function li(e,t){ei(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ie=function(e){li(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new ms,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new ti,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var i=Object.keys(r),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(r,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new O),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new O),r=this._localBoundsRect),this._localBounds||(this._localBounds=new ti);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,r);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(r,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},t.prototype.toLocal=function(r,i,n,s){return i&&(r=i.toGlobal(r,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,n)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,i,n,s,a,o,h,u,f){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=0),this.position.x=r,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=f,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Ns),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*ps},set:function(r){this.transform.rotation=r*vs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=r,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(Re),Ns=function(e){li(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(Ie);Ie.prototype.displayObjectUpdateTransform=Ie.prototype.updateTransform;function nl(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var ne=function(e){li(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=I.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},t.prototype.swapChildren=function(r,i){if(r!==i){var n=this.getChildIndex(r),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=r,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(r);pe(this.children,n,1),this.children.splice(i,0,r),this.onChildrenChange(i)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,pe(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,pe(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},t.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var n=r,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!r&&s.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(nl),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var n=e.prototype.getLocalBounds.call(this,r);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else{this._render(r);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(r)}},t.prototype.renderAdvanced=function(r){r.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&r.filter.push(this,this._enabledFilters)}n&&r.mask.push(this,this._mask),this._render(r);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(r);r.batch.flush(),n&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(Ie);ne.prototype.containerUpdateTransform=ne.prototype.updateTransform;/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */I.PREFER_ENV=Et.any?vt.WEBGL:vt.WEBGL2;I.STRICT_TEXTURE_CACHE=!1;var we=[];function sr(e,t){if(!e)return null;var r="";if(typeof e=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(r=i[1].toLowerCase())}for(var n=we.length-1;n>=0;--n){var s=we[n];if(s.test&&s.test(e,r))return new s(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ri=function(e,t){return ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},ri(e,t)};function N(e,t){ri(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ii=function(){return ii=Object.assign||function(t){for(var r=arguments,i,n=1,s=arguments.length;n<s;n++){i=r[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},ii.apply(this,arguments)};function sl(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&(r[i[n]]=e[i[n]]);return r}var zt=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new X("setRealSize"),this.onUpdate=new X("update"),this.onError=new X("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,i){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),Ae=function(e){N(t,e);function t(r,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=e.call(this,a,o)||this,n.data=r,n}return t.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===It.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(zt),al={scaleMode:dt.NEAREST,format:g.RGBA,alphaMode:It.NPM},H=function(e){N(t,e);function t(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var n=e.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,f=i.height,l=i.wrapMode,d=i.format,c=i.type,p=i.target,_=i.resolution,v=i.resourceOptions;return r&&!(r instanceof zt)&&(r=sr(r,v),r.internal=!0),n.resolution=_||I.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((f||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:I.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:I.ANISOTROPIC_LEVEL,n._wrapMode=l||I.WRAP_MODE,n._scaleMode=h!==void 0?h:I.SCALE_MODE,n.format=d||g.RGBA,n.type=c||A.UNSIGNED_BYTE,n.target=p||Nt.TEXTURE_2D,n.alphaMode=s!==void 0?s:It.UNPACK,n.uid=Ee(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&f>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(r),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,i){var n;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,i,n){return n=n||this.resolution,this.setRealSize(r*n,i*n,n)},t.prototype.setRealSize=function(r,i,n){return this.resolution=n||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=Kr(this.realWidth)&&Kr(this.realHeight)},t.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete nt[this.cacheId],delete q[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,i,n){n===void 0&&(n=I.STRICT_TEXTURE_CACHE);var s=typeof r=="string",a=null;if(s)a=r;else{if(!r._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";r._pixiId=o+"_"+Ee()}a=r._pixiId}var h=nt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(r,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(r,i,n,s){r=r||new Float32Array(i*n*4);var a=new Ae(r,{width:i,height:n}),o=r instanceof Float32Array?A.FLOAT:A.UNSIGNED_BYTE;return new t(a,Object.assign(al,s||{width:i,height:n,type:o}))},t.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),nt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),nt[i]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var i=nt[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete nt[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)delete nt[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(Re),ar=function(e){N(t,e);function t(r,i){var n=this,s=i||{},a=s.width,o=s.height;n=e.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<r;h++){var u=new H;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=r,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(r,i){for(var n=0;n<this.length;n++)r[n]&&(r[n].castToBaseTexture?this.addBaseTextureAt(r[n].castToBaseTexture(),n):r[n]instanceof zt?this.addResourceAt(r[n],n):this.addResourceAt(sr(r[n],i),n))},t.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=r.items[0],a=s.realWidth,o=s.realHeight;return r.resize(a,o),Promise.resolve(r)}),this._load},t}(zt),ci=function(e){N(t,e);function t(r,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(r)?(h=r,u=r.length):u=r,n=e.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=Nt.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=r.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var f=0;f<a;f++){var l=h[f];o[f]<l.dirtyId&&(o[f]=l.dirtyId,l.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,f,l.resource.width,l.resource.height,1,i.format,n.type,l.resource.source))}return!0},t}(ar),_t=function(e){N(t,e);function t(r){var i=this,n=r,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=e.call(this,s,a)||this,i.source=r,i.noSubImage=!1,i}return t.crossOrigin=function(r,i,n){n===void 0&&i.indexOf("data:")!==0?r.crossOrigin=Os(i):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(r,i,n,s){var a=r.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===It.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,n=r.naturalHeight||r.videoHeight||r.height;this.resize(i,n),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(zt),or=function(e){N(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var i=self.OffscreenCanvas;return i&&r instanceof i?!0:self.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(_t),di=function(e){N(t,e);function t(r,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");n=e.call(this,6,{width:a,height:o})||this;for(var f=0;f<t.SIDES;f++)n.items[f].target=Nt.TEXTURE_CUBE_MAP_POSITIVE_X+f;return n.linkBaseTexture=u!==!1,r&&n.initFromArray(r,i),h!==!1&&n.load(),n}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=Nt.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=Nt.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},t.prototype.upload=function(r,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(r,o,n),s[a]=o.dirtyId):s[a]<-1&&(r.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(ar),hr=function(e){N(t,e);function t(r,i){var n=this;if(i=i||{},!(r instanceof HTMLImageElement)){var s=new Image;_t.crossOrigin(s,r,i.crossorigin),s.src=r,r=s}return n=e.call(this,r)||this,!r.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=r.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:I.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===It.UNPACK?"premultiply":"none"})}).then(function(a){return r.destroyed?Promise.reject():(r.bitmap=a,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(_t),pi=function(e){N(t,e);function t(r,i){var n=this;return i=i||{},n=e.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=r,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},/^\<svg/.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,i=new Image;_t.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){r._resolve&&(i.onerror=null,r.onError.emit(n))},i.onload=function(){if(r._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*r.scale,o=s*r.scale;(r._overrideWidth||r._overrideHeight)&&(a=r._overrideWidth||r._overrideHeight/s*n,o=r._overrideHeight||r._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=r.source;h.width=a,h.height=o,h._pixiId="canvas_"+Ee(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),r._resolve(),r._resolve=null}}},t.getSize=function(r){var i=t.SVG_SIZE.exec(r),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(_t),vi=function(e){N(t,e);function t(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var a=r[0].src||r[0];_t.crossOrigin(s,a,i.crossorigin);for(var o=0;o<r.length;++o){var h=document.createElement("source"),u=r[o],f=u.src,l=u.mime;f=f||r[o];var d=f.split("?").shift().toLowerCase(),c=d.substr(d.lastIndexOf(".")+1);l=l||t.MIME_TYPES[c]||"video/"+c,h.src=f,h.type=l,s.appendChild(h)}r=s}return n=e.call(this,r)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(r){if(!this.destroyed){var i=bt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){r.valid?n(r):(r._resolve=n,i.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(bt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(bt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(bt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(bt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(bt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,i){return self.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(_t),_i=function(e){N(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!self.createImageBitmap&&r instanceof ImageBitmap},t}(_t);we.push(hr,_i,or,vi,pi,Ae,di,ci);var Ss={__proto__:null,Resource:zt,BaseImageResource:_t,INSTALLED:we,autoDetectResource:sr,AbstractMultiResource:ar,ArrayResource:ci,BufferResource:Ae,CanvasResource:or,CubeResource:di,ImageResource:hr,SVGResource:pi,VideoResource:vi,ImageBitmapResource:_i},ol=function(e){N(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===It.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(Ae),Ze=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new X("disposeFramebuffer"),this.multisample=L.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new H(null,{scaleMode:dt.NEAREST,resolution:1,mipmap:St.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new H(new ol(null,{width:this.width,height:this.height}),{scaleMode:dt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:St.OFF,format:g.DEPTH_COMPONENT,type:A.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,r/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,r/s)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),mi=function(e){N(t,e);function t(r){var i=this;if(typeof r=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];r={width:n,height:s,scaleMode:a,resolution:o}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:L.NONE,i=e.call(this,null,r)||this,i.mipmap=St.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ze(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(H),yi=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,i){var n=r.width,s=r.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=P.add(i,P.NW),this.x0=h+a*P.uX(i),this.y0=u+o*P.uY(i),i=P.add(i,2),this.x1=h+a*P.uX(i),this.y1=u+o*P.uY(i),i=P.add(i,2),this.x2=h+a*P.uX(i),this.y2=u+o*P.uY(i),i=P.add(i,2),this.x3=h+a*P.uX(i),this.y3=u+o*P.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),_n=new yi,k=function(e){N(t,e);function t(r,i,n,s,a,o){var h=e.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new O(0,0,1,1)),r instanceof t&&(r=r.baseTexture),h.baseTexture=r,h._frame=i,h.trim=s,h.valid=!1,h._uvs=_n,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new pt(o.x,o.y):new pt(0,0),h._updateID=0,h.textureCacheIds=[],r.valid?h.noFrame?r.valid&&h.onBaseTextureUpdated(r):h.frame=i:r.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&r.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&q[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=r),n},t.prototype.updateUvs=function(){this._uvs===_n&&(this._uvs=new yi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,i,n){i===void 0&&(i={}),n===void 0&&(n=I.STRICT_TEXTURE_CACHE);var s=typeof r=="string",a=null;if(s)a=r;else{if(!r._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";r._pixiId=o+"_"+Ee()}a=r._pixiId}var h=q[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=qe(r)),h=new t(new H(r,i)),h.baseTexture.cacheId=a,H.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(r,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(r,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(r,i,n,s){return new t(H.fromBuffer(r,i,n,s))},t.fromLoader=function(r,i,n,s){var a=new H(r,Object.assign({scaleMode:I.SCALE_MODE,resolution:qe(i)},s)),o=a.resource;o instanceof hr&&(o.url=i);var h=new t(a);return n||(n=i),H.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(H.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),q[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),q[i]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var i=q[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete q[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)q[r.textureCacheIds[s]]===r&&delete q[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,n=r.y,s=r.width,a=r.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",f="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,l="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(f+" "+u+" "+l))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(Re);function hl(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new k(new H(new or(e)))}function ur(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}k.EMPTY=new k(new H);ur(k.EMPTY);ur(k.EMPTY.baseTexture);k.WHITE=hl();ur(k.WHITE);ur(k.WHITE.baseTexture);var fr=function(e){N(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(r*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},t.create=function(r){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof r=="number"&&(wt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new mi(r))},t}(k),Ps=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,i){i===void 0&&(i=L.NONE);var n=new mi(Object.assign({width:t,height:r,resolution:1,multisample:i},this.textureOptions));return new fr(n)},e.prototype.getOptimalTexture=function(t,r,i,n){i===void 0&&(i=1),n===void 0&&(n=L.NONE);var s;t=Math.ceil(t*i),r=Math.ceil(r*i),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Te(t),r=Te(r),s=((t&65535)<<16|r&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,r,n)),a.filterPoolKey=s,a.setResolution(i),a},e.prototype.getFilterTexture=function(t,r,i){var n=this.getOptimalTexture(t.width,t.height,r||t.resolution,i||L.NONE);return n.filterFrame=t.filterFrame,n},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),ni=function(){function e(t,r,i,n,s,a,o){r===void 0&&(r=0),i===void 0&&(i=!1),n===void 0&&(n=A.FLOAT),this.buffer=t,this.size=r,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,i,n,s){return new e(t,r,i,n,s)},e}(),ul=0,Z=function(){function e(t,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=ul++,this.disposeRunner=new X("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===ut.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?ut.ELEMENT_ARRAY_BUFFER:ut.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),fl={Float32Array,Uint32Array,Int32Array,Uint8Array};function ll(e,t){for(var r=0,i=0,n={},s=0;s<e.length;s++)i+=t[s],r+=e[s].length;for(var a=new ArrayBuffer(r*4),o=null,h=0,s=0;s<e.length;s++){var u=t[s],f=e[s],l=nr(f);n[l]||(n[l]=new fl[l](a)),o=n[l];for(var d=0;d<f.length;d++){var c=(d/u|0)*i+h,p=d%u;o[c+p]=f[d]}h+=u}return new Float32Array(a)}var mn={5126:4,5123:2,5121:1},cl=0,dl={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},lr=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=cl++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new X("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Z||(r instanceof Array&&(r=new Float32Array(r)),r=new Z(r));var u=t.split("|");if(u.length>1){for(var f=0;f<u.length;f++)this.addAttribute(u[f],r,i,n,s);return this}var l=this.buffers.indexOf(r);return l===-1&&(this.buffers.push(r),l=this.buffers.length-1),this.attributes[t]=new ni(l,i,n,s,a,o,h),this.instanced=this.instanced||h,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Z||(t instanceof Array&&(t=new Uint16Array(t)),t=new Z(t)),t.type=ut.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],i=new Z,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),r.push(s.size*mn[s.type]/4),s.buffer=0}for(i.data=ll(t,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Z(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new ni(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ut.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new dl[nr(a.buffers[o].data)](n[o]),r.buffers[o]=new Z(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=ut.ELEMENT_ARRAY_BUFFER;for(var u=0,f=0,l=0,d=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){d=o;break}for(var o in a.attributes){var c=a.attributes[o];(c.buffer|0)===d&&(f+=c.size*mn[c.type]/4)}for(var o=0;o<t.length;o++){for(var p=t[o].indexBuffer.data,h=0;h<p.length;h++)r.indexBuffer.data[h+l]+=u;u+=t[o].buffers[d].data.length/f,l+=p.length}}return r},e}(),Fs=function(e){N(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(lr),Us=function(e){N(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Z(r.vertices),r.uvBuffer=new Z(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/r.width,this.uvs[3]=s,this.uvs[4]=n+i.width/r.width,this.uvs[5]=s+i.height/r.height,this.uvs[6]=n,this.uvs[7]=s+i.height/r.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(lr),pl=0,Vt=function(){function e(t,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pl++,this.static=!!r,this.ubo=!!i,t instanceof Z?(this.buffer=t,this.buffer.type=ut.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Z(new Float32Array(1)),this.buffer.type=ut.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,i){if(!this.ubo)this.uniforms[t]=new e(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,i){return new e(t,r,i)},e.uboFrom=function(t,r){return new e(t,r??!0,!0)},e}(),Ms=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=L.NONE,this.sourceFrame=new O,this.destinationFrame=new O,this.bindingSourceFrame=new O,this.bindingDestinationFrame=new O,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Le=[new pt,new pt,new pt,new pt],Tr=new Q,gi=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ps,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Fs,this.quadUv=new Us,this.tempRect=new O,this.activeState={},this.globalUniforms=new Vt({outputFrame:new O,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new Ms,a=this.renderer.renderTexture,o=r[0].resolution,h=r[0].multisample,u=r[0].padding,f=r[0].autoFit,l=r[0].legacy,d=1;d<r.length;d++){var c=r[d];o=Math.min(o,c.resolution),h=Math.min(h,c.multisample),u=this.useMaxPadding?Math.max(u,c.padding):u+c.padding,f=f&&c.autoFit,l=l||c.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=l,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),f){var p=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Tr.copyFrom(i.projection.transform).invert(),p),s.sourceFrame.fit(p)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),i=r.filters;this.activeState=r;var n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*r.resolution),a[1]=Math.round(s[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=r.sourceFrame.width*s[2]-.5*a[2],o[3]=r.sourceFrame.height*s[3]-.5*a[3],r.legacy){var h=n.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,u.renderTexture,xt.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var f=r.renderTexture,l=this.getOptimalFilterTexture(f.width,f.height,r.resolution);l.filterFrame=f.filterFrame;var d=0;for(d=0;d<i.length-1;++d){d===1&&r.multisample>1&&(l=this.getOptimalFilterTexture(f.width,f.height,r.resolution),l.filterFrame=f.filterFrame),i[d].apply(this,f,l,xt.CLEAR,r);var c=f;f=l,l=c}i[d].apply(this,f,u.renderTexture,xt.BLEND,r),d>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(f),this.returnFilterTexture(l)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=xt.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(r===xt.CLEAR||r===xt.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(re.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(re.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=r._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=r.worldTransform.copyTo(Q.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(r.anchor.x,r.anchor.y),o},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,i,n){return i===void 0&&(i=1),n===void 0&&(n=L.NONE),this.texturePool.getOptimalTexture(t,r,i,n)},e.prototype.getFilterTexture=function(t,r,i){if(typeof t=="number"){var n=t;t=r,r=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,i||L.NONE);return s.filterFrame=t.filterFrame,s},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var i=Le[0],n=Le[1],s=Le[2],a=Le[3];i.set(r.left,r.top),n.set(r.left,r.bottom),s.set(r.right,r.top),a.set(r.right,r.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),f=Math.max(i.y,n.y,s.y,a.y);r.x=o,r.y=h,r.width=u-o,r.height=f-h},e.prototype.roundFrame=function(t,r,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?Tr.copyFrom(s):Tr.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)},e}(),xi=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),bi=function(){function e(t){this.renderer=t,this.emptyRenderer=new xi(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var i=this.renderer.texture.boundTextures,n=r-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,r,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var f=s[u],l=f._batchLocation;if(l>=0&&l<n&&r[l]===f){a[u]=l;continue}for(;h<n;){var d=r[h];if(d&&d._batchEnabled===i&&d._batchLocation===h){h++;continue}a[u]=h,f._batchLocation=h,r[h]=f;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),yn=0,Ti=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=yn++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=yn++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var i;if(I.PREFER_ENV>=vt.WEBGL2&&(i=t.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),Ls=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=L.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),vl=new O,Ei=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ze(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new O,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;I.PREFER_ENV===vt.WEBGL_LEGACY&&(r=null,i=null),r?t.drawBuffers=function(n){return r.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var h=r.width>>i,u=r.height>>i,f=h/r.width;this.setViewport(r.x*f,r.y*f,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,i,n){var s=this.viewport;t=Math.round(t),r=Math.round(r),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=i,s.height=n,this.gl.viewport(t,r,i,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,i,n,s){s===void 0&&(s=_e.COLOR|_e.DEPTH);var a=this.gl;a.clearColor(t,r,i,n),a.clear(s)},e.prototype.initFramebuffer=function(t){var r=this.gl,i=new Ls(r.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var r=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,t.width,t.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;r.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],f=u.parentTextureArray||u;this.renderer.texture.bind(f,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,f._glTextures[this.CONTEXT_UID].texture,r),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var l=this.writeDepthTexture;if(l){var d=t.depthTexture;this.renderer.texture.bind(d,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,i=L.NONE;if(t<=1||r===null)return i;for(var n=0;n<r.length;n++)if(r[n]<=t){i=r[n];break}return i===1&&(i=L.NONE),i},e.prototype.blit=function(t,r,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new Ze(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}r||(r=vl,r.width=s.width,r.height=s.height),i||(i=r);var f=r.width===i.width&&r.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,f?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),r.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new O},e.prototype.destroy=function(){this.renderer=null},e}(),Er={5126:4,5123:2,5121:1},Ii=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;I.PREFER_ENV===vt.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];r.update(n)}},e.prototype.checkCompatibility=function(t,r){var i=t.attributes,n=r.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(t,r){var i=t.attributes,n=r.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},e.prototype.initGeometryVao=function(t,r,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=r.program;o.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],f=u[h];if(f)return u[o.id]=f,f;var l=t.buffers,d=t.attributes,c={},p={};for(var _ in l)c[_]=0,p[_]=0;for(var _ in d)!d[_].size&&o.attributeData[_]?d[_].size=o.attributeData[_].size:d[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[d[_].buffer]+=d[_].size*Er[d[_].type];for(var _ in d){var v=d[_],y=v.size;v.stride===void 0&&(c[v.buffer]===y*Er[v.type]?v.stride=0:v.stride=c[v.buffer]),v.start===void 0&&(v.start=p[v.buffer],p[v.buffer]+=y*Er[v.type])}f=n.createVertexArray(),n.bindVertexArray(f);for(var m=0;m<l.length;m++){var x=l[m];a.bind(x),i&&x._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=f,u[o.id]=f,u[h]=f,f},e.prototype.disposeGeometry=function(t,r){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(a[h],r))}if(!r){for(var f in n)if(f[0]==="g"){var l=n[f];this._activeVao===l&&this.unbind(),s.deleteVertexArray(l)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],t)},e.prototype.activateVao=function(t,r){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var f=o[u],l=a[f.buffer],d=l._glBuffers[n];if(r.attributeData[u]){h!==d&&(s.bind(l),h=d);var c=r.attributeData[u].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)i.vertexAttribDivisor(c,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,r||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,r||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,r||a.getSize(),n||1):s.drawArrays(t,i,r||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),Bs=function(){function e(t){t===void 0&&(t=null),this.type=W.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=I.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=W.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function gn(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function xn(e,t){var r=e.getShaderSource(t).split(`
`).map(function(u,f){return f+": "+u}),i=e.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){r[u-1]="%c"+r[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=r.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function _l(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||xn(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||xn(e,i),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function Ir(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function Gs(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Ir(2*t);case"bvec3":return Ir(3*t);case"bvec4":return Ir(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ks={},oe=ks;function Ds(){if(oe===ks||oe&&oe.isContextLost()){var e=document.createElement("canvas"),t=void 0;I.PREFER_ENV>=vt.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),oe=t}return oe}var Be;function ml(){if(!Be){Be=ht.MEDIUM;var e=Ds();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Be=t.precision?ht.HIGH:ht.MEDIUM}}return Be}function bn(e,t,r){if(e.substring(0,9)!=="precision"){var i=t;return t===ht.HIGH&&r!==ht.HIGH&&(i=ht.MEDIUM),"precision "+i+` float;
`+e}else if(r!==ht.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var yl={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xs(e){return yl[e]}var Ge=null,Tn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Hs(e,t){if(!Ge){var r=Object.keys(Tn);Ge={};for(var i=0;i<r.length;++i){var n=r[i];Ge[e[n]]=Tn[n]}}return Ge[t]}var jt=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],gl={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},xl={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function bl(e,t){var r=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in e.uniforms){var n=t[i];if(!n){e.uniforms[i].group&&(e.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=e.uniforms[i],a=!1,o=0;o<jt.length;o++)if(jt[o].test(n,s)){r.push(jt[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?gl:xl,u=h[n.type].replace("location",'ud["'+i+'"].location');r.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var Tl=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function El(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function Vs(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var i=Tl.replace(/%forloop%/gi,El(e));if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var he;function Il(){if(typeof he=="boolean")return he;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");he=e({a:"b"},"a","b")===!0}catch{he=!1}return he}var wl=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Rl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Al=0,ke={},cr=function(){function e(t,r,i){i===void 0&&(i="pixi-shader"),this.id=Al++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ke[i]?(ke[i]++,i+="-"+ke[i]):ke[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=bn(this.vertexSrc,I.PRECISION_VERTEX,ht.HIGH),this.fragmentSrc=bn(this.fragmentSrc,I.PRECISION_FRAGMENT,ml())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Rl},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return wl},enumerable:!1,configurable:!0}),e.from=function(t,r,i){var n=t+r,s=Qr[n];return s||(Qr[n]=s=new e(t,r,i)),s},e}(),wi=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Vt?this.uniformGroup=r:this.uniformGroup=new Vt(r):this.uniformGroup=new Vt({})}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var i in r.uniforms){var n=r.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,i){var n=cr.from(t,r);return new e(n,i)},e}(),wr=0,Rr=1,Ar=2,Cr=3,Or=4,Nr=5,dr=function(){function e(){this.data=0,this.blendMode=T.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<wr)},set:function(t){!!(this.data&1<<wr)!==t&&(this.data^=1<<wr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<Rr)},set:function(t){!!(this.data&1<<Rr)!==t&&(this.data^=1<<Rr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<Ar)},set:function(t){!!(this.data&1<<Ar)!==t&&(this.data^=1<<Ar)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<Cr)},set:function(t){!!(this.data&1<<Cr)!==t&&(this.data^=1<<Cr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<Nr)},set:function(t){!!(this.data&1<<Nr)!==t&&(this.data^=1<<Nr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Or)},set:function(t){!!(this.data&1<<Or)!==t&&(this.data^=1<<Or)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==T.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),Cl=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Ol=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,js=function(e){N(t,e);function t(r,i,n){var s=this,a=cr.from(r||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=e.call(this,a,n)||this,s.padding=0,s.resolution=I.FILTER_RESOLUTION,s.multisample=I.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new dr,s}return t.prototype.apply=function(r,i,n,s,a){r.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Cl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Ol},enumerable:!1,configurable:!0}),t}(wi),Nl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Sl=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,En=new Q,zs=function(){function e(t,r){this._texture=t,this.mapCoord=new Q,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];r[n]=s*i.a+a*i.c+i.tx,r[n+1]=s*i.b+a*i.d+i.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=r.orig,s=r.trim;s&&(En.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(En));var a=r.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(r._frame.x+h+u)/a.width,o[1]=(r._frame.y+h+u)/a.height,o[2]=(r._frame.x+r._frame.width-h+u)/a.width,o[3]=(r._frame.y+r._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0},e}(),$s=function(e){N(t,e);function t(r){var i=this,n=new Q;return i=e.call(this,Nl,Sl)||this,r.renderable=!1,i.maskSprite=r,i.maskMatrix=n,i}return t.prototype.apply=function(r,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new zs(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,r.applyFilter(this,i,n,s))},t}(js),Ri=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var i=r;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Bs;n.pooled=!0,n.maskObject=r,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case W.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case W.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case W.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){switch(r.type){case W.SCISSOR:this.renderer.scissor.pop();break;case W.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case W.SPRITE:this.popSpriteMask();break}r.reset(),r.pooled&&this.maskDataPool.push(r)}},e.prototype.detect=function(t){var r=t.maskObject;if(r.isSprite){t.type=W.SPRITE;return}if(t.type=W.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()){var i=r.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=W.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var r,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new $s(n)]);var o=this.renderer,h=o.renderTexture,u,f;if(h.current){var l=h.current;u=t.resolution||l.resolution,f=(r=t.multisample)!==null&&r!==void 0?r:l.multisample}else u=t.resolution||o.resolution,f=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=f,a[0].maskSprite=n;var d=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=d,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e.prototype.destroy=function(){this.renderer=null},e}(),Ys=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),Ai=function(e){N(t,e);function t(r){var i=e.call(this,r)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.push=function(r){var i=r.maskObject;i.renderable=!0;var n=r._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,f=o.height/a.height,l=((r.x-a.x)*u+o.x)*h,d=((r.y-a.y)*f+o.y)*h,c=r.width*u*h,p=r.height*f*h;s&&(l+=s.tx*h,d+=s.ty*h),i||(d=this.renderer.height-p-d),l=Math.round(l),d=Math.round(d),c=Math.round(c),p=Math.round(p),this.renderer.gl.scissor(l,d,c,p)},t}(Ys),Ci=function(e){N(t,e);function t(r){var i=e.call(this,r)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var i=r.maskObject,n=this.renderer.gl,s=r._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),r._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(r){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(Ys),Oi=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Q,this.transform=null}return e.prototype.update=function(t,r,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/r.width*2,s.d=a*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-a-r.y*s.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),Bt=new O,ue=new O,Ni=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new O,this.destinationFrame=new O,this.viewportFrame=new O}return e.prototype.bind=function(t,r,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,r||(Bt.width=t.frame.width,Bt.height=t.frame.height,r=Bt),i||(ue.x=t.frame.x,ue.y=t.frame.y,ue.width=r.width,ue.height=r.height,i=ue),a=s.framebuffer):(o=n.resolution,r||(Bt.width=n.screen.width,Bt.height=n.screen.height,r=Bt),i||(i=Bt,i.width=r.width,i.height=r.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,r,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,f=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,f)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),s&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Pl(e,t,r,i,n){r.buffer.update(n)}var Fl={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Ws={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function qs(e){for(var t=e.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),r=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(r=Ws[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,i%r!==0&&i<16){var o=i%r%16;i+=o,n+=o}i+r>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=r,i=r):(a.offset=n,i+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Zs(e,t){var r=[];for(var i in e)t[i]&&r.push(t[i]);return r.sort(function(n,s){return n.index-s.index}),r}function Ks(e,t){if(!e.autoManage)return{size:0,syncFunc:Pl};for(var r=Zs(e.uniforms,t),i=qs(r),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=e.uniforms[h.data.name],f=h.data.name,l=!1,d=0;d<jt.length;d++){var c=jt[d];if(c.codeUbo&&c.test(h.data,u)){a.push("offset = "+h.offset/4+";",jt[d].codeUbo(h.data.name,u)),l=!0;break}}if(!l)if(h.data.size>1){var p=Xs(h.data.type),_=Math.max(Ws[h.data.type]/16,1),v=p/_,y=(4-v%4)%4;a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+v+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+y+`;
                }

                `)}else{var m=Fl[h.data.type];a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+h.offset/4+`;
                `+m+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Ul=function(){function e(){}return e}(),Js=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function Ml(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(e,n);if(!s.name.startsWith("gl_")){var a=Hs(t,s.type),o={type:a,name:s.name,size:Xs(a),location:n};r[s.name]=o}}return r}function Ll(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(e,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=Hs(t,s.type);r[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:Gs(h,s.size)}}return r}function Qs(e,t){var r=gn(e,e.VERTEX_SHADER,t.vertexSrc),i=gn(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();e.attachShader(n,r),e.attachShader(n,i),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||_l(e,n,r,i),t.attributeData=Ml(n,e),t.uniformData=Ll(n,e);var s=Object.keys(t.attributeData);s.sort(function(f,l){return f>l?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,e.bindAttribLocation(n,a,s[a]);e.linkProgram(n),e.deleteShader(r),e.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:e.getUniformLocation(n,a),value:Gs(h.type,h.size)}}var u=new Js(n,o);return u}var Bl=0,De={textureCount:0,uboCount:0},Si=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Bl++}return e.prototype.systemCheck=function(){if(!Il())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),r||(De.textureCount=0,De.uboCount=0,this.syncUniformGroup(t.uniformGroup,De)),n},e.prototype.setUniforms=function(t){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,r))},e.prototype.syncUniforms=function(t,r,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(r.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=bl(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,r);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,De,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=Ks(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return r.uniformGroups[t.id]=o.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),r[a]&&s.push(r[a].type);return s.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,i=t.program,n=Qs(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function Gl(e,t){return t===void 0&&(t=[]),t[T.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.ADD]=[e.ONE,e.ONE],t[T.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.NONE]=[0,0],t[T.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[T.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[T.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[T.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[T.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[T.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[T.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[T.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[T.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[T.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[T.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var kl=0,Dl=1,Xl=2,Hl=3,Vl=4,jl=5,Pi=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=T.NONE,this._blendEq=!1,this.map=[],this.map[kl]=this.setBlend,this.map[Dl]=this.setOffset,this.map[Xl]=this.setCullFace,this.map[Hl]=this.setDepthTest,this.map[Vl]=this.setFrontFace,this.map[jl]=this.setDepthMask,this.checks=[],this.defaultState=new dr,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=Gl(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,i=0;r;)r&1&&this.map[i].call(this,!!(t.data&1<<i)),r=r>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var i=this.checks.indexOf(t);r&&i===-1?this.checks.push(t):!r&&i!==-1&&this.checks.splice(i,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),Fi=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=I.GC_MAX_IDLE,this.checkCountMax=I.GC_MAX_CHECK_COUNT,this.mode=I.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ye.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,i=!1,n=0;n<r.length;n++){var s=r[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),r[n]=null,i=!0)}if(i){for(var a=0,n=0;n<r.length;n++)r[n]!==null&&(r[a++]=r[n]);r.length=a}},e.prototype.unload=function(t){var r=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e.prototype.destroy=function(){this.renderer=null},e}();function zl(e){var t,r,i,n,s,a,o,h,u,f,l,d,c,p,_,v,y,m,x,R,E,S,V;return"WebGL2RenderingContext"in self&&e instanceof self.WebGL2RenderingContext?V=(t={},t[A.UNSIGNED_BYTE]=(r={},r[g.RGBA]=e.RGBA8,r[g.RGB]=e.RGB8,r[g.RG]=e.RG8,r[g.RED]=e.R8,r[g.RGBA_INTEGER]=e.RGBA8UI,r[g.RGB_INTEGER]=e.RGB8UI,r[g.RG_INTEGER]=e.RG8UI,r[g.RED_INTEGER]=e.R8UI,r[g.ALPHA]=e.ALPHA,r[g.LUMINANCE]=e.LUMINANCE,r[g.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[A.BYTE]=(i={},i[g.RGBA]=e.RGBA8_SNORM,i[g.RGB]=e.RGB8_SNORM,i[g.RG]=e.RG8_SNORM,i[g.RED]=e.R8_SNORM,i[g.RGBA_INTEGER]=e.RGBA8I,i[g.RGB_INTEGER]=e.RGB8I,i[g.RG_INTEGER]=e.RG8I,i[g.RED_INTEGER]=e.R8I,i),t[A.UNSIGNED_SHORT]=(n={},n[g.RGBA_INTEGER]=e.RGBA16UI,n[g.RGB_INTEGER]=e.RGB16UI,n[g.RG_INTEGER]=e.RG16UI,n[g.RED_INTEGER]=e.R16UI,n[g.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,n),t[A.SHORT]=(s={},s[g.RGBA_INTEGER]=e.RGBA16I,s[g.RGB_INTEGER]=e.RGB16I,s[g.RG_INTEGER]=e.RG16I,s[g.RED_INTEGER]=e.R16I,s),t[A.UNSIGNED_INT]=(a={},a[g.RGBA_INTEGER]=e.RGBA32UI,a[g.RGB_INTEGER]=e.RGB32UI,a[g.RG_INTEGER]=e.RG32UI,a[g.RED_INTEGER]=e.R32UI,a[g.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,a),t[A.INT]=(o={},o[g.RGBA_INTEGER]=e.RGBA32I,o[g.RGB_INTEGER]=e.RGB32I,o[g.RG_INTEGER]=e.RG32I,o[g.RED_INTEGER]=e.R32I,o),t[A.FLOAT]=(h={},h[g.RGBA]=e.RGBA32F,h[g.RGB]=e.RGB32F,h[g.RG]=e.RG32F,h[g.RED]=e.R32F,h[g.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,h),t[A.HALF_FLOAT]=(u={},u[g.RGBA]=e.RGBA16F,u[g.RGB]=e.RGB16F,u[g.RG]=e.RG16F,u[g.RED]=e.R16F,u),t[A.UNSIGNED_SHORT_5_6_5]=(f={},f[g.RGB]=e.RGB565,f),t[A.UNSIGNED_SHORT_4_4_4_4]=(l={},l[g.RGBA]=e.RGBA4,l),t[A.UNSIGNED_SHORT_5_5_5_1]=(d={},d[g.RGBA]=e.RGB5_A1,d),t[A.UNSIGNED_INT_2_10_10_10_REV]=(c={},c[g.RGBA]=e.RGB10_A2,c[g.RGBA_INTEGER]=e.RGB10_A2UI,c),t[A.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[g.RGB]=e.R11F_G11F_B10F,p),t[A.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[g.RGB]=e.RGB9_E5,_),t[A.UNSIGNED_INT_24_8]=(v={},v[g.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,v),t[A.FLOAT_32_UNSIGNED_INT_24_8_REV]=(y={},y[g.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,y),t):V=(m={},m[A.UNSIGNED_BYTE]=(x={},x[g.RGBA]=e.RGBA,x[g.RGB]=e.RGB,x[g.ALPHA]=e.ALPHA,x[g.LUMINANCE]=e.LUMINANCE,x[g.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,x),m[A.UNSIGNED_SHORT_5_6_5]=(R={},R[g.RGB]=e.RGB,R),m[A.UNSIGNED_SHORT_4_4_4_4]=(E={},E[g.RGBA]=e.RGBA,E),m[A.UNSIGNED_SHORT_5_5_5_1]=(S={},S[g.RGBA]=e.RGBA,S),m),V}var ze=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=A.UNSIGNED_BYTE,this.internalFormat=g.RGBA,this.samplerType=0}return e}(),Ui=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new H,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=zl(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new ze(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ze(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,i=r.gl,n=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},e.prototype.ensureSamplerType=function(t){var r=this,i=r.boundTextures,n=r.hasIntegerTextures,s=r.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==me.FLOAT&&this.renderer.texture.unbind(o)}}},e.prototype.initTexture=function(t){var r=new ze(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var i,n;r.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===A.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(i,t,r))r.samplerType!==me.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(r.width!==n||r.height!==s||r.dirtyId<0)&&(r.width=n,r.height=s,a.texImage2D(t.target,0,r.internalFormat,n,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var n=this.managedTextures.indexOf(t);n!==-1&&pe(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===St.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=$e.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var i=this.gl;if(r.mipmap&&t.mipmap!==St.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===dt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===dt.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===dt.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===dt.LINEAR?i.LINEAR:i.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),ta={__proto__:null,FilterSystem:gi,BatchSystem:bi,ContextSystem:Ti,FramebufferSystem:Ei,GeometrySystem:Ii,MaskSystem:Ri,ScissorSystem:Ai,StencilSystem:Ci,ProjectionSystem:Oi,RenderTextureSystem:Ni,ShaderSystem:Si,StateSystem:Pi,TextureGCSystem:Fi,TextureSystem:Ui},Sr=new Q,ea=function(e){N(t,e);function t(r,i){r===void 0&&(r=ee.UNKNOWN);var n=e.call(this)||this;return i=Object.assign({},I.RENDER_OPTIONS,i),n.options=i,n.type=r,n.screen=new O(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||I.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(wt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(wt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=sl(i,["region"]);s=a||r.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=fr.create(ii({width:s.width,height:s.height},o));return Sr.tx=-s.x,Sr.ty=-s.y,this.render(r,{renderTexture:h,clear:!1,transform:Sr,skipUpdateTransform:!!r.parent}),h},t.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=ee.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=Rs(r),ws(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(Re),$l=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),Yl=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,i=r.gl,n=r.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},e.prototype.bindBufferBase=function(t,r){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,a.buffer)}},e.prototype.bindBufferRange=function(t,r,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,o.buffer,i*256,256)},e.prototype.update=function(t){var r=this,i=r.gl,n=r.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},e.prototype.dispose=function(t,r){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(r||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],t)},e.prototype.createGLBuffer=function(t){var r=this,i=r.CONTEXT_UID,n=r.gl;return t._glBuffers[i]=new $l(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},e}(),Mi=function(e){N(t,e);function t(r){var i=e.call(this,ee.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new X("destroy"),contextChange:new X("contextChange"),reset:new X("reset"),update:new X("update"),postrender:new X("postrender"),prerender:new X("prerender"),resize:new X("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Vt({projectionMatrix:new Q},!0),i.addSystem(Ri,"mask").addSystem(Ti,"context").addSystem(Pi,"state").addSystem(Si,"shader").addSystem(Ui,"texture").addSystem(Yl,"buffer").addSystem(Ii,"geometry").addSystem(Ei,"framebuffer").addSystem(Ai,"scissor").addSystem(Ci,"stencil").addSystem(Oi,"projection").addSystem(Fi,"textureGC").addSystem(gi,"filter").addSystem(Ni,"renderTexture").addSystem(bi,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Es(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(r){if(Is())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,n)}else{var n=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n)}i>=L.HIGH?this.multisample=L.HIGH:i>=L.MEDIUM?this.multisample=L.MEDIUM:i>=L.LOW?this.multisample=L.LOW:this.multisample=L.NONE},t.prototype.addSystem=function(r,i){var n=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(r,i){var n,s,a,o;if(i&&(i instanceof fr?(wt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=r),!o){var h=r.enableTempParent();r.updateTransform(),r.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={});var a=e.prototype.generateTexture.call(this,r,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(r,i){e.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return wt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,i){t.__plugins=t.__plugins||{},t.__plugins[r]=i},t}(ea);function ra(e){return Mi.create(e)}var Wl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ql=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Zl=Wl,Kl=ql,Jl=function(){function e(t){wt("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return e.prototype.destroy=function(){this.renderer=null},e}(),ia=function(){function e(){this.texArray=null,this.blend=0,this.type=re.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),na=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),sa=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),aa=function(e){N(t,e);function t(r){var i=e.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=dr.for2d(),i.size=I.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var r=this.renderer.gl;I.PREFER_ENV===vt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),I.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Vs(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;r.length<n;)r.push(new ia);for(;i.length<s;)i.push(new na);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,n=r.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++H._globalBatch,f=0,l=s[0],d=0;a.copyBoundTextures(o,n);for(var c=0;c<this._bufferSize;++c){var p=i[c];i[c]=null,p._batchEnabled!==u&&(l.count>=n&&(a.boundArray(l,o,u,n),this.buildDrawCalls(l,d,c),d=c,l=s[++f],++u),p._batchEnabled=u,p.touched=h,l.elements[l.count++]=p)}l.count>0&&(a.boundArray(l,o,u,n),this.buildDrawCalls(l,d,this._bufferSize),++f,++u);for(var c=0;c<o.length;c++)o[c]=null;H._globalBatch=u},t.prototype.buildDrawCalls=function(r,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,f=t._drawCallPool,l=this._dcIndex,d=this._aIndex,c=this._iIndex,p=f[l];p.start=this._iIndex,p.texArray=r;for(var _=i;_<n;++_){var v=a[_],y=v._texture.baseTexture,m=fi[y.alphaMode?1:0][v.blendMode];a[_]=null,i<_&&p.blend!==m&&(p.size=c-p.start,i=_,p=f[++l],p.texArray=r,p.start=c),this.packInterleavedGeometry(v,o,h,d,c),d+=v.vertexData.length/2*u,c+=v.indices.length,p.blend=m}i<n&&(p.size=c-p.start,++l),this._dcIndex=l,this._aIndex=d,this._iIndex=c},t.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,n=0;n<r.count;n++)i.bind(r.elements[n],r.ids[n]),r.elements[n]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,n=r._attributeBuffer,s=r._indexBuffer;I.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<r;h++){var u=a[h],f=u.texArray,l=u.type,d=u.size,c=u.start,p=u.blend;o!==f&&(o=f,this.bindAndClearTexArray(f)),this.state.blendMode=p,s.set(this.state),n.drawElements(l,d,n.UNSIGNED_SHORT,c*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),I.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var i=Te(Math.ceil(r/8)),n=Jr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new sa(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(r){var i=Te(Math.ceil(r/12)),n=Jr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(r,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,f=r.uvs,l=r.indices,d=r.vertexData,c=r._texture.baseTexture._batchLocation,p=Math.min(r.worldAlpha,1),_=p<1&&r._texture.baseTexture.alphaMode?As(r._tintRGB,p):r._tintRGB+(p*255<<24),v=0;v<d.length;v+=2)h[s++]=d[v],h[s++]=d[v+1],h[s++]=f[v],h[s++]=f[v+1],o[s++]=_,h[s++]=c;for(var v=0;v<l.length;v++)n[a++]=u+l[v]},t._drawCallPool=[],t._textureArrayPool=[],t}(xi),oa=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),i=0;i<t;i++)r[i]=i;this.defaultGroupCache[t]=Vt.from({uSamplers:r},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new cr(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Q,default:this.defaultGroupCache[t]};return new wi(this.programCache[t],s)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var i=0;i<t;i++)i>0&&(r+=`
else `),i<t-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),ha=function(e){N(t,e);function t(r){r===void 0&&(r=!1);var i=e.call(this)||this;return i._buffer=new Z(null,r,!1),i._indexBuffer=new Z(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,A.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,A.FLOAT).addAttribute("aColor",i._buffer,4,!0,A.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,A.FLOAT).addIndex(i._indexBuffer),i}return t}(lr),In=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,wn=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,ua=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:In,fragment:wn,geometryClass:ha,vertexSize:6},t),i=r.vertex,n=r.fragment,s=r.vertexSize,a=r.geometryClass;return function(o){N(h,o);function h(u){var f=o.call(this,u)||this;return f.shaderGenerator=new oa(i,n),f.geometryClass=a,f.vertexSize=s,f}return h}(aa)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return In},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return wn},enumerable:!1,configurable:!0}),e}(),fa=ua.create(),la={},Ql=function(e){Object.defineProperty(la,e,{get:function(){return wt("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),Ss[e]}})};for(var Li in Ss)Ql(Li);var ca={},tc=function(e){Object.defineProperty(ca,e,{get:function(){return wt("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),ta[e]}})};for(var Li in ta)tc(Li);/*!
 * @pixi/loaders - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Xe=function(){function e(t,r,i){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function Rn(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Tt=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},e.prototype.has=function(t){if(!(t instanceof Xe))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,r),n=n._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Rn(this,new Xe(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Rn(this,new Xe(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof Xe))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function da(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[t.strictMode?"strict":"loose"].exec(e),n={},s=14;s--;)n[r.key[s]]=i[s]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(a,o,h){o&&(n[r.q.name][o]=h)}),n}var ec=!!(self.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),He=null,rc=0,An=200,ic=204,nc=1223,sc=2;function Cn(){}function On(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function Pr(e){return e.toString().replace("object ","")}var Y=function(){function e(t,r,i){if(this._dequeue=Cn,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Cn,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Tt,this.onProgress=new Tt,this.onComplete=new Tt,this.onAfterMiddleware=new Tt}return e.setExtensionLoadType=function(t,r){On(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){On(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:ec&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof self.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof self.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new self.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,i){i||(i=t+"/"+this._getExtension(r));var n=document.createElement("source");return n.src=r,n.type=i,n},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Pr(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Pr(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Pr(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",i=typeof t.status>"u"?An:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),i===rc&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?i=An:i===nc&&(i=ic);var n=i/100|0;if(n===sc)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(o){this.abort("Error trying to parse loaded json: "+o);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var s=new DOMParser;this.data=s.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=e.TYPE.XML}catch(o){this.abort("Error trying to parse loaded xml: "+o);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(self.origin!==self.location.origin)return"anonymous";r=r||self.location,He||(He=document.createElement("a")),He.href=t;var i=da(He.href,{strictMode:!0}),n=!i.port&&r.port===""||i.port===r.port,s=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!n||s!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var i=t.indexOf("/");r=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),s=t.indexOf("#"),a=Math.min(n>-1?n:t.length,s>-1?s:t.length);t=t.substring(0,a),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Y||(Y={}));function Gt(){}function ac(e){return function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(e===null)throw new Error("Callback was already called.");var s=e;e=null,s.apply(this,i)}}var oc=function(){function e(t,r){this.data=t,this.callback=r}return e}(),Fr=function(){function e(t,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Gt,this.unsaturated=Gt,this.empty=Gt,this.drain=Gt,this.error=Gt,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var o=new oc(n,typeof a=="function"?a:Gt);s?i._tasks.unshift(o):i._tasks.push(o),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,ac(i._next(n)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var i=arguments,n=[],s=0;s<arguments.length;s++)n[s]=i[s];r.workers-=1,t.callback.apply(t,n),n[0]!=null&&r.error(n[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=Gt,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,i,n){var s=0,a=t.length;function o(h){if(h||s===a){i&&i(h);return}n?setTimeout(function(){r(t[s++],o)},1):r(t[s++],o)}o()},e.queue=function(t,r){return new e(t,r)},e}(),Ur=100,hc=/(#[\w-]+)?$/,Rt=function(){function e(t,r){var i=this;t===void 0&&(t=""),r===void 0&&(r=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this.resources={},this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this._queue=Fr.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Tt,this.onError=new Tt,this.onLoad=new Tt,this.onStart=new Tt,this.onComplete=new Tt;for(var n=0;n<e._plugins.length;++n){var s=e._plugins[n],a=s.pre,o=s.use;a&&this.pre(a),o&&this.use(o)}this._protected=!1}return e.prototype._add=function(t,r,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new Y(t,r,i),typeof n=="function"&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var h=s.progressChunk*(a.length+1),u=h/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=u;for(var o=0;o<a.length;++o)a[o].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=Ur/r,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=da(t,{strictMode:!0}),i;if(r.protocol||!r.path||t.indexOf("//")===0?i=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?i=this.baseUrl+"/"+t:i=this.baseUrl+t,this.defaultQueryString){var n=hc.exec(i)[0];i=i.substr(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},e.prototype._loadResource=function(t,r){var i=this;t._dequeue=r,Fr.eachSeries(this._beforeMiddleware,function(n,s){n.call(i,t,function(){s(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=Ur,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Fr.eachSeries(this._afterMiddleware,function(i,n){i.call(r,t,n)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(Ur,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();Rt.prototype.add=function(t,r,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if(typeof t=="object"&&(i=t,n=r||i.callback||i.onComplete,r=i.url,t=i.name||i.key||i.url),typeof r!="string"&&(n=i,i=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(t,r,i,n)};var pa=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Rt.shared:new Rt},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),va=function(){function e(){}return e.add=function(){Y.setExtensionLoadType("svg",Y.LOAD_TYPE.XHR),Y.setExtensionXhrType("svg",Y.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===Y.TYPE.IMAGE||t.extension==="svg")){var i=t.data,n=t.url,s=t.name,a=t.metadata;k.fromLoader(i,n,s,a).then(function(o){t.texture=o,r()}).catch(r)}else r()},e}(),uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function fc(e){for(var t="",r=0;r<e.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<e.length?i[s]=e.charCodeAt(r++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var a=r-(e.length-1);switch(a){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)t+=uc.charAt(n[s])}return t}var Nn=self.URL||self.webkitURL;function lc(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===Y.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+fc(e.xhr.responseText),e.type=Y.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var i=Nn.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=Y.TYPE.IMAGE,e.data.onload=function(){Nn.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}Rt.registerPlugin({use:lc});Rt.registerPlugin(va);/*!
 * @pixi/sprite - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var si=function(e,t){return si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},si(e,t)};function cc(e,t){si(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fe=new pt,dc=new Uint16Array([0,1,2,0,2,3]),_a=function(e){cc(t,e);function t(r){var i=e.call(this)||this;return i._anchor=new Kt(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=T.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||k.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=dc,i.pluginName="batch",i.isSprite=!0,i._roundPixels=I.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ce(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ce(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,f=this.vertexData,l=r.trim,d=r.orig,c=this._anchor,p=0,_=0,v=0,y=0;if(l?(_=l.x-c._x*d.width,p=_+l.width,y=l.y-c._y*d.height,v=y+l.height):(_=-c._x*d.width,p=_+d.width,y=-c._y*d.height,v=y+d.height),f[0]=n*_+a*y+h,f[1]=o*y+s*_+u,f[2]=n*p+a*y+h,f[3]=o*y+s*p+u,f[4]=n*p+a*v+h,f[5]=o*v+s*p+u,f[6]=n*_+a*v+h,f[7]=o*v+s*_+u,this._roundPixels)for(var m=I.RESOLUTION,x=0;x<f.length;++x)f[x]=Math.round((f[x]*m|0)/m)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,n=r.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,f=a.d,l=a.tx,d=a.ty,c=-s._x*n.width,p=c+n.width,_=-s._y*n.height,v=_+n.height;i[0]=o*c+u*_+l,i[1]=f*_+h*c+d,i[2]=o*p+u*_+l,i[3]=f*_+h*p+d,i[4]=o*p+u*v+l,i[5]=f*v+h*p+d,i[6]=o*c+u*v+l,i[7]=f*v+h*c+d},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new O),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,fe);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return fe.x>=s&&fe.x<s+i&&(a=-n*this.anchor.y,fe.y>=a&&fe.y<a+n)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var n=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(r,i){var n=r instanceof k?r:k.from(r,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=ce(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=ce(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||k.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(ne);/*!
 * @pixi/app - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ce=function(){function e(t){var r=this;this.stage=new ne,t=Object.assign({forceCanvas:!1},t),this.renderer=ra(t),e._plugins.forEach(function(i){i.init.call(r,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var i=this,n=e._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),pc=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){self.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var i,n;if(r._resizeTo===self)i=self.innerWidth,n=self.innerHeight;else{var s=r._resizeTo,a=s.clientWidth,o=s.clientHeight;i=a,n=o}r.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Ce.registerPlugin(pc);/*!
 * @pixi/spritesheet - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ma=function(){function e(t,r,i){i===void 0&&(i=null),this._texture=t instanceof k?t:null,this.baseTexture=t instanceof H?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,i=qe(t,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,i=e.BATCH_SIZE;r-t<i&&r<this._frameKeys.length;){var n=this._frameKeys[r],s=this._frames[n],a=s.frame;if(a){var o=null,h=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new O(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new O(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new O(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new O(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new k(this.baseTexture,o,f,h,s.rotated?2:0,s.anchor),k.addToCache(this.textures[n],n)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var i=0;i<t[r].length;i++){var n=t[r][i];this.animations[r].push(this.textures[n])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),ya=function(){function e(){}return e.use=function(t,r){var i,n,s=this,a=t.name+"_image";if(!t.data||t.type!==Y.TYPE.JSON||!t.data.frames||s.resources[a]){r();return}var o=(n=(i=t.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(o))for(var h=function(p){if(typeof p!="string")return"continue";var _=p.replace(".json",""),v=Qt.resolve(t.url.replace(s.baseUrl,""),p);if(s.resources[_]||Object.values(s.resources).some(function(m){return Qt.format(Qt.parse(m.url))===v}))return"continue";var y={crossOrigin:t.crossOrigin,loadType:Y.LOAD_TYPE.XHR,xhrType:Y.XHR_RESPONSE_TYPE.JSON,parentResource:t};s.add(_,v,y)},u=0,f=o;u<f.length;u++){var l=f[u];h(l)}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},c=e.getResourcePath(t,s.baseUrl);s.add(a,c,d,function(_){if(_.error){r(_.error);return}var v=new ma(_.texture,t.data,t.url);v.parse(function(){t.spritesheet=v,t.textures=v.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:Qt.resolve(t.url.replace(r,""),t.data.meta.image)},e}();const vc="6.1.2";Mi.registerPlugin("batch",fa);Ce.registerPlugin(pa);Ce.registerPlugin(ys);Rt.registerPlugin(ya);const D_=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return It},AbstractBatchRenderer:aa,AbstractMultiResource:ar,AbstractRenderer:ea,AppLoaderPlugin:pa,Application:Ce,ArrayResource:ci,Attribute:ni,get BLEND_MODES(){return T},get BUFFER_BITS(){return _e},get BUFFER_TYPE(){return ut},BaseImageResource:_t,BaseRenderTexture:mi,BaseTexture:H,BatchDrawCall:ia,BatchGeometry:ha,BatchPluginFactory:ua,BatchRenderer:fa,BatchShaderGenerator:oa,BatchSystem:bi,BatchTextureArray:na,Bounds:ti,Buffer:Z,BufferResource:Ae,get CLEAR_MODES(){return xt},CanvasResource:or,Circle:ao,Container:ne,ContextSystem:Ti,CubeResource:di,DEG_TO_RAD:vs,get DRAW_MODES(){return re},DisplayObject:Ie,get ENV(){return vt},Ellipse:oo,get FORMATS(){return g},Filter:js,FilterState:Ms,FilterSystem:gi,Framebuffer:Ze,FramebufferSystem:Ei,get GC_MODES(){return Ye},GLFramebuffer:Ls,GLProgram:Js,GLTexture:ze,Geometry:lr,GeometrySystem:Ii,IGLUniformData:Ul,INSTALLED:we,ImageBitmapResource:_i,ImageResource:hr,Loader:Rt,get LoaderResource(){return Y},get MASK_TYPES(){return W},get MIPMAP_MODES(){return St},get MSAA_QUALITY(){return L},MaskData:Bs,MaskSystem:Ri,Matrix:Q,ObjectRenderer:xi,ObservablePoint:Kt,PI_2:ds,get PRECISION(){return ht},Point:pt,Polygon:ho,Program:cr,ProjectionSystem:Oi,Quad:Fs,QuadUv:Us,RAD_TO_DEG:ps,get RENDERER_TYPE(){return ee},Rectangle:O,RenderTexture:fr,RenderTexturePool:Ps,RenderTextureSystem:Ni,Renderer:Mi,Resource:zt,RoundedRectangle:uo,Runner:X,get SAMPLER_TYPES(){return me},get SCALE_MODES(){return dt},get SHAPES(){return Pt},SVGResource:pi,ScissorSystem:Ai,Shader:wi,ShaderSystem:Si,Sprite:_a,SpriteMaskFilter:$s,Spritesheet:ma,SpritesheetLoader:ya,State:dr,StateSystem:Pi,StencilSystem:Ci,System:Jl,get TARGETS(){return Nt},get TYPES(){return A},TemporaryDisplayObject:Ns,Texture:k,TextureGCSystem:Fi,TextureLoader:va,TextureMatrix:zs,TextureSystem:Ui,TextureUvs:yi,Ticker:bt,TickerPlugin:ys,Transform:ms,get UPDATE_PRIORITY(){return ie},UniformGroup:Vt,VERSION:vc,VideoResource:vi,ViewableBuffer:sa,get WRAP_MODES(){return $e},autoDetectRenderer:ra,autoDetectResource:sr,checkMaxIfStatementsInShader:Vs,createUBOElements:qs,defaultFilterVertex:Kl,defaultVertex:Zl,generateProgram:Qs,generateUniformBufferSync:Ks,getTestContext:Ds,getUBOData:Zs,groupD8:P,isMobile:Et,resources:la,settings:I,systems:ca,uniformParsers:jt,utils:il},Symbol.toStringTag,{value:"Module"})),ga=1920,xa=1080,X_={red:"#E03E81",red_a_20:"rgba(224, 62, 129, 0.2)",green:"#72E98A",green_a_40:"rgba(114, 233, 138, 0.4)",blue:"#5FBFF9"};function H_(e){const t="/bundles/sj-overlays/assets/SJ_Eyes.png";return e==null?t:_c[e]??t}const _c={"Splat Zones":"/bundles/sj-overlays/assets/SJ_SZ-Glow.png",Rainmaker:"/bundles/sj-overlays/assets/SJ_RM-Glow.png","Clam Blitz":"/bundles/sj-overlays/assets/SJ_CB-Glow.png","Tower Control":"/bundles/sj-overlays/assets/SJ_TC-Glow.png"};function V_(e){return mc[e]??""}const mc={"Splat Zones":"/bundles/sj-overlays/assets/SJ_SZ.png",Rainmaker:"/bundles/sj-overlays/assets/SJ_RM.png","Clam Blitz":"/bundles/sj-overlays/assets/SJ_CB.png","Tower Control":"/bundles/sj-overlays/assets/SJ_TC.png"};function Sn(e){return Math.sqrt(1-Math.pow(e-1,2))}function ba(e,t,r,i){return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-t,2))}function*yc(e,t,r){const n=r*r,s=r*Math.SQRT1_2,a=Math.ceil(e/s),o=Math.ceil(t/s),h=new Array(a*o),u=[];yield l(e/2,t/2);t:for(;u.length;){const d=Math.random()*u.length|0,c=u[d],p=Math.random(),_=1e-7;for(let y=0;y<4;++y){const m=2*Math.PI*(p+y/4),x=r+_,R=c.x+x*Math.cos(m),E=c.y+x*Math.sin(m);if(0<=R&&R<e&&0<=E&&E<t&&f(R,E)){yield l(R,E);continue t}}const v=u.pop();d<u.length&&(u[d]=v)}function f(d,c){const p=d/s|0,_=c/s|0,v=Math.max(p-2,0),y=Math.max(_-2,0),m=Math.min(p+3,a),x=Math.min(_+3,o);for(let R=y;R<x;++R){const E=R*a;for(let S=v;S<m;++S){const V=h[E+S];if(V){const B=V[0]-d,j=V[1]-c;if(B*B+j*j<n)return!1}}}return!0}function l(d,c){h[a*(c/s|0)+(d/s|0)]=[d,c];const p={x:d,y:c};return u.push(p),p}}var gc=Math.floor,xc=Math.random;function bc(e,t){return e+gc(xc()*(t-e+1))}var Ta=bc,Tc=as,Ec=Va,Ic=os,wc=hs;function Rc(e,t,r){if(!wc(r))return!1;var i=typeof t;return(i=="number"?Ec(r)&&Ic(t,r.length):i=="string"&&t in r)?Tc(r[t],e):!1}var Ac=Rc,Cc=Ja,Pn=1/0,Oc=17976931348623157e292;function Nc(e){if(!e)return e===0?e:0;if(e=Cc(e),e===Pn||e===-Pn){var t=e<0?-1:1;return t*Oc}return e===e?e:0}var Sc=Nc,Pc=Ta,Fc=Ac,Fn=Sc,Uc=parseFloat,Mc=Math.min,Lc=Math.random;function Bc(e,t,r){if(r&&typeof r!="boolean"&&Fc(e,t,r)&&(t=r=void 0),r===void 0&&(typeof t=="boolean"?(r=t,t=void 0):typeof e=="boolean"&&(r=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Fn(e),t===void 0?(t=e,e=0):t=Fn(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var n=Lc();return Mc(e+n*(t-e+Uc("1e-"+((n+"").length-1))),t)}return Pc(e,t)}var Gc=Bc;const ai=se(Gc);var kc=tr;function Dc(e,t,r){for(var i=-1,n=e.length;++i<n;){var s=e[i],a=t(s);if(a!=null&&(o===void 0?a===a&&!kc(a):r(a,o)))var o=a,h=s}return h}var Ea=Dc;function Xc(e,t){return e<t}var Hc=Xc;function Vc(e){return e}var Ia=Vc,jc=Ea,zc=Hc,$c=Ia;function Yc(e){return e&&e.length?jc(e,$c,zc):void 0}var Wc=Yc;const Un=se(Wc);function qc(e,t){return e>t}var Zc=qc,Kc="__lodash_hash_undefined__";function Jc(e){return this.__data__.set(e,Kc),this}var Qc=Jc;function td(e){return this.__data__.has(e)}var ed=td,rd=us,id=Qc,nd=ed;function Ke(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new rd;++t<r;)this.add(e[t])}Ke.prototype.add=Ke.prototype.push=id;Ke.prototype.has=nd;var sd=Ke;function ad(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var od=ad;function hd(e,t){return e.has(t)}var ud=hd,fd=sd,ld=od,cd=ud,dd=1,pd=2;function vd(e,t,r,i,n,s){var a=r&dd,o=e.length,h=t.length;if(o!=h&&!(a&&h>o))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var l=-1,d=!0,c=r&pd?new fd:void 0;for(s.set(e,t),s.set(t,e);++l<o;){var p=e[l],_=t[l];if(i)var v=a?i(_,p,l,t,e,s):i(p,_,l,e,t,s);if(v!==void 0){if(v)continue;d=!1;break}if(c){if(!ld(t,function(y,m){if(!cd(c,m)&&(p===y||n(p,y,r,i,s)))return c.push(m)})){d=!1;break}}else if(!(p===_||n(p,_,r,i,s))){d=!1;break}}return s.delete(e),s.delete(t),d}var wa=vd;function _d(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var md=_d;function yd(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var gd=yd,Mn=fs,Ln=ja,xd=as,bd=wa,Td=md,Ed=gd,Id=1,wd=2,Rd="[object Boolean]",Ad="[object Date]",Cd="[object Error]",Od="[object Map]",Nd="[object Number]",Sd="[object RegExp]",Pd="[object Set]",Fd="[object String]",Ud="[object Symbol]",Md="[object ArrayBuffer]",Ld="[object DataView]",Bn=Mn?Mn.prototype:void 0,Mr=Bn?Bn.valueOf:void 0;function Bd(e,t,r,i,n,s,a){switch(r){case Ld:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Md:return!(e.byteLength!=t.byteLength||!s(new Ln(e),new Ln(t)));case Rd:case Ad:case Nd:return xd(+e,+t);case Cd:return e.name==t.name&&e.message==t.message;case Sd:case Fd:return e==t+"";case Od:var o=Td;case Pd:var h=i&Id;if(o||(o=Ed),e.size!=t.size&&!h)return!1;var u=a.get(e);if(u)return u==t;i|=wd,a.set(e,t);var f=bd(o(e),o(t),i,n,s,a);return a.delete(e),f;case Ud:if(Mr)return Mr.call(e)==Mr.call(t)}return!1}var Gd=Bd,Gn=za,kd=1,Dd=Object.prototype,Xd=Dd.hasOwnProperty;function Hd(e,t,r,i,n,s){var a=r&kd,o=Gn(e),h=o.length,u=Gn(t),f=u.length;if(h!=f&&!a)return!1;for(var l=h;l--;){var d=o[l];if(!(a?d in t:Xd.call(t,d)))return!1}var c=s.get(e),p=s.get(t);if(c&&p)return c==t&&p==e;var _=!0;s.set(e,t),s.set(t,e);for(var v=a;++l<h;){d=o[l];var y=e[d],m=t[d];if(i)var x=a?i(m,y,d,t,e,s):i(y,m,d,e,t,s);if(!(x===void 0?y===m||n(y,m,r,i,s):x)){_=!1;break}v||(v=d=="constructor")}if(_&&!v){var R=e.constructor,E=t.constructor;R!=E&&"constructor"in e&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof E=="function"&&E instanceof E)&&(_=!1)}return s.delete(e),s.delete(t),_}var Vd=Hd,Lr=ls,jd=wa,zd=Gd,$d=Vd,kn=$a,Dn=$t,Xn=Ya,Yd=Wa,Wd=1,Hn="[object Arguments]",Vn="[object Array]",Ve="[object Object]",qd=Object.prototype,jn=qd.hasOwnProperty;function Zd(e,t,r,i,n,s){var a=Dn(e),o=Dn(t),h=a?Vn:kn(e),u=o?Vn:kn(t);h=h==Hn?Ve:h,u=u==Hn?Ve:u;var f=h==Ve,l=u==Ve,d=h==u;if(d&&Xn(e)){if(!Xn(t))return!1;a=!0,f=!1}if(d&&!f)return s||(s=new Lr),a||Yd(e)?jd(e,t,r,i,n,s):zd(e,t,h,r,i,n,s);if(!(r&Wd)){var c=f&&jn.call(e,"__wrapped__"),p=l&&jn.call(t,"__wrapped__");if(c||p){var _=c?e.value():e,v=p?t.value():t;return s||(s=new Lr),n(_,v,r,i,s)}}return d?(s||(s=new Lr),$d(e,t,r,i,n,s)):!1}var Kd=Zd,Jd=Kd,zn=qa;function Ra(e,t,r,i,n){return e===t?!0:e==null||t==null||!zn(e)&&!zn(t)?e!==e&&t!==t:Jd(e,t,r,i,Ra,n)}var Aa=Ra,Qd=ls,tp=Aa,ep=1,rp=2;function ip(e,t,r,i){var n=r.length,s=n,a=!i;if(e==null)return!s;for(e=Object(e);n--;){var o=r[n];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<s;){o=r[n];var h=o[0],u=e[h],f=o[1];if(a&&o[2]){if(u===void 0&&!(h in e))return!1}else{var l=new Qd;if(i)var d=i(u,f,h,e,t,l);if(!(d===void 0?tp(f,u,ep|rp,i,l):d))return!1}}return!0}var np=ip,sp=hs;function ap(e){return e===e&&!sp(e)}var Ca=ap,op=Ca,hp=cs;function up(e){for(var t=hp(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,op(n)]}return t}var fp=up;function lp(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Oa=lp,cp=np,dp=fp,pp=Oa;function vp(e){var t=dp(e);return t.length==1&&t[0][2]?pp(t[0][0],t[0][1]):function(r){return r===e||cp(r,e,t)}}var _p=vp,mp=$t,yp=tr,gp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xp=/^\w*$/;function bp(e,t){if(mp(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||yp(e)?!0:xp.test(e)||!gp.test(e)||t!=null&&e in Object(t)}var Bi=bp,Na=us,Tp="Expected a function";function Gi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Tp);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(Gi.Cache||Na),r}Gi.Cache=Na;var Ep=Gi,Ip=Ep,wp=500;function Rp(e){var t=Ip(e,function(i){return r.size===wp&&r.clear(),i}),r=t.cache;return t}var Ap=Rp,Cp=Ap,Op=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Np=/\\(\\)?/g,Sp=Cp(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Op,function(r,i,n,s){t.push(n?s.replace(Np,"$1"):i||r)}),t}),Pp=Sp;function Fp(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var Sa=Fp,$n=fs,Up=Sa,Mp=$t,Lp=tr,Bp=1/0,Yn=$n?$n.prototype:void 0,Wn=Yn?Yn.toString:void 0;function Pa(e){if(typeof e=="string")return e;if(Mp(e))return Up(e,Pa)+"";if(Lp(e))return Wn?Wn.call(e):"";var t=e+"";return t=="0"&&1/e==-Bp?"-0":t}var Gp=Pa,kp=Gp;function Dp(e){return e==null?"":kp(e)}var Xp=Dp,Hp=$t,Vp=Bi,jp=Pp,zp=Xp;function $p(e,t){return Hp(e)?e:Vp(e,t)?[e]:jp(zp(e))}var Fa=$p,Yp=tr,Wp=1/0;function qp(e){if(typeof e=="string"||Yp(e))return e;var t=e+"";return t=="0"&&1/e==-Wp?"-0":t}var pr=qp,Zp=Fa,Kp=pr;function Jp(e,t){t=Zp(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[Kp(t[r++])];return r&&r==i?e:void 0}var Ua=Jp,Qp=Ua;function tv(e,t,r){var i=e==null?void 0:Qp(e,t);return i===void 0?r:i}var ev=tv;function rv(e,t){return e!=null&&t in Object(e)}var iv=rv,nv=Fa,sv=Za,av=$t,ov=os,hv=Ka,uv=pr;function fv(e,t,r){t=nv(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var a=uv(t[i]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++i!=n?s:(n=e==null?0:e.length,!!n&&hv(n)&&ov(a,n)&&(av(e)||sv(e)))}var lv=fv,cv=iv,dv=lv;function pv(e,t){return e!=null&&dv(e,t,cv)}var vv=pv,_v=Aa,mv=ev,yv=vv,gv=Bi,xv=Ca,bv=Oa,Tv=pr,Ev=1,Iv=2;function wv(e,t){return gv(e)&&xv(t)?bv(Tv(e),t):function(r){var i=mv(r,e);return i===void 0&&i===t?yv(r,e):_v(t,i,Ev|Iv)}}var Rv=wv;function Av(e){return function(t){return t==null?void 0:t[e]}}var Cv=Av,Ov=Ua;function Nv(e){return function(t){return Ov(t,e)}}var Sv=Nv,Pv=Cv,Fv=Sv,Uv=Bi,Mv=pr;function Lv(e){return Uv(e)?Pv(Mv(e)):Fv(e)}var Bv=Lv,Gv=_p,kv=Rv,Dv=Ia,Xv=$t,Hv=Bv;function Vv(e){return typeof e=="function"?e:e==null?Dv:typeof e=="object"?Xv(e)?kv(e[0],e[1]):Gv(e):Hv(e)}var jv=Vv,zv=Ea,$v=Zc,Yv=jv;function Wv(e,t){return e&&e.length?zv(e,Yv(t),$v):void 0}var qv=Wv;const Zv=se(qv);var Kv=Ta;function Jv(e){var t=e.length;return t?e[Kv(0,t-1)]:void 0}var Ma=Jv,Qv=Sa;function t_(e,t){return Qv(t,function(r){return e[r]})}var e_=t_,r_=e_,i_=cs;function n_(e){return e==null?[]:r_(e,i_(e))}var s_=n_,a_=Ma,o_=s_;function h_(e){return a_(o_(e))}var u_=h_,f_=Ma,l_=u_,c_=$t;function d_(e){var t=c_(e)?f_:l_;return t(e)}var p_=d_;const qn=se(p_);function v_(e,t,r){e[t]?e[t].push(r):e[t]=[r]}function __(e){const t=new Ce({width:ga,height:xa,view:e,backgroundColor:4004427});return t.ticker.stop(),Br.ticker.add(r=>{t.ticker.update(r)}),t}const Ct=2115;function m_(){const e=new ne;return e.width=Ct,e.height=Ct,e.pivot.set(Ct/2,Ct/2),e.x=ga/2,e.y=xa/2,e}function y_(e){var s;const t=[14696065,7530890,11366635,6275065,16289103],r=yc(2110,2110,125),i={};let n=r.next().value;for(;n!=null&&(n=r.next().value,!!n);){const a=t.reduce((l,d)=>{var c;return l[d]=((c=i[d])==null?void 0:c.length)??0,l},{}),o=Un(Object.values(a)),h=Object.entries(a).filter(l=>l[1]===o).map(l=>l[0]),u=Number(((s=Zv(Object.entries(h.reduce((l,d)=>{var p;const c=Number(d);return l[c]=Un((p=i[c])==null?void 0:p.map(_=>ba(n.x,n.y,_.x,_.y))),l},{})),l=>l[1]??0))==null?void 0:s[0])??qn(h)),f=new _a(qn(Rt.shared.resources["bg-icons"].spritesheet.textures));f.tint=u,f.scale.set(ai(.3,.5)),f.x=n.x+10,f.y=n.y+25,f.anchor.set(.5),f.alpha=0,f.angle=Math.random()*360,v_(i,u,f),e.addChild(f)}}const g_=to({name:"IconBackground",props:{animateOnEntrance:{type:Boolean,default:!0}},setup(e){const t=eo();return ro(()=>{const r=__(t.value),i=m_();r.stage.addChild(i);const n=Br.to(i,{duration:8,pixi:{angle:360},repeat:-1,ease:"none"}),s=Br.timeline(),a=window.obsstudio?1.75:.25;function o(){s.clear(!0),s.addLabel("out").addLabel("in",`+=${a}`),i.children.forEach(h=>{s.to(h,{pixi:{alpha:0},duration:.15,onComplete:()=>{i.removeChild(h)}},"out")}),y_(i),s.call(()=>n.timeScale(1),null,"in"),s.to(n,{timeScale:8/300,duration:3,ease:"power3.out"},"in"),i.children.forEach(h=>{const f=1/(1101/ba(Ct/2,Ct/2,h.x,h.y)),l=Math.atan2(Ct/2-h.y,Ct/2-h.x),d=h.x+Math.cos(l)*350*Sn(f),c=h.y+Math.sin(l)*350*Sn(f);s.fromTo(h,{pixi:{x:d,y:c,scale:h.scale.y-.5,angle:h.angle+ai(-90,90)}},{duration:1.5,pixi:{x:h.x,y:h.y,scale:h.scale.y,alpha:1,angle:h.angle},ease:"power3.out",delay:f*.9*ai(.9,1.1),immediateRender:!1},"in")})}Rt.shared.add("bg-icons","/bundles/sj-overlays/assets/sj-bg-icons.json").load(()=>{o()}),e.animateOnEntrance&&Qa(h=>{(h.detail.active||h.detail.visible)&&o()})}),{iconBackgroundCanvas:t}}}),x_={ref:"iconBackgroundCanvas",class:"icon-background-canvas"};function b_(e,t,r,i,n,s){return no(),so("canvas",x_,null,512)}const j_=io(g_,[["render",b_]]);/*!
 * PixiPlugin 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ot,Zn,Je,st,ve,La,oi,Ba=function(){return typeof window<"u"},Ga=function(){return Ot||Ba()&&(Ot=window.gsap)&&Ot.registerPlugin&&Ot},Kn=function(t){return typeof t=="function"},T_=function(t){return console.warn(t)},E_=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],et=.212671,rt=.71516,it=.072169,vr=function(t,r){var i=[],n=0,s=0,a,o;for(a=0;a<4;a++){for(o=0;o<5;o++)s=o===4?t[n+4]:0,i[n+o]=t[n]*r[o]+t[n+1]*r[o+5]+t[n+2]*r[o+10]+t[n+3]*r[o+15]+s;n+=5}return i},Jn=function(t,r){var i=1-r,n=i*et,s=i*rt,a=i*it;return vr([n+r,s,a,0,0,n,s+r,a,0,0,n,s,a+r,0,0,0,0,0,1,0],t)},Qn=function(t,r,i){var n=Je(r),s=n[0]/255,a=n[1]/255,o=n[2]/255,h=1-i;return vr([h+i*s*et,i*s*rt,i*s*it,0,0,i*a*et,h+i*a*rt,i*a*it,0,0,i*o*et,i*o*rt,h+i*o*it,0,0,0,0,0,1,0],t)},ts=function(t,r){r*=Math.PI/180;var i=Math.cos(r),n=Math.sin(r);return vr([et+i*(1-et)+n*-et,rt+i*-rt+n*-rt,it+i*-it+n*(1-it),0,0,et+i*-et+n*.143,rt+i*(1-rt)+n*.14,it+i*-it+n*-.283,0,0,et+i*-et+n*-(1-et),rt+i*-rt+n*rt,it+i*(1-it)+n*it,0,0,0,0,0,1,0,0,0,0,0,1],t)},es=function(t,r){return vr([r,0,0,0,.5*(1-r),0,r,0,0,.5*(1-r),0,0,r,0,.5*(1-r),0,0,0,1,0],t)},ka=function(t,r){var i=st.filters[r],n=t.filters||[],s=n.length,a;for(i||T_(r+" not found. PixiPlugin.registerPIXI(PIXI)");--s>-1;)if(n[s]instanceof i)return n[s];return a=new i,r==="BlurFilter"&&(a.blur=0),n.push(a),t.filters=n,a},G=function(t,r,i,n){r.add(i,t,i[t],n[t]),r._props.push(t)},rs=function(t,r){var i=new st.filters.ColorMatrixFilter;return i.matrix=r,i.brightness(t,!0),i.matrix},I_=function(t){var r={},i;for(i in t)r[i]=t[i];return r},J={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},w_=function(t,r,i){var n=ka(t,"ColorMatrixFilter"),s=t._gsColorMatrixFilter=t._gsColorMatrixFilter||I_(J),a=r.combineCMF&&!("colorMatrixFilter"in r&&!r.colorMatrixFilter),o,h,u;for(u=n.matrix,r.resolution&&(n.resolution=r.resolution),r.matrix&&r.matrix.length===u.length?(h=r.matrix,s.contrast!==1&&G("contrast",i,s,J),s.hue&&G("hue",i,s,J),s.brightness!==1&&G("brightness",i,s,J),s.colorizeAmount&&(G("colorize",i,s,J),G("colorizeAmount",i,s,J)),s.saturation!==1&&G("saturation",i,s,J)):(h=E_.slice(),r.contrast!=null?(h=es(h,+r.contrast),G("contrast",i,s,r)):s.contrast!==1&&(a?h=es(h,s.contrast):G("contrast",i,s,J)),r.hue!=null?(h=ts(h,+r.hue),G("hue",i,s,r)):s.hue&&(a?h=ts(h,s.hue):G("hue",i,s,J)),r.brightness!=null?(h=rs(+r.brightness,h),G("brightness",i,s,r)):s.brightness!==1&&(a?h=rs(s.brightness,h):G("brightness",i,s,J)),r.colorize!=null?(r.colorizeAmount="colorizeAmount"in r?+r.colorizeAmount:1,h=Qn(h,r.colorize,r.colorizeAmount),G("colorize",i,s,r),G("colorizeAmount",i,s,r)):s.colorizeAmount&&(a?h=Qn(h,s.colorize,s.colorizeAmount):(G("colorize",i,s,J),G("colorizeAmount",i,s,J))),r.saturation!=null?(h=Jn(h,+r.saturation),G("saturation",i,s,r)):s.saturation!==1&&(a?h=Jn(h,s.saturation):G("saturation",i,s,J))),o=h.length;--o>-1;)h[o]!==u[o]&&i.add(u,o,u[o],h[o],"colorMatrixFilter");i._props.push("colorMatrixFilter")},R_=function(t,r){var i=r.t,n=r.p,s=r.color,a=r.set;a(i,n,s[0]<<16|s[1]<<8|s[2])},A_=function(t,r){var i=r.g;i&&(i.dirty++,i.clearDirty++)},C_=function(t,r){r.t.visible=!!r.t.alpha},is=function(t,r,i,n){var s=t[r],a=Je(Kn(s)?t[r.indexOf("set")||!Kn(t["get"+r.substr(3)])?r:"get"+r.substr(3)]():s),o=Je(i);n._pt=new ve(n._pt,t,r,0,0,R_,{t,p:r,color:a,set:La(t,r)}),n.add(a,0,a[0],o[0]),n.add(a,1,a[1],o[1]),n.add(a,2,a[2],o[2])},O_={tint:1,lineColor:1,fillColor:1},ns="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),hi={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},N_={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},Qe=Math.PI/180,Da=function(t){return typeof t=="string"},S_=function(t){return Da(t)&&t.charAt(1)==="="?t.substr(0,2)+parseFloat(t.substr(2))*Qe:t*Qe},P_=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e5)/1e5,r)},F_=function(t,r,i,n,s,a){var o=360*(a?Qe:1),h=Da(s),u=h&&s.charAt(1)==="="?+(s.charAt(0)+"1"):0,f=parseFloat(u?s.substr(2):s)*(a?Qe:1),l=u?f*u:f-n,d=n+l,c,p;return h&&(c=s.split("_")[1],c==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),c==="cw"&&l<0?l=(l+o*1e10)%o-~~(l/o)*o:c==="ccw"&&l>0&&(l=(l-o*1e10)%o-~~(l/o)*o)),t._pt=p=new ve(t._pt,r,i,n,l,P_),p.e=d,p},ss=function(){Ba()&&(Zn=window,Ot=Ga(),st=st||Zn.PIXI,oi=st&&st.VERSION&&st.VERSION.charAt(0)==="4",Je=function(r){return Ot.utils.splitColor((r+"").substr(0,2)==="0x"?"#"+r.substr(2):r)})},je,le;for(je=0;je<ns.length;je++)le=ns[je],hi[le+"X"]=le,hi[le+"Y"]=le;var U_={version:"3.10.4",name:"pixi",register:function(t,r,i){Ot=t,ve=i,La=r.getSetter,ss()},registerPIXI:function(t){st=t},init:function(t,r,i,n,s){if(st||ss(),!st||!(t instanceof st.DisplayObject))return console.warn(t,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var a,o,h,u,f,l,d,c,p;for(l in r){if(a=hi[l],h=r[l],a)o=~l.charAt(l.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[a],o,t[a][o],a==="skew"?S_(h):h);else if(l==="scale"||l==="anchor"||l==="pivot"||l==="tileScale")this.add(t[l],"x",t[l].x,h),this.add(t[l],"y",t[l].y,h);else if(l==="rotation"||l==="angle")F_(this,t,l,t[l],h,l==="rotation");else if(N_[l])u||(w_(t,r.colorMatrixFilter||r,this),u=!0);else if(l==="blur"||l==="blurX"||l==="blurY"||l==="blurPadding"){if(f=ka(t,"BlurFilter"),this.add(f,l,f[l],h),r.blurPadding!==0)for(d=r.blurPadding||Math.max(f[l],h)*2,c=t.filters.length;--c>-1;)t.filters[c].padding=Math.max(t.filters[c].padding,d)}else if(O_[l])if((l==="lineColor"||l==="fillColor")&&t instanceof st.Graphics)for(p=(t.geometry||t).graphicsData,this._pt=new ve(this._pt,t,l,0,0,A_,{g:t.geometry||t}),c=p.length;--c>-1;)is(oi?p[c]:p[c][l.substr(0,4)+"Style"],oi?l:"color",h,this);else is(t,l,h,this);else l==="autoAlpha"?(this._pt=new ve(this._pt,t,"visible",0,0,C_),this.add(t,"alpha",t.alpha,h),this._props.push("alpha","visible")):l!=="resolution"&&this.add(t,l,"get",h);this._props.push(l)}}};Ga()&&Ot.registerPlugin(U_);export{j_ as I,U_ as P,D_ as a,H_ as b,X_ as c,V_ as g};
