import{g as G,D as ki}from"./DrawSVGPlugin-gbql0MFf.js";import{u as xi,i as Ni}from"./bracketDataStore-D-BlndkY.js";import{S as he,r as Ri,a as Ei,d as Oi,i as Xe,T as Ct,b as Lt,c as zi,e as Ii,f as Ut,g as Mi}from"./obs-C6HihO26.js";import{s as L,c as nt}from"./create-r5o5rUF6.js";import{p as Ye}from"./path-BIbZRaIn.js";import{I as Ci,P as Ze,a as Li}from"./PixiPlugin-BjlzPP-Q.js";import{O as Ai,F as Wi}from"./FittedContent-C1kk2H27.js";import{d as Bi,r as Hi,c as Di,o as ji,w as Pi,a as ue,b as $i,e as At,f as de,g as pe,F as Gi,h as Ui,i as qi,t as Fi,_ as Vi,j as Xi,k as Yi}from"./_plugin-vue_export-helper-Dg3X6I8a.js";import"./storeHelper-Dip-Ut0B.js";import"./toNumber-Brt_E0mo.js";function Zi(e){let t;for(;t=e.sourceEvent;)e=t;return e}function it(e,t){if(e=Zi(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ki(e){return typeof e=="string"?new he([document.querySelectorAll(e)],[document.documentElement]):new he([Ei(e)],Ri)}const qt={capture:!0,passive:!1};function Ft(e){e.preventDefault(),e.stopImmediatePropagation()}function Qi(e){var t=e.document.documentElement,i=L(e).on("dragstart.drag",Ft,qt);"onselectstart"in t?i.on("selectstart.drag",Ft,qt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ji(e,t){var i=e.document.documentElement,r=L(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ft,qt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in i?r.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var tr=1e-12;function me(e){return((e=Math.exp(e))+1/e)/2}function er(e){return((e=Math.exp(e))-1/e)/2}function ir(e){return((e=Math.exp(2*e))-1)/(e+1)}const rr=function e(t,i,r){function n(a,o){var h=a[0],c=a[1],s=a[2],u=o[0],d=o[1],p=o[2],v=u-h,_=d-c,T=v*v+_*_,N,g;if(T<tr)g=Math.log(p/s)/t,N=function(U){return[h+U*v,c+U*_,s*Math.exp(t*U*g)]};else{var E=Math.sqrt(T),B=(p*p-s*s+r*T)/(2*s*i*E),W=(p*p-s*s-r*T)/(2*p*i*E),D=Math.log(Math.sqrt(B*B+1)-B),$=Math.log(Math.sqrt(W*W+1)-W);g=($-D)/t,N=function(U){var b=U*g,O=me(D),S=s/(i*E)*(O*ir(t*b+D)-er(D));return[h+S*v,c+S*_,s*O/me(t*b+D)]}}return N.duration=g*1e3*t/Math.SQRT2,N}return n.rho=function(a){var o=Math.max(.001,+a),h=o*o,c=h*h;return e(o,h,c)},n}(Math.SQRT2,2,4),q=e=>+e;function nr(e){var t=0,i=e.children,r=i&&i.length;if(!r)t=1;else for(;--r>=0;)t+=i[r].value;e.value=t}function ar(){return this.eachAfter(nr)}function sr(e,t){let i=-1;for(const r of this)e.call(t,r,++i,this);return this}function or(e,t){for(var i=this,r=[i],n,a,o=-1;i=r.pop();)if(e.call(t,i,++o,this),n=i.children)for(a=n.length-1;a>=0;--a)r.push(n[a]);return this}function lr(e,t){for(var i=this,r=[i],n=[],a,o,h,c=-1;i=r.pop();)if(n.push(i),a=i.children)for(o=0,h=a.length;o<h;++o)r.push(a[o]);for(;i=n.pop();)e.call(t,i,++c,this);return this}function cr(e,t){let i=-1;for(const r of this)if(e.call(t,r,++i,this))return r}function hr(e){return this.eachAfter(function(t){for(var i=+e(t.data)||0,r=t.children,n=r&&r.length;--n>=0;)i+=r[n].value;t.value=i})}function ur(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function dr(e){for(var t=this,i=pr(t,e),r=[t];t!==i;)t=t.parent,r.push(t);for(var n=r.length;e!==i;)r.splice(n,0,e),e=e.parent;return r}function pr(e,t){if(e===t)return e;var i=e.ancestors(),r=t.ancestors(),n=null;for(e=i.pop(),t=r.pop();e===t;)n=e,e=i.pop(),t=r.pop();return n}function mr(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function fr(){return Array.from(this)}function gr(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function vr(){var e=this,t=[];return e.each(function(i){i!==e&&t.push({source:i.parent,target:i})}),t}function*yr(){var e=this,t,i=[e],r,n,a;do for(t=i.reverse(),i=[];e=t.pop();)if(yield e,r=e.children)for(n=0,a=r.length;n<a;++n)i.push(r[n]);while(i.length)}function ee(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=wr)):t===void 0&&(t=_r);for(var i=new mt(e),r,n=[i],a,o,h,c;r=n.pop();)if((o=t(r.data))&&(c=(o=Array.from(o)).length))for(r.children=o,h=c-1;h>=0;--h)n.push(a=o[h]=new mt(o[h])),a.parent=r,a.depth=r.depth+1;return i.eachBefore(Tr)}function br(){return ee(this).eachBefore(Sr)}function _r(e){return e.children}function wr(e){return Array.isArray(e)?e[1]:null}function Sr(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Tr(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function mt(e){this.data=e,this.depth=this.height=0,this.parent=null}mt.prototype=ee.prototype={constructor:mt,count:ar,each:sr,eachAfter:lr,eachBefore:or,find:cr,sum:hr,sort:ur,path:dr,ancestors:mr,descendants:fr,leaves:gr,links:vr,copy:br,[Symbol.iterator]:yr};function kr(e,t){return e.parent===t.parent?1:2}function Wt(e){var t=e.children;return t?t[0]:e.t}function Bt(e){var t=e.children;return t?t[t.length-1]:e.t}function xr(e,t,i){var r=i/(t.i-e.i);t.c-=r,t.s+=i,e.c+=r,t.z+=i,t.m+=i}function Nr(e){for(var t=0,i=0,r=e.children,n=r.length,a;--n>=0;)a=r[n],a.z+=t,a.m+=t,t+=a.s+(i+=a.c)}function Rr(e,t,i){return e.a.parent===t.parent?e.a:i}function _t(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}_t.prototype=Object.create(mt.prototype);function Er(e){for(var t=new _t(e,0),i,r=[t],n,a,o,h;i=r.pop();)if(a=i._.children)for(i.children=new Array(h=a.length),o=h-1;o>=0;--o)r.push(n=i.children[o]=new _t(a[o],o)),n.parent=i;return(t.parent=new _t(null,0)).children=[t],t}function Or(){var e=kr,t=1,i=1,r=null;function n(s){var u=Er(s);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)s.eachBefore(c);else{var d=s,p=s,v=s;s.eachBefore(function(E){E.x<d.x&&(d=E),E.x>p.x&&(p=E),E.depth>v.depth&&(v=E)});var _=d===p?1:e(d,p)/2,T=_-d.x,N=t/(p.x+_+T),g=i/(v.depth||1);s.eachBefore(function(E){E.x=(E.x+T)*N,E.y=E.depth*g})}return s}function a(s){var u=s.children,d=s.parent.children,p=s.i?d[s.i-1]:null;if(u){Nr(s);var v=(u[0].z+u[u.length-1].z)/2;p?(s.z=p.z+e(s._,p._),s.m=s.z-v):s.z=v}else p&&(s.z=p.z+e(s._,p._));s.parent.A=h(s,p,s.parent.A||d[0])}function o(s){s._.x=s.z+s.parent.m,s.m+=s.parent.m}function h(s,u,d){if(u){for(var p=s,v=s,_=u,T=p.parent.children[0],N=p.m,g=v.m,E=_.m,B=T.m,W;_=Bt(_),p=Wt(p),_&&p;)T=Wt(T),v=Bt(v),v.a=s,W=_.z+E-p.z-N+e(_._,p._),W>0&&(xr(Rr(_,s,d),s,W),N+=W,g+=W),E+=_.m,N+=p.m,B+=T.m,g+=v.m;_&&!Bt(v)&&(v.t=_,v.m+=E-g),p&&!Wt(T)&&(T.t=p,T.m+=N-B,d=s)}return d}function c(s){s.x*=t,s.y=s.depth*i}return n.separation=function(s){return arguments.length?(e=s,n):e},n.size=function(s){return arguments.length?(r=!1,t=+s[0],i=+s[1],n):r?null:[t,i]},n.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],i=+s[1],n):r?[t,i]:null},n}function fe(e){return function(){return e}}var zr=Array.prototype.slice;function Ir(e){return e[0]}function Mr(e){return e[1]}class Cr{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function Lr(e){return new Cr(e,!0)}function Ar(e){return e.source}function Wr(e){return e.target}function Br(e){let t=Ar,i=Wr,r=Ir,n=Mr,a=null,o=null;function h(){let c;const s=zr.call(arguments),u=t.apply(this,s),d=i.apply(this,s);if(a==null&&(o=e(c=Ye())),o.lineStart(),s[0]=u,o.point(+r.apply(this,s),+n.apply(this,s)),s[0]=d,o.point(+r.apply(this,s),+n.apply(this,s)),o.lineEnd(),c)return o=null,c+""||null}return h.source=function(c){return arguments.length?(t=c,h):t},h.target=function(c){return arguments.length?(i=c,h):i},h.x=function(c){return arguments.length?(r=typeof c=="function"?c:fe(+c),h):r},h.y=function(c){return arguments.length?(n=typeof c=="function"?c:fe(+c),h):n},h.context=function(c){return arguments.length?(c==null?a=o=null:o=e(a=c),h):a},h}const vt=e=>()=>e;function Hr(e,{sourceEvent:t,target:i,transform:r,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:n}})}function Ht(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function Dr(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function jr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ge(){return this.__zoom||Xe}function Pr(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function $r(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gr(e,t,i){var r=e.invertX(t[0][0])-i[0][0],n=e.invertX(t[1][0])-i[1][0],a=e.invertY(t[0][1])-i[0][1],o=e.invertY(t[1][1])-i[1][1];return e.translate(n>r?(r+n)/2:Math.min(0,r)||Math.max(0,n),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Ur(){var e=Dr,t=jr,i=Gr,r=Pr,n=$r,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],h=250,c=rr,s=Oi("start","zoom","end"),u,d,p,v=500,_=150,T=0,N=10;function g(l){l.property("__zoom",ge).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",S).filter(n).on("touchstart.zoom",k).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(l,y,m,w){var x=l.selection?l.selection():l;x.property("__zoom",ge),l!==x?D(l,y,m,w):x.interrupt().each(function(){$(this,arguments).event(w).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},g.scaleBy=function(l,y,m,w){g.scaleTo(l,function(){var x=this.__zoom.k,R=typeof y=="function"?y.apply(this,arguments):y;return x*R},m,w)},g.scaleTo=function(l,y,m,w){g.transform(l,function(){var x=t.apply(this,arguments),R=this.__zoom,z=m==null?W(x):typeof m=="function"?m.apply(this,arguments):m,M=R.invert(z),A=typeof y=="function"?y.apply(this,arguments):y;return i(B(E(R,A),z,M),x,o)},m,w)},g.translateBy=function(l,y,m,w){g.transform(l,function(){return i(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof m=="function"?m.apply(this,arguments):m),t.apply(this,arguments),o)},null,w)},g.translateTo=function(l,y,m,w,x){g.transform(l,function(){var R=t.apply(this,arguments),z=this.__zoom,M=w==null?W(R):typeof w=="function"?w.apply(this,arguments):w;return i(Xe.translate(M[0],M[1]).scale(z.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof m=="function"?-m.apply(this,arguments):-m),R,o)},w,x)};function E(l,y){return y=Math.max(a[0],Math.min(a[1],y)),y===l.k?l:new Ct(y,l.x,l.y)}function B(l,y,m){var w=y[0]-m[0]*l.k,x=y[1]-m[1]*l.k;return w===l.x&&x===l.y?l:new Ct(l.k,w,x)}function W(l){return[(+l[0][0]+ +l[1][0])/2,(+l[0][1]+ +l[1][1])/2]}function D(l,y,m,w){l.on("start.zoom",function(){$(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(w).end()}).tween("zoom",function(){var x=this,R=arguments,z=$(x,R).event(w),M=t.apply(x,R),A=m==null?W(M):typeof m=="function"?m.apply(x,R):m,Y=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),H=x.__zoom,V=typeof y=="function"?y.apply(x,R):y,Z=c(H.invert(A).concat(Y/H.k),V.invert(A).concat(Y/V.k));return function(X){if(X===1)X=V;else{var K=Z(X),Mt=Y/K[2];X=new Ct(Mt,A[0]-K[0]*Mt,A[1]-K[1]*Mt)}z.zoom(null,X)}})}function $(l,y,m){return!m&&l.__zooming||new U(l,y)}function U(l,y){this.that=l,this.args=y,this.active=0,this.sourceEvent=null,this.extent=t.apply(l,y),this.taps=0}U.prototype={event:function(l){return l&&(this.sourceEvent=l),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(l,y){return this.mouse&&l!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&l!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&l!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(l){var y=L(this.that).datum();s.call(l,this.that,new Hr(l,{sourceEvent:this.sourceEvent,target:g,type:l,transform:this.that.__zoom,dispatch:s}),y)}};function b(l,...y){if(!e.apply(this,arguments))return;var m=$(this,y).event(l),w=this.__zoom,x=Math.max(a[0],Math.min(a[1],w.k*Math.pow(2,r.apply(this,arguments)))),R=it(l);if(m.wheel)(m.mouse[0][0]!==R[0]||m.mouse[0][1]!==R[1])&&(m.mouse[1]=w.invert(m.mouse[0]=R)),clearTimeout(m.wheel);else{if(w.k===x)return;m.mouse=[R,w.invert(R)],Lt(this),m.start()}dt(l),m.wheel=setTimeout(z,_),m.zoom("mouse",i(B(E(w,x),m.mouse[0],m.mouse[1]),m.extent,o));function z(){m.wheel=null,m.end()}}function O(l,...y){if(p||!e.apply(this,arguments))return;var m=l.currentTarget,w=$(this,y,!0).event(l),x=L(l.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",Y,!0),R=it(l,m),z=l.clientX,M=l.clientY;Qi(l.view),Ht(l),w.mouse=[R,this.__zoom.invert(R)],Lt(this),w.start();function A(H){if(dt(H),!w.moved){var V=H.clientX-z,Z=H.clientY-M;w.moved=V*V+Z*Z>T}w.event(H).zoom("mouse",i(B(w.that.__zoom,w.mouse[0]=it(H,m),w.mouse[1]),w.extent,o))}function Y(H){x.on("mousemove.zoom mouseup.zoom",null),Ji(H.view,w.moved),dt(H),w.event(H).end()}}function S(l,...y){if(e.apply(this,arguments)){var m=this.__zoom,w=it(l.changedTouches?l.changedTouches[0]:l,this),x=m.invert(w),R=m.k*(l.shiftKey?.5:2),z=i(B(E(m,R),w,x),t.apply(this,y),o);dt(l),h>0?L(this).transition().duration(h).call(D,z,w,l):L(this).call(g.transform,z,w,l)}}function k(l,...y){if(e.apply(this,arguments)){var m=l.touches,w=m.length,x=$(this,y,l.changedTouches.length===w).event(l),R,z,M,A;for(Ht(l),z=0;z<w;++z)M=m[z],A=it(M,this),A=[A,this.__zoom.invert(A),M.identifier],x.touch0?!x.touch1&&x.touch0[2]!==A[2]&&(x.touch1=A,x.taps=0):(x.touch0=A,R=!0,x.taps=1+!!u);u&&(u=clearTimeout(u)),R&&(x.taps<2&&(d=A[0],u=setTimeout(function(){u=null},v)),Lt(this),x.start())}}function F(l,...y){if(this.__zooming){var m=$(this,y).event(l),w=l.changedTouches,x=w.length,R,z,M,A;for(dt(l),R=0;R<x;++R)z=w[R],M=it(z,this),m.touch0&&m.touch0[2]===z.identifier?m.touch0[0]=M:m.touch1&&m.touch1[2]===z.identifier&&(m.touch1[0]=M);if(z=m.that.__zoom,m.touch1){var Y=m.touch0[0],H=m.touch0[1],V=m.touch1[0],Z=m.touch1[1],X=(X=V[0]-Y[0])*X+(X=V[1]-Y[1])*X,K=(K=Z[0]-H[0])*K+(K=Z[1]-H[1])*K;z=E(z,Math.sqrt(X/K)),M=[(Y[0]+V[0])/2,(Y[1]+V[1])/2],A=[(H[0]+Z[0])/2,(H[1]+Z[1])/2]}else if(m.touch0)M=m.touch0[0],A=m.touch0[1];else return;m.zoom("touch",i(B(z,M,A),m.extent,o))}}function P(l,...y){if(this.__zooming){var m=$(this,y).event(l),w=l.changedTouches,x=w.length,R,z;for(Ht(l),p&&clearTimeout(p),p=setTimeout(function(){p=null},v),R=0;R<x;++R)z=w[R],m.touch0&&m.touch0[2]===z.identifier?delete m.touch0:m.touch1&&m.touch1[2]===z.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(z=it(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<N)){var M=L(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return g.wheelDelta=function(l){return arguments.length?(r=typeof l=="function"?l:vt(+l),g):r},g.filter=function(l){return arguments.length?(e=typeof l=="function"?l:vt(!!l),g):e},g.touchable=function(l){return arguments.length?(n=typeof l=="function"?l:vt(!!l),g):n},g.extent=function(l){return arguments.length?(t=typeof l=="function"?l:vt([[+l[0][0],+l[0][1]],[+l[1][0],+l[1][1]]]),g):t},g.scaleExtent=function(l){return arguments.length?(a[0]=+l[0],a[1]=+l[1],g):[a[0],a[1]]},g.translateExtent=function(l){return arguments.length?(o[0][0]=+l[0][0],o[1][0]=+l[1][0],o[0][1]=+l[0][1],o[1][1]=+l[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(l){return arguments.length?(i=l,g):i},g.duration=function(l){return arguments.length?(h=+l,g):h},g.interpolate=function(l){return arguments.length?(c=l,g):c},g.on=function(){var l=s.on.apply(s,arguments);return l===s?g:l},g.clickDistance=function(l){return arguments.length?(T=(l=+l)*l,g):Math.sqrt(T)},g.tapDistance=function(l){return arguments.length?(N=+l,g):N},g}var qr=Object.defineProperty,Fr=(e,t,i)=>t in e?qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,f=(e,t,i)=>(Fr(e,typeof t!="symbol"?t+"":t,i),i),I=(e=>(e.DOUBLE_ELIMINATION="DOUBLE_ELIMINATION",e.SINGLE_ELIMINATION="SINGLE_ELIMINATION",e.LADDER="LADDER",e.SWISS="SWISS",e.ROUND_ROBIN="ROUND_ROBIN",e))(I||{}),j=(e=>(e.UNKNOWN="UNKNOWN",e.NOT_STARTED="NOT_STARTED",e.IN_PROGRESS="IN_PROGRESS",e.COMPLETED="COMPLETED",e))(j||{}),at=(e=>(e.ALL_MATCHES="ALL_MATCHES",e.WINNERS="WINNERS",e.LOSERS="LOSERS",e))(at||{}),Q=(e=>(e[e.WINNERS=0]="WINNERS",e[e.LOSERS=1]="LOSERS",e))(Q||{});class Vr{constructor(t,i,r){f(this,"svg"),f(this,"linkGroup"),f(this,"domElementContainer"),f(this,"bracketHeader"),f(this,"bracketTitle"),f(this,"roundLabelContainer"),f(this,"width"),f(this,"height"),f(this,"animator"),f(this,"formatter"),f(this,"hierarchy"),f(this,"onCellCreation"),f(this,"onCellUpdate"),this.height=i,this.width=t,this.animator=r.animator,this.formatter=r.formatter,this.onCellCreation=r.onCellCreation,this.onCellUpdate=r.onCellUpdate,this.svg=nt("svg").classed("elimination-renderer__links",!0).attr("viewBox",[0,0,t,i]).attr("width",t).attr("height",i).style("max-width","100%").style("height","auto"),this.linkGroup=this.svg.append("g").classed("elimination-renderer__link-group",!0).attr("transform-origin","0 0"),this.domElementContainer=nt("div").style("transform-origin","0 0"),this.bracketHeader=this.domElementContainer.append("div").style("position","absolute").classed("bracket-header",!0),this.bracketTitle=this.bracketHeader.append("div").classed("elimination-renderer__bracket-title",!0),this.roundLabelContainer=this.bracketHeader.append("div").classed("elimination-renderer__round-labels",!0),this.hierarchy=null}destroy(){this.svg.remove(),this.domElementContainer.remove()}getElements(){return[this.domElementContainer.node(),this.svg.node()]}setData(t,i){var r;if(this.hierarchy=t,t.length===0)return this.getElements().forEach(b=>b.style.display="none"),{width:0,height:0};this.getElements().forEach(b=>b.style.removeProperty("display")),i.bracketType===I.SINGLE_ELIMINATION&&i.hasThirdPlaceMatch&&t.sort((b,O)=>"isRoot"in b.data&&b.data.isRoot||"isRoot"in O.data&&O.data.isRoot?0:b.data.type===Q.LOSERS?1:O.data.type===Q.LOSERS?-1:0);const n=this.getRoundNames(t,i.isLosersBracket,i.bracketType,i.hasThirdPlaceMatch),a=i.cellOffset??0;this.bracketTitle.text(i.bracketTitle??"").style("visibility",i.bracketTitle==null?"hidden":"visible"),this.roundLabelContainer.style("column-gap",`${i.linkWidth}px`).style("grid-auto-columns",`${i.cellWidth}px`).selectAll("div.round-label").data(n).join("div").classed("round-label",!0).text(b=>b).attr("data-round-index",(b,O)=>O);const o=i.bracketHeaderOffset??8,h=((r=this.bracketHeader.node())==null?void 0:r.offsetHeight)??0;this.bracketHeader.style("transform",`translate(${a*(i.cellWidth+i.linkWidth)}px, ${i.yOffset??0}px)`);const c=Or().separation((b,O)=>i.hasThirdPlaceMatch&&(b.data.type===Q.LOSERS||O.data.type===Q.LOSERS)?2:i.cellSeparation).nodeSize([i.cellHeight,i.cellWidth+i.linkWidth])(t);let s=1/0,u=-s;c.each(b=>{"isRoot"in b.data||(b.x>u&&(u=b.x),b.x<s&&(s=b.x))});const d=c.links().filter(b=>!("isRoot"in b.target.data)&&!("isRoot"in b.source.data)).map(b=>({...b,source:{...b.source,y:b.source.y+i.cellWidth/2},target:{...b.target,y:b.target.y-i.cellWidth/2}})),p=(i.yOffset??0)+h+o,v=i.cellWidth*(t.height+a)+i.linkWidth*(t.height-1+a),_=this.width-v,T=-i.cellWidth/2-i.linkWidth+_,N=s-i.cellHeight/2-p;this.svg.attr("viewBox",[T,N,this.width,this.height]),this.linkGroup.attr("transform-origin",`${T} ${N}`),this.linkGroup.selectAll("path").data(d).join("path").attr("d",Br(i.curveFunction??Lr).y(b=>b.x).x(b=>this.width-b.y)).attr("pathLength",1).attr("data-depth",b=>b.source.depth).classed("bracket-link",!0);const g=(b,O,S)=>{const k=this;return b.append("div").classed("match-cell__team-name",!0).classed(`match-cell__${O}-team-name`,!0).each(function(F){const P=S(F);k.animator.setTeamName(this,"",k.formatter.formatTeamName(P.name),P.isDisqualified,i.bracketType)})},E=(b,O,S,k)=>{const F=this;return b.append("div").classed("match-cell__score-wrapper",!0).append("div").classed("match-cell__score",!0).classed(`match-cell__${O}-score`,!0).each(function(P){const l=S(P);F.animator.setScore(this,0,l.score??NaN,F.formatter.formatScore({team:l,opponentTeam:k(P),bracketType:i.bracketType,matchState:P.data.state}),l.isDisqualified,i.bracketType)})},B=b=>{b.each(function(O){O.data.state!==j.IN_PROGRESS&&O.data.state!==j.COMPLETED?this.classList.remove("top-team-winner","bottom-team-winner","in-progress"):O.data.state===j.IN_PROGRESS?(this.classList.add("in-progress"),this.classList.remove("bottom-team-winner","top-team-winner")):(this.classList.remove("in-progress"),O.data.topTeam.isWinner?this.classList.add("top-team-winner"):this.classList.remove("top-team-winner"),O.data.bottomTeam.isWinner?this.classList.add("bottom-team-winner"):this.classList.remove("bottom-team-winner"))})},W=b=>{const O=i.thirdPlaceMatchLabelHeight;b.each(function(S){U(S)&&L(this).classed("has-third-place-match-label",!0).append("div").classed("match-cell__third-place-match-label",!0).style("height",`${O}px`).text("Third place match")})},D=(b,O,S)=>{const k=this;return b.select(`.match-cell__${O}-team-name`).each(function(F){const P=this.textContent??"",l=S(F),y=k.formatter.formatTeamName(l.name);P!==y&&k.animator.animateTeamNameUpdate(this,P,y,l.isDisqualified,i.bracketType)})},$=(b,O,S,k)=>{const F=this;return b.select(`.match-cell__${O}-score`).each(function(P){const l=this.textContent??"",y=S(P),m=F.formatter.formatScore({team:y,opponentTeam:k(P),bracketType:i.bracketType,matchState:P.data.state});l!==m&&F.animator.animateScoreUpdate(this,parseInt(l),y.score??NaN,m,y.isDisqualified,i.bracketType)})},U=b=>b.data.type===Q.LOSERS&&i.hasThirdPlaceMatch;return this.domElementContainer.selectAll("div.match-cell-wrapper").data(t.descendants().filter(b=>!("isRoot"in b.data)),b=>b.data.id).join(b=>{const O=b.append("div").style("height",S=>U(S)?`${i.cellHeight+i.thirdPlaceMatchLabelHeight}px`:`${i.cellHeight}px`).style("width",`${i.cellWidth}px`).style("left",S=>`${this.width-S.y+i.linkWidth-_}px`).style("top",S=>`${S.x-i.cellHeight/2-s+i.cellHeight/2+p}px`).style("position","absolute").classed("match-cell-wrapper",!0).attr("data-depth",S=>S.depth).call(B);return O.append("div").classed("match-cell",!0).call(W).call(g,"top",S=>{var k;return(k=S.data)==null?void 0:k.topTeam}).call(E,"top",S=>{var k;return(k=S.data)==null?void 0:k.topTeam},S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam}).call(g,"bottom",S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam}).call(E,"bottom",S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam},S=>{var k;return(k=S.data)==null?void 0:k.topTeam}),this.onCellCreation?O.call(this.onCellCreation):O},b=>{const O=b.style("left",S=>`${this.width-S.y+i.linkWidth-_}px`).style("top",S=>`${S.x-i.cellHeight/2-s+i.cellHeight/2+p}px`).style("height",S=>U(S)?`${i.cellHeight+i.thirdPlaceMatchLabelHeight}px`:`${i.cellHeight}px`).style("width",`${i.cellWidth}px`).call(B).call(D,"top",S=>{var k;return(k=S.data)==null?void 0:k.topTeam}).call($,"top",S=>{var k;return(k=S.data)==null?void 0:k.topTeam},S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam}).call(D,"bottom",S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam}).call($,"bottom",S=>{var k;return(k=S.data)==null?void 0:k.bottomTeam},S=>S.data.topTeam);return this.onCellUpdate?O.call(this.onCellUpdate):O}),{width:v,height:this.measureHierarchy(t,i.cellHeight,i.cellSeparation)+h+o}}getRoundNames(t,i,r,n){const a=new Map;t.each(s=>{if("isRoot"in s.data&&s.data.isRoot)return;const u=s.data.roundNumber??s.height;a.set(u,(a.get(u)??0)+1)});const o=[],h=Array.from(a.keys()),c=Math.max(...h);return i?(h.length>=2&&a.get(c)===1&&(o.push("Semi-Finals"),a.get(c-1)===1&&o.push("Finals")),(a.get(c-o.length)??NaN)<=2&&(a.get(c-o.length-1)??0)<=2&&o.unshift("Quarter-Finals")):(h.length>=3&&a.get(c)===1&&a.get(c-1)===1&&a.get(c-2)===1?o.push("Finals","Grand Finals","Bracket Reset"):h.length>=2&&a.get(c)===1&&a.get(c-1)===1?o.push("Finals","Grand Finals"):h.length>=1&&a.get(c)===(r===I.SINGLE_ELIMINATION&&n?2:1)&&o.push("Finals"),(a.get(c-o.length)??NaN)<=2&&o.unshift("Semi-Finals"),(a.get(c-o.length)??NaN)<=4&&o.unshift("Quarter-Finals")),o.length!==h.length&&(h.sort((s,u)=>s-u),o.unshift(...h.slice(0,h.length-o.length).map(s=>`Round ${s}`))),o}measureHierarchy(t,i,r){const n={};return t.each(a=>{n[a.depth]==null?n[a.depth]=1:n[a.depth]++}),(Math.max(...Object.values(n))-1)*(i*r)+i}}class xt{}f(xt,"compatibleBracketTypes");class wt{constructor(t,i,r=2){f(this,"zoomBehavior"),f(this,"resizeObserver"),f(this,"container"),f(this,"containerWidth"),f(this,"containerHeight"),f(this,"contentWidth"),f(this,"contentHeight"),f(this,"maxScale"),this.zoomBehavior=Ur().extent([[0,0],[2048,2048]]).on("zoom",n=>i(n)),this.maxScale=r,this.container=t,this.resizeObserver=new ResizeObserver(n=>{if(n.length<1){console.error(`Received resize event with ${n.length} entries; cannot continue`);return}else n.length>1&&console.warn(`Received resize event with ${n.length} entries; expected 1`);const a=n[0];this.containerHeight=a.contentBoxSize[0].blockSize,this.containerWidth=a.contentBoxSize[0].inlineSize,this.calculateZoom()}),this.resizeObserver.observe(t.node())}recalculateContainerSize(){const t=this.container.node().getBoundingClientRect();this.containerWidth=t.width,this.containerHeight=t.height,this.calculateZoom()}setContentSize(t,i){this.contentWidth=t,this.contentHeight=i,this.calculateZoom()}calculateZoom(){this.containerHeight==null||this.containerWidth==null||this.contentHeight==null||this.contentWidth==null||(this.zoomBehavior.extent([[0,0],[this.containerWidth,this.containerHeight]]),this.zoomBehavior.translateTo(this.container,this.contentWidth/2,this.contentHeight/2),this.zoomBehavior.scaleTo(this.container,Math.min(this.containerHeight/this.contentHeight,this.containerWidth/this.contentWidth,this.maxScale)))}disconnect(){this.resizeObserver.disconnect()}static toCSSTransform(t){return`translate(${t.transform.x}px, ${t.transform.y}px) scale(${t.transform.k})`}}const tt=2048;class Vt extends xt{constructor(t){super(),f(this,"topRenderer"),f(this,"bottomRenderer"),f(this,"animator"),f(this,"formatter"),f(this,"element"),f(this,"svg"),f(this,"matchCellWrapper"),f(this,"linkWrapper"),f(this,"linkWidth"),f(this,"cellHeight"),f(this,"minCellWidth"),f(this,"maxCellWidth"),f(this,"onCellCreation"),f(this,"onCellUpdate"),f(this,"thirdPlaceMatchLabelHeight"),f(this,"curveFunction"),f(this,"activeBracketId"),f(this,"activeMatchType"),f(this,"renderedBracketWidth"),f(this,"renderedBracketHeight"),f(this,"zoomer"),this.animator=t.animator,this.formatter=t.formatter,this.linkWidth=t.linkWidth??50,this.cellHeight=t.cellHeight??65,this.minCellWidth=t.minCellWidth??175,this.maxCellWidth=t.maxCellWidth??250,this.onCellCreation=t.onCellCreation,this.onCellUpdate=t.onCellUpdate,this.activeBracketId=null,this.renderedBracketWidth=1,this.renderedBracketHeight=1,this.thirdPlaceMatchLabelHeight=t.thirdPlaceMatchLabelHeight??20,this.curveFunction=t.curveFunction,this.element=nt("div").classed("elimination-renderer",!0).style("position","relative").style("overflow","hidden"),this.matchCellWrapper=this.element.append("div").style("transform-origin","0 0"),this.svg=this.element.append("svg").attr("viewBox",[0,0,tt,tt]).attr("width",tt).attr("height",tt),this.linkWrapper=this.svg.append("g").attr("transform-origin","0 0").attr("fill","none").attr("stroke","#555").attr("stroke-width",1.5),this.topRenderer=this.createSingleElimRenderer(),this.bottomRenderer=null,this.zoomer=new wt(this.element,this.onZoom.bind(this),t.maxScale??1.5)}async hide(t={}){if(this.activeBracketId!=null){const i=this.getElement();this.animator.eliminationAnimator.beforeHide(i,this),await this.animator.eliminationAnimator.hide(i,{renderer:this,...t}),i.style.visibility="hidden"}}beforeReveal(){const t=this.getElement();this.animator.eliminationAnimator.beforeReveal(t,this),t.style.visibility="visible"}async reveal(t={}){await this.animator.eliminationAnimator.reveal(this.getElement(),{renderer:this,...t})}install(t){t.appendChild(this.getElement()),this.zoomer.recalculateContainerSize()}destroy(){this.zoomer.disconnect(),this.element.remove()}async setData(t){if(t.matchGroups.length!==1)throw new Error(`Rendering elimination groups requires only one bracket group to be present! (Found ${t.matchGroups.length})`);const i=t.matchGroups[0],r=i.id!==this.activeBracketId||this.activeMatchType!==i.containedMatchType;r&&await this.hide(),this.activeBracketId=i.id,this.activeMatchType=i.containedMatchType;const n=t.type;if((t.type===I.SINGLE_ELIMINATION||t.type===I.DOUBLE_ELIMINATION&&i.containedMatchType!==at.ALL_MATCHES)&&this.bottomRenderer!=null?(this.bottomRenderer.destroy(),this.bottomRenderer=null):t.type===I.DOUBLE_ELIMINATION&&i.containedMatchType!==at.WINNERS&&this.bottomRenderer==null&&(this.bottomRenderer=this.createSingleElimRenderer()),t.type===I.SINGLE_ELIMINATION||i.containedMatchType!==at.ALL_MATCHES){const a=this.buildMatchHierarchy(i.matches),o=this.getCellSeparation(a.height),h=this.topRenderer.setData(a,{cellWidth:this.getCellWidth(a),cellSeparation:o,linkWidth:this.linkWidth,cellHeight:this.cellHeight,hasThirdPlaceMatch:t.type===I.SINGLE_ELIMINATION&&i.matches.some(c=>c.type===Q.LOSERS),bracketType:n,bracketTitle:t.type===I.DOUBLE_ELIMINATION?i.containedMatchType===at.WINNERS?"Winners Bracket":"Losers Bracket":void 0,thirdPlaceMatchLabelHeight:this.thirdPlaceMatchLabelHeight,isLosersBracket:t.type===I.DOUBLE_ELIMINATION&&i.containedMatchType===at.LOSERS,curveFunction:this.curveFunction});this.renderedBracketHeight=h.height,this.renderedBracketWidth=h.width}else{const a=this.buildMatchHierarchy(i.matches.filter(p=>p.type===Q.WINNERS)),o=this.buildMatchHierarchy(i.matches.filter(p=>p.type===Q.LOSERS)),h=Math.min(this.getCellWidth(a),this.getCellWidth(o,!0)),c=this.getCellSeparation(a.height),s=this.getCellSeparation(o.height),u=this.topRenderer.setData(a,{cellWidth:h,cellSeparation:c,linkWidth:this.linkWidth,cellHeight:this.cellHeight,hasThirdPlaceMatch:!1,bracketTitle:"Winners Bracket",bracketType:n,thirdPlaceMatchLabelHeight:this.thirdPlaceMatchLabelHeight,isLosersBracket:!1,curveFunction:this.curveFunction}),d=this.bottomRenderer.setData(o,{cellWidth:h,cellSeparation:s,linkWidth:this.linkWidth,cellHeight:this.cellHeight,cellOffset:1,yOffset:u.height+this.cellHeight/2,hasThirdPlaceMatch:!1,bracketTitle:"Losers Bracket",bracketType:n,thirdPlaceMatchLabelHeight:this.thirdPlaceMatchLabelHeight,isLosersBracket:!0,curveFunction:this.curveFunction});this.renderedBracketHeight=u.height+this.cellHeight/2+d.height,this.renderedBracketWidth=Math.max(u.width,d.width)}this.zoomer.setContentSize(this.renderedBracketWidth,this.renderedBracketHeight),r&&(this.beforeReveal(),await this.reveal())}getElement(){return this.element.node()}getBracketDepth(){var t,i,r;return Math.max(((t=this.topRenderer.hierarchy)==null?void 0:t.height)??0,((r=(i=this.bottomRenderer)==null?void 0:i.hierarchy)==null?void 0:r.height)??0)}createSingleElimRenderer(){const t=new Vr(tt,tt,{animator:this.animator,formatter:this.formatter,onCellCreation:this.onCellCreation,onCellUpdate:this.onCellUpdate}),i=t.getElements();return this.matchCellWrapper.append(()=>i[0]),this.linkWrapper.append(()=>i[1]),t}buildMatchHierarchy(t){const i=Math.max(...t.map(r=>r.roundNumber??0));return ee({isRoot:!0},r=>"isRoot"in r&&r.isRoot?t.filter(n=>n.roundNumber===i):t.filter(n=>r.id===n.nextMatchId))}getCellWidth(t,i=!1){const r=i?(tt-this.linkWidth*t.height)/(t.height+1):(tt-this.linkWidth*(t.height-1))/t.height;return Math.max(Math.min(r,this.maxCellWidth),this.minCellWidth)}onZoom(t){this.linkWrapper.selectAll(".elimination-renderer__link-group").attr("transform",t.transform.toString()),this.matchCellWrapper.style("transform",wt.toCSSTransform(t))}getCellSeparation(t){switch(t){case 2:return 3;case 3:return 2;case 4:return 1.25;default:return 1.1}}}f(Vt,"compatibleBracketTypes",[I.DOUBLE_ELIMINATION,I.SINGLE_ELIMINATION]);const ve=35,Dt="scroll-masked";class Xr{constructor(t){f(this,"target"),f(this,"listenerFunction"),this.target=t,this.listenerFunction=()=>this.refreshMask()}start(){this.refreshMask(),this.target.classList.contains(Dt)||(this.target.classList.add(Dt),this.target.addEventListener("scroll",this.listenerFunction))}stop(){this.target.removeEventListener("scroll",this.listenerFunction),this.target.classList.remove(Dt,"scroll-mask-top","scroll-mask-bottom")}refreshMask(){this.toggleMask("top",this.target.scrollTop>ve),this.toggleMask("bottom",Math.abs(this.target.scrollHeight-this.target.clientHeight-this.target.scrollTop)>=ve)}toggleMask(t,i){i?this.target.classList.add(`scroll-mask-${t}`):this.target.classList.remove(`scroll-mask-${t}`)}}class Yr{constructor(t,i,r,n){f(this,"target"),f(this,"targetSelection"),f(this,"rowGap"),f(this,"rowHeight"),f(this,"rowsPerScreen"),f(this,"direction"),f(this,"scrollTopTo"),f(this,"scrollMask"),f(this,"started"),f(this,"targetHeight"),this.target=t,this.targetSelection=L(t),this.rowHeight=i,this.rowGap=r,this.direction="up",this.target.scrollTop=0,this.scrollTopTo=0,this.started=!1,this.scrollMask=n?new Xr(t):null,this.initScrollMask(),this.targetHeight=0}setHeights(t,i){this.resetPosition(),this.targetHeight=t,this.rowsPerScreen=i,this.start()}initScrollMask(){var t;this.targetIsScrollable()&&((t=this.scrollMask)==null||t.start())}start(){var t;if(!this.started){if(!this.targetIsScrollable()){(t=this.scrollMask)==null||t.stop();return}this.initScrollMask(),this.started=!0,this.scroll()}}scroll(){this.scrollingFinished()&&(this.direction=this.direction==="down"?"up":"down");const t=this.scrollTopTo,i=this.getNextScrollTop();this.scrollTopTo=i,this.targetSelection.transition("scroll").duration(750).delay(5e3).on("end",()=>{this.scroll()}).tween("scroll",()=>{const r=zi(t,i);return function(n){this.scrollTop=r(n)}})}resetPosition(){this.targetSelection.interrupt("scroll"),this.target.scrollTop=0,this.scrollTopTo=0,this.direction="up",this.started=!1}stop(){var t;this.resetPosition(),(t=this.scrollMask)==null||t.stop()}targetIsScrollable(){return this.rowsPerScreen!=null&&this.target.scrollHeight>this.targetHeight}getNextScrollTop(){if(this.direction==="up")return 0;if(this.rowsPerScreen==null)throw new Error("Tried starting an autoscroller without telling it the target element's height first");return Math.min(this.scrollTopTo+(this.rowHeight+this.rowGap)*(this.rowsPerScreen-1),this.maxScrollTop())}scrollingFinished(){return this.direction==="up"&&this.target.scrollTop<=0||this.direction==="down"&&Math.abs(this.target.scrollHeight-this.targetHeight-this.target.scrollTop)<1}maxScrollTop(){return this.target.scrollHeight-this.targetHeight}}class Xt extends xt{constructor(t){super(),f(this,"wrapper"),f(this,"element"),f(this,"rowHeight"),f(this,"rowGap"),f(this,"formatter"),f(this,"scroller"),f(this,"animator"),f(this,"activeBracketId"),f(this,"activeRoundNumber"),f(this,"resizeObserver"),this.formatter=t.formatter,this.animator=t.animator,this.activeBracketId=null,this.rowHeight=t.rowHeight??50,this.rowGap=t.rowGap??5,this.wrapper=nt("div").classed("swiss-renderer__wrapper",!0),this.element=this.wrapper.append("div").classed("swiss-renderer",!0).style("grid-auto-rows",`${this.rowHeight}px`).style("row-gap",`${this.rowGap}px`),this.resizeObserver=new ResizeObserver(i=>{for(const r of i)r.contentBoxSize&&this.handleHeightChange(r.contentBoxSize[0].blockSize)}),this.resizeObserver.observe(this.wrapper.node()),this.scroller=new Yr(this.element.node(),this.rowHeight,this.rowGap,t.useScrollMask??!1)}handleHeightChange(t){const i=Math.floor((t+this.rowGap)/(this.rowHeight+this.rowGap)),r=i*(this.rowHeight+this.rowGap)-this.rowGap;this.element.style("max-height",`${r}px`),this.scroller.setHeights(r,i)}install(t){const i=this.getElement();t.appendChild(i),this.handleHeightChange(i.getBoundingClientRect().height)}destroy(){this.wrapper.remove(),this.resizeObserver.disconnect()}getElement(){return this.wrapper.node()}async hide(t={}){if(this.activeBracketId!=null){const i=this.getElement();this.animator.swissAnimator.beforeHide(i,this),await this.animator.swissAnimator.hide(i,{renderer:this,...t}),this.scroller.stop(),i.style.visibility="hidden"}}beforeReveal(){const t=this.getElement();this.scroller.initScrollMask(),this.animator.swissAnimator.beforeReveal(t,this),t.style.visibility="visible"}async reveal(t={}){await this.animator.swissAnimator.reveal(this.getElement(),{renderer:this,...t})}async setData(t){if(t.matchGroups.length!==1)throw new Error(`Rendering swiss groups requires only one bracket group to be present! (Found ${t.matchGroups.length})`);const i=t.matchGroups[0],r=i.id!==this.activeBracketId||t.roundNumber!==this.activeRoundNumber;r&&await this.hide(),this.activeBracketId=i.id,this.activeRoundNumber=t.roundNumber;const n=s=>{s.each(function(u){u.state!==j.IN_PROGRESS&&u.state!==j.COMPLETED?this.classList.remove("top-team-winner","bottom-team-winner","in-progress"):u.state===j.IN_PROGRESS?(this.classList.add("in-progress"),this.classList.remove("bottom-team-winner","top-team-winner")):(this.classList.remove("in-progress"),u.topTeam.isWinner?this.classList.add("top-team-winner"):this.classList.remove("top-team-winner"),u.bottomTeam.isWinner?this.classList.add("bottom-team-winner"):this.classList.remove("bottom-team-winner"))})},a=(s,u,d)=>{const p=this;return s.append("div").classed("match-row__team-name",!0).classed(`match-row__${u}-team-name`,!0).each(function(v){const _=d(v);p.animator.setTeamName(this,"",p.formatter.formatTeamName(_.name),_.isDisqualified,I.SWISS)})},o=(s,u,d,p)=>{const v=this;return s.append("div").classed("match-row__score-wrapper",!0).append("div").classed("match-row__score",!0).classed(`match-row__${u}-score`,!0).each(function(_){const T=d(_);v.animator.setScore(this,0,T.score??NaN,v.formatter.formatScore({team:T,opponentTeam:p(_),bracketType:I.SWISS,matchState:_.state}),T.isDisqualified,I.SWISS)})},h=(s,u,d)=>{const p=this;return s.select(`.match-row__${u}-team-name`).each(function(v){const _=this.textContent??"",T=d(v),N=p.formatter.formatTeamName(T.name);_!==N&&p.animator.animateTeamNameUpdate(this,_,N,T.isDisqualified,I.SWISS)})},c=(s,u,d,p)=>{const v=this;return s.select(`.match-row__${u}-score`).each(function(_){const T=this.textContent??"",N=d(_),g=v.formatter.formatScore({team:N,opponentTeam:p(_),bracketType:I.SWISS,matchState:_.state});T!==g&&v.animator.animateScoreUpdate(this,parseInt(T),N.score??NaN,g,N.isDisqualified,I.SWISS)})};this.element.selectAll("div.match-row-wrapper").data(i.matches,s=>s.id).join(s=>s.append("div").classed("match-row-wrapper",!0).call(n).append("div").classed("match-row",!0).call(a,"top",u=>u.topTeam).call(u=>{u.append("div").classed("match-row__scores",!0).call(o,"top",d=>d.topTeam,d=>d.bottomTeam).call(o,"bottom",d=>d.bottomTeam,d=>d.topTeam)}).call(a,"bottom",u=>u.bottomTeam),s=>s.call(n).call(h,"top",u=>u.topTeam).call(c,"top",u=>u.topTeam,u=>u.bottomTeam).call(h,"bottom",u=>u.bottomTeam).call(c,"bottom",u=>u.bottomTeam,u=>u.topTeam)),r&&(this.beforeReveal(),await this.reveal()),this.scroller.start()}}f(Xt,"compatibleBracketTypes",[I.SWISS]);class Zr{beforeHide(){}hide(){return Promise.resolve()}beforeReveal(){}async reveal(){return Promise.resolve()}}class Kr{beforeHide(){}beforeReveal(){}hide(){return Promise.resolve()}reveal(){return Promise.resolve()}}const ye="is-disqualified";class Ke{constructor(t,i,r){f(this,"eliminationAnimator"),f(this,"swissAnimator"),f(this,"roundRobinAnimator"),this.eliminationAnimator=t,this.swissAnimator=i,this.roundRobinAnimator=r}setDisqualifiedClass(t,i){i?t.classList.add(ye):t.classList.remove(ye)}}class Qr{beforeHide(){}beforeReveal(){}hide(){return Promise.resolve()}reveal(){return Promise.resolve()}}class Jr extends Ke{constructor(){super(new Zr,new Kr,new Qr)}setScore(t,i,r,n,a){t.innerText=n,this.setDisqualifiedClass(t,a)}animateScoreUpdate(t,i,r,n,a){t.innerText=n,this.setDisqualifiedClass(t,a)}setTeamName(t,i,r,n){t.innerText=r,this.setDisqualifiedClass(t,n)}animateTeamNameUpdate(t,i,r,n){t.innerText=r,this.setDisqualifiedClass(t,n)}}class tn{formatScore(t){var i;return(i=t.team)!=null&&i.isDisqualified?"DQ":t.team==null||t.team.id==null||t.opponentTeam==null||t.opponentTeam.id==null?t.bracketType===I.ROUND_ROBIN?"?":"-":t.team.score==null?t.matchState===j.COMPLETED?t.team.isWinner?"W":"L":t.matchState===j.IN_PROGRESS||t.matchState===j.NOT_STARTED?"0":t.bracketType===I.ROUND_ROBIN?"?":"-":String(t.team.score)}formatTeamName(t){return t??"-"}}class Qe{constructor(){f(this,"element"),f(this,"textElement"),this.element=nt("div").classed("dummy-renderer",!0),this.textElement=document.createElement("div"),this.element.append(()=>this.textElement)}async setData(t){return this.element.transition("fade-out").duration(350).ease(q).style("opacity","0").on("end",()=>{this.textElement.innerText=`Dummy renderer for bracket type ${t.type}`}).transition().duration(350).ease(q).style("opacity","1").end()}hide(){return this.element.transition("fade-out").duration(350).ease(q).style("opacity","0").end()}beforeReveal(){this.element.style("opacity","0")}reveal(){return this.element.transition("fade-in").duration(350).ease(q).style("opacity","1").end()}install(t){t.appendChild(this.getElement())}destroy(){this.element.remove()}getElement(){return this.element.node()}}f(Qe,"compatibleBracketTypes",[]);var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function en(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rn(){this.__data__=[],this.size=0}var nn=rn;function an(e,t){return e===t||e!==e&&t!==t}var Je=an,sn=Je;function on(e,t){for(var i=e.length;i--;)if(sn(e[i][0],t))return i;return-1}var Nt=on,ln=Nt,cn=Array.prototype,hn=cn.splice;function un(e){var t=this.__data__,i=ln(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():hn.call(t,i,1),--this.size,!0}var dn=un,pn=Nt;function mn(e){var t=this.__data__,i=pn(t,e);return i<0?void 0:t[i][1]}var fn=mn,gn=Nt;function vn(e){return gn(this.__data__,e)>-1}var yn=vn,bn=Nt;function _n(e,t){var i=this.__data__,r=bn(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var wn=_n,Sn=nn,Tn=dn,kn=fn,xn=yn,Nn=wn;function st(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}st.prototype.clear=Sn;st.prototype.delete=Tn;st.prototype.get=kn;st.prototype.has=xn;st.prototype.set=Nn;var Rt=st,Rn=Rt;function En(){this.__data__=new Rn,this.size=0}var On=En;function zn(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var In=zn;function Mn(e){return this.__data__.get(e)}var Cn=Mn;function Ln(e){return this.__data__.has(e)}var An=Ln,Wn=typeof yt=="object"&&yt&&yt.Object===Object&&yt,ti=Wn,Bn=ti,Hn=typeof self=="object"&&self&&self.Object===Object&&self,Dn=Bn||Hn||Function("return this")(),J=Dn,jn=J,Pn=jn.Symbol,Et=Pn,be=Et,ei=Object.prototype,$n=ei.hasOwnProperty,Gn=ei.toString,pt=be?be.toStringTag:void 0;function Un(e){var t=$n.call(e,pt),i=e[pt];try{e[pt]=void 0;var r=!0}catch{}var n=Gn.call(e);return r&&(t?e[pt]=i:delete e[pt]),n}var qn=Un,Fn=Object.prototype,Vn=Fn.toString;function Xn(e){return Vn.call(e)}var Yn=Xn,_e=Et,Zn=qn,Kn=Yn,Qn="[object Null]",Jn="[object Undefined]",we=_e?_e.toStringTag:void 0;function ta(e){return e==null?e===void 0?Jn:Qn:we&&we in Object(e)?Zn(e):Kn(e)}var ft=ta;function ea(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ie=ea,ia=ft,ra=ie,na="[object AsyncFunction]",aa="[object Function]",sa="[object GeneratorFunction]",oa="[object Proxy]";function la(e){if(!ra(e))return!1;var t=ia(e);return t==aa||t==sa||t==na||t==oa}var ii=la,ca=J,ha=ca["__core-js_shared__"],ua=ha,jt=ua,Se=function(){var e=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function da(e){return!!Se&&Se in e}var pa=da,ma=Function.prototype,fa=ma.toString;function ga(e){if(e!=null){try{return fa.call(e)}catch{}try{return e+""}catch{}}return""}var ri=ga,va=ii,ya=pa,ba=ie,_a=ri,wa=/[\\^$.*+?()[\]{}|]/g,Sa=/^\[object .+?Constructor\]$/,Ta=Function.prototype,ka=Object.prototype,xa=Ta.toString,Na=ka.hasOwnProperty,Ra=RegExp("^"+xa.call(Na).replace(wa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ea(e){if(!ba(e)||ya(e))return!1;var t=va(e)?Ra:Sa;return t.test(_a(e))}var Oa=Ea;function za(e,t){return e==null?void 0:e[t]}var Ia=za,Ma=Oa,Ca=Ia;function La(e,t){var i=Ca(e,t);return Ma(i)?i:void 0}var ot=La,Aa=ot,Wa=J,Ba=Aa(Wa,"Map"),re=Ba,Ha=ot,Da=Ha(Object,"create"),Ot=Da,Te=Ot;function ja(){this.__data__=Te?Te(null):{},this.size=0}var Pa=ja;function $a(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ga=$a,Ua=Ot,qa="__lodash_hash_undefined__",Fa=Object.prototype,Va=Fa.hasOwnProperty;function Xa(e){var t=this.__data__;if(Ua){var i=t[e];return i===qa?void 0:i}return Va.call(t,e)?t[e]:void 0}var Ya=Xa,Za=Ot,Ka=Object.prototype,Qa=Ka.hasOwnProperty;function Ja(e){var t=this.__data__;return Za?t[e]!==void 0:Qa.call(t,e)}var ts=Ja,es=Ot,is="__lodash_hash_undefined__";function rs(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=es&&t===void 0?is:t,this}var ns=rs,as=Pa,ss=Ga,os=Ya,ls=ts,cs=ns;function lt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}lt.prototype.clear=as;lt.prototype.delete=ss;lt.prototype.get=os;lt.prototype.has=ls;lt.prototype.set=cs;var hs=lt,ke=hs,us=Rt,ds=re;function ps(){this.size=0,this.__data__={hash:new ke,map:new(ds||us),string:new ke}}var ms=ps;function fs(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var gs=fs,vs=gs;function ys(e,t){var i=e.__data__;return vs(t)?i[typeof t=="string"?"string":"hash"]:i.map}var zt=ys,bs=zt;function _s(e){var t=bs(this,e).delete(e);return this.size-=t?1:0,t}var ws=_s,Ss=zt;function Ts(e){return Ss(this,e).get(e)}var ks=Ts,xs=zt;function Ns(e){return xs(this,e).has(e)}var Rs=Ns,Es=zt;function Os(e,t){var i=Es(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var zs=Os,Is=ms,Ms=ws,Cs=ks,Ls=Rs,As=zs;function ct(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}ct.prototype.clear=Is;ct.prototype.delete=Ms;ct.prototype.get=Cs;ct.prototype.has=Ls;ct.prototype.set=As;var ne=ct,Ws=Rt,Bs=re,Hs=ne,Ds=200;function js(e,t){var i=this.__data__;if(i instanceof Ws){var r=i.__data__;if(!Bs||r.length<Ds-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Hs(r)}return i.set(e,t),this.size=i.size,this}var Ps=js,$s=Rt,Gs=On,Us=In,qs=Cn,Fs=An,Vs=Ps;function ht(e){var t=this.__data__=new $s(e);this.size=t.size}ht.prototype.clear=Gs;ht.prototype.delete=Us;ht.prototype.get=qs;ht.prototype.has=Fs;ht.prototype.set=Vs;var ni=ht,Xs="__lodash_hash_undefined__";function Ys(e){return this.__data__.set(e,Xs),this}var Zs=Ys;function Ks(e){return this.__data__.has(e)}var Qs=Ks,Js=ne,to=Zs,eo=Qs;function St(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Js;++t<i;)this.add(e[t])}St.prototype.add=St.prototype.push=to;St.prototype.has=eo;var ai=St;function io(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var ro=io;function no(e,t){return e.has(t)}var si=no,ao=ai,so=ro,oo=si,lo=1,co=2;function ho(e,t,i,r,n,a){var o=i&lo,h=e.length,c=t.length;if(h!=c&&!(o&&c>h))return!1;var s=a.get(e),u=a.get(t);if(s&&u)return s==t&&u==e;var d=-1,p=!0,v=i&co?new ao:void 0;for(a.set(e,t),a.set(t,e);++d<h;){var _=e[d],T=t[d];if(r)var N=o?r(T,_,d,t,e,a):r(_,T,d,e,t,a);if(N!==void 0){if(N)continue;p=!1;break}if(v){if(!so(t,function(g,E){if(!oo(v,E)&&(_===g||n(_,g,i,r,a)))return v.push(E)})){p=!1;break}}else if(!(_===T||n(_,T,i,r,a))){p=!1;break}}return a.delete(e),a.delete(t),p}var oi=ho,uo=J,po=uo.Uint8Array,mo=po;function fo(e){var t=-1,i=Array(e.size);return e.forEach(function(r,n){i[++t]=[n,r]}),i}var go=fo;function vo(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var ae=vo,xe=Et,Ne=mo,yo=Je,bo=oi,_o=go,wo=ae,So=1,To=2,ko="[object Boolean]",xo="[object Date]",No="[object Error]",Ro="[object Map]",Eo="[object Number]",Oo="[object RegExp]",zo="[object Set]",Io="[object String]",Mo="[object Symbol]",Co="[object ArrayBuffer]",Lo="[object DataView]",Re=xe?xe.prototype:void 0,Pt=Re?Re.valueOf:void 0;function Ao(e,t,i,r,n,a,o){switch(i){case Lo:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Co:return!(e.byteLength!=t.byteLength||!a(new Ne(e),new Ne(t)));case ko:case xo:case Eo:return yo(+e,+t);case No:return e.name==t.name&&e.message==t.message;case Oo:case Io:return e==t+"";case Ro:var h=_o;case zo:var c=r&So;if(h||(h=wo),e.size!=t.size&&!c)return!1;var s=o.get(e);if(s)return s==t;r|=To,o.set(e,t);var u=bo(h(e),h(t),r,n,a,o);return o.delete(e),u;case Mo:if(Pt)return Pt.call(e)==Pt.call(t)}return!1}var Wo=Ao;function Bo(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var Ho=Bo,Do=Array.isArray,et=Do,jo=Ho,Po=et;function $o(e,t,i){var r=t(e);return Po(e)?r:jo(r,i(e))}var Go=$o;function Uo(e,t){for(var i=-1,r=e==null?0:e.length,n=0,a=[];++i<r;){var o=e[i];t(o,i,e)&&(a[n++]=o)}return a}var qo=Uo;function Fo(){return[]}var Vo=Fo,Xo=qo,Yo=Vo,Zo=Object.prototype,Ko=Zo.propertyIsEnumerable,Ee=Object.getOwnPropertySymbols,Qo=Ee?function(e){return e==null?[]:(e=Object(e),Xo(Ee(e),function(t){return Ko.call(e,t)}))}:Yo,Jo=Qo;function tl(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var el=tl;function il(e){return e!=null&&typeof e=="object"}var gt=il,rl=ft,nl=gt,al="[object Arguments]";function sl(e){return nl(e)&&rl(e)==al}var ol=sl,Oe=ol,ll=gt,li=Object.prototype,cl=li.hasOwnProperty,hl=li.propertyIsEnumerable,ul=Oe(function(){return arguments}())?Oe:function(e){return ll(e)&&cl.call(e,"callee")&&!hl.call(e,"callee")},ci=ul,Tt={exports:{}};function dl(){return!1}var pl=dl;Tt.exports;(function(e,t){var i=J,r=pl,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===n,h=o?i.Buffer:void 0,c=h?h.isBuffer:void 0,s=c||r;e.exports=s})(Tt,Tt.exports);var hi=Tt.exports,ml=9007199254740991,fl=/^(?:0|[1-9]\d*)$/;function gl(e,t){var i=typeof e;return t=t??ml,!!t&&(i=="number"||i!="symbol"&&fl.test(e))&&e>-1&&e%1==0&&e<t}var ui=gl,vl=9007199254740991;function yl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vl}var se=yl,bl=ft,_l=se,wl=gt,Sl="[object Arguments]",Tl="[object Array]",kl="[object Boolean]",xl="[object Date]",Nl="[object Error]",Rl="[object Function]",El="[object Map]",Ol="[object Number]",zl="[object Object]",Il="[object RegExp]",Ml="[object Set]",Cl="[object String]",Ll="[object WeakMap]",Al="[object ArrayBuffer]",Wl="[object DataView]",Bl="[object Float32Array]",Hl="[object Float64Array]",Dl="[object Int8Array]",jl="[object Int16Array]",Pl="[object Int32Array]",$l="[object Uint8Array]",Gl="[object Uint8ClampedArray]",Ul="[object Uint16Array]",ql="[object Uint32Array]",C={};C[Bl]=C[Hl]=C[Dl]=C[jl]=C[Pl]=C[$l]=C[Gl]=C[Ul]=C[ql]=!0;C[Sl]=C[Tl]=C[Al]=C[kl]=C[Wl]=C[xl]=C[Nl]=C[Rl]=C[El]=C[Ol]=C[zl]=C[Il]=C[Ml]=C[Cl]=C[Ll]=!1;function Fl(e){return wl(e)&&_l(e.length)&&!!C[bl(e)]}var Vl=Fl;function Xl(e){return function(t){return e(t)}}var Yl=Xl,kt={exports:{}};kt.exports;(function(e,t){var i=ti,r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,a=n&&n.exports===r,o=a&&i.process,h=function(){try{var c=n&&n.require&&n.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=h})(kt,kt.exports);var Zl=kt.exports,Kl=Vl,Ql=Yl,ze=Zl,Ie=ze&&ze.isTypedArray,Jl=Ie?Ql(Ie):Kl,di=Jl,tc=el,ec=ci,ic=et,rc=hi,nc=ui,ac=di,sc=Object.prototype,oc=sc.hasOwnProperty;function lc(e,t){var i=ic(e),r=!i&&ec(e),n=!i&&!r&&rc(e),a=!i&&!r&&!n&&ac(e),o=i||r||n||a,h=o?tc(e.length,String):[],c=h.length;for(var s in e)(t||oc.call(e,s))&&!(o&&(s=="length"||n&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||nc(s,c)))&&h.push(s);return h}var cc=lc,hc=Object.prototype;function uc(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||hc;return e===i}var dc=uc;function pc(e,t){return function(i){return e(t(i))}}var mc=pc,fc=mc,gc=fc(Object.keys,Object),vc=gc,yc=dc,bc=vc,_c=Object.prototype,wc=_c.hasOwnProperty;function Sc(e){if(!yc(e))return bc(e);var t=[];for(var i in Object(e))wc.call(e,i)&&i!="constructor"&&t.push(i);return t}var Tc=Sc,kc=ii,xc=se;function Nc(e){return e!=null&&xc(e.length)&&!kc(e)}var Rc=Nc,Ec=cc,Oc=Tc,zc=Rc;function Ic(e){return zc(e)?Ec(e):Oc(e)}var pi=Ic,Mc=Go,Cc=Jo,Lc=pi;function Ac(e){return Mc(e,Lc,Cc)}var Wc=Ac,Me=Wc,Bc=1,Hc=Object.prototype,Dc=Hc.hasOwnProperty;function jc(e,t,i,r,n,a){var o=i&Bc,h=Me(e),c=h.length,s=Me(t),u=s.length;if(c!=u&&!o)return!1;for(var d=c;d--;){var p=h[d];if(!(o?p in t:Dc.call(t,p)))return!1}var v=a.get(e),_=a.get(t);if(v&&_)return v==t&&_==e;var T=!0;a.set(e,t),a.set(t,e);for(var N=o;++d<c;){p=h[d];var g=e[p],E=t[p];if(r)var B=o?r(E,g,p,t,e,a):r(g,E,p,e,t,a);if(!(B===void 0?g===E||n(g,E,i,r,a):B)){T=!1;break}N||(N=p=="constructor")}if(T&&!N){var W=e.constructor,D=t.constructor;W!=D&&"constructor"in e&&"constructor"in t&&!(typeof W=="function"&&W instanceof W&&typeof D=="function"&&D instanceof D)&&(T=!1)}return a.delete(e),a.delete(t),T}var Pc=jc,$c=ot,Gc=J,Uc=$c(Gc,"DataView"),qc=Uc,Fc=ot,Vc=J,Xc=Fc(Vc,"Promise"),Yc=Xc,Zc=ot,Kc=J,Qc=Zc(Kc,"Set"),mi=Qc,Jc=ot,th=J,eh=Jc(th,"WeakMap"),ih=eh,Yt=qc,Zt=re,Kt=Yc,Qt=mi,Jt=ih,fi=ft,ut=ri,Ce="[object Map]",rh="[object Object]",Le="[object Promise]",Ae="[object Set]",We="[object WeakMap]",Be="[object DataView]",nh=ut(Yt),ah=ut(Zt),sh=ut(Kt),oh=ut(Qt),lh=ut(Jt),rt=fi;(Yt&&rt(new Yt(new ArrayBuffer(1)))!=Be||Zt&&rt(new Zt)!=Ce||Kt&&rt(Kt.resolve())!=Le||Qt&&rt(new Qt)!=Ae||Jt&&rt(new Jt)!=We)&&(rt=function(e){var t=fi(e),i=t==rh?e.constructor:void 0,r=i?ut(i):"";if(r)switch(r){case nh:return Be;case ah:return Ce;case sh:return Le;case oh:return Ae;case lh:return We}return t});var ch=rt,$t=ni,hh=oi,uh=Wo,dh=Pc,He=ch,De=et,je=hi,ph=di,mh=1,Pe="[object Arguments]",$e="[object Array]",bt="[object Object]",fh=Object.prototype,Ge=fh.hasOwnProperty;function gh(e,t,i,r,n,a){var o=De(e),h=De(t),c=o?$e:He(e),s=h?$e:He(t);c=c==Pe?bt:c,s=s==Pe?bt:s;var u=c==bt,d=s==bt,p=c==s;if(p&&je(e)){if(!je(t))return!1;o=!0,u=!1}if(p&&!u)return a||(a=new $t),o||ph(e)?hh(e,t,i,r,n,a):uh(e,t,c,i,r,n,a);if(!(i&mh)){var v=u&&Ge.call(e,"__wrapped__"),_=d&&Ge.call(t,"__wrapped__");if(v||_){var T=v?e.value():e,N=_?t.value():t;return a||(a=new $t),n(T,N,i,r,a)}}return p?(a||(a=new $t),dh(e,t,i,r,n,a)):!1}var vh=gh,yh=vh,Ue=gt;function gi(e,t,i,r,n){return e===t?!0:e==null||t==null||!Ue(e)&&!Ue(t)?e!==e&&t!==t:yh(e,t,i,r,gi,n)}var vi=gi,bh=ni,_h=vi,wh=1,Sh=2;function Th(e,t,i,r){var n=i.length,a=n,o=!r;if(e==null)return!a;for(e=Object(e);n--;){var h=i[n];if(o&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++n<a;){h=i[n];var c=h[0],s=e[c],u=h[1];if(o&&h[2]){if(s===void 0&&!(c in e))return!1}else{var d=new bh;if(r)var p=r(s,u,c,e,t,d);if(!(p===void 0?_h(u,s,wh|Sh,r,d):p))return!1}}return!0}var kh=Th,xh=ie;function Nh(e){return e===e&&!xh(e)}var yi=Nh,Rh=yi,Eh=pi;function Oh(e){for(var t=Eh(e),i=t.length;i--;){var r=t[i],n=e[r];t[i]=[r,n,Rh(n)]}return t}var zh=Oh;function Ih(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}var bi=Ih,Mh=kh,Ch=zh,Lh=bi;function Ah(e){var t=Ch(e);return t.length==1&&t[0][2]?Lh(t[0][0],t[0][1]):function(i){return i===e||Mh(i,e,t)}}var Wh=Ah,Bh=ft,Hh=gt,Dh="[object Symbol]";function jh(e){return typeof e=="symbol"||Hh(e)&&Bh(e)==Dh}var oe=jh,Ph=et,$h=oe,Gh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uh=/^\w*$/;function qh(e,t){if(Ph(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||$h(e)?!0:Uh.test(e)||!Gh.test(e)||t!=null&&e in Object(t)}var le=qh,_i=ne,Fh="Expected a function";function ce(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Fh);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],a=i.cache;if(a.has(n))return a.get(n);var o=e.apply(this,r);return i.cache=a.set(n,o)||a,o};return i.cache=new(ce.Cache||_i),i}ce.Cache=_i;var Vh=ce,Xh=Vh,Yh=500;function Zh(e){var t=Xh(e,function(r){return i.size===Yh&&i.clear(),r}),i=t.cache;return t}var Kh=Zh,Qh=Kh,Jh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tu=/\\(\\)?/g,eu=Qh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Jh,function(i,r,n,a){t.push(n?a.replace(tu,"$1"):r||i)}),t}),iu=eu;function ru(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var nu=ru,qe=Et,au=nu,su=et,ou=oe,lu=1/0,Fe=qe?qe.prototype:void 0,Ve=Fe?Fe.toString:void 0;function wi(e){if(typeof e=="string")return e;if(su(e))return au(e,wi)+"";if(ou(e))return Ve?Ve.call(e):"";var t=e+"";return t=="0"&&1/e==-lu?"-0":t}var cu=wi,hu=cu;function uu(e){return e==null?"":hu(e)}var du=uu,pu=et,mu=le,fu=iu,gu=du;function vu(e,t){return pu(e)?e:mu(e,t)?[e]:fu(gu(e))}var Si=vu,yu=oe,bu=1/0;function _u(e){if(typeof e=="string"||yu(e))return e;var t=e+"";return t=="0"&&1/e==-bu?"-0":t}var It=_u,wu=Si,Su=It;function Tu(e,t){t=wu(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[Su(t[i++])];return i&&i==r?e:void 0}var Ti=Tu,ku=Ti;function xu(e,t,i){var r=e==null?void 0:ku(e,t);return r===void 0?i:r}var Nu=xu;function Ru(e,t){return e!=null&&t in Object(e)}var Eu=Ru,Ou=Si,zu=ci,Iu=et,Mu=ui,Cu=se,Lu=It;function Au(e,t,i){t=Ou(t,e);for(var r=-1,n=t.length,a=!1;++r<n;){var o=Lu(t[r]);if(!(a=e!=null&&i(e,o)))break;e=e[o]}return a||++r!=n?a:(n=e==null?0:e.length,!!n&&Cu(n)&&Mu(o,n)&&(Iu(e)||zu(e)))}var Wu=Au,Bu=Eu,Hu=Wu;function Du(e,t){return e!=null&&Hu(e,t,Bu)}var ju=Du,Pu=vi,$u=Nu,Gu=ju,Uu=le,qu=yi,Fu=bi,Vu=It,Xu=1,Yu=2;function Zu(e,t){return Uu(e)&&qu(t)?Fu(Vu(e),t):function(i){var r=$u(i,e);return r===void 0&&r===t?Gu(i,e):Pu(t,r,Xu|Yu)}}var Ku=Zu;function Qu(e){return e}var Ju=Qu;function td(e){return function(t){return t==null?void 0:t[e]}}var ed=td,id=Ti;function rd(e){return function(t){return id(t,e)}}var nd=rd,ad=ed,sd=nd,od=le,ld=It;function cd(e){return od(e)?ad(ld(e)):sd(e)}var hd=cd,ud=Wh,dd=Ku,pd=Ju,md=et,fd=hd;function gd(e){return typeof e=="function"?e:e==null?pd:typeof e=="object"?md(e)?dd(e[0],e[1]):ud(e):fd(e)}var vd=gd;function yd(e,t,i,r){for(var n=e.length,a=i+(r?1:-1);r?a--:++a<n;)if(t(e[a],a,e))return a;return-1}var bd=yd;function _d(e){return e!==e}var wd=_d;function Sd(e,t,i){for(var r=i-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}var Td=Sd,kd=bd,xd=wd,Nd=Td;function Rd(e,t,i){return t===t?Nd(e,t,i):kd(e,xd,i)}var Ed=Rd,Od=Ed;function zd(e,t){var i=e==null?0:e.length;return!!i&&Od(e,t,0)>-1}var Id=zd;function Md(e,t,i){for(var r=-1,n=e==null?0:e.length;++r<n;)if(i(t,e[r]))return!0;return!1}var Cd=Md;function Ld(){}var Ad=Ld,Gt=mi,Wd=Ad,Bd=ae,Hd=1/0,Dd=Gt&&1/Bd(new Gt([,-0]))[1]==Hd?function(e){return new Gt(e)}:Wd,jd=Dd,Pd=ai,$d=Id,Gd=Cd,Ud=si,qd=jd,Fd=ae,Vd=200;function Xd(e,t,i){var r=-1,n=$d,a=e.length,o=!0,h=[],c=h;if(i)o=!1,n=Gd;else if(a>=Vd){var s=t?null:qd(e);if(s)return Fd(s);o=!1,n=Ud,c=new Pd}else c=t?[]:h;t:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=i||u!==0?u:0,o&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue t;t&&c.push(d),h.push(u)}else n(c,d,i)||(c!==h&&c.push(d),h.push(u))}return h}var Yd=Xd,Zd=vd,Kd=Yd;function Qd(e,t){return e&&e.length?Kd(e,Zd(t)):[]}var Jd=Qd;const tp=en(Jd);class te extends xt{constructor(t){super(),f(this,"wrapper"),f(this,"gridElement"),f(this,"formatter"),f(this,"animator"),f(this,"rowHeight"),f(this,"rowWidth"),f(this,"rowGap"),f(this,"columnGap"),f(this,"activeBracketId"),f(this,"activeGridSize"),f(this,"zoomer"),this.formatter=t.formatter,this.animator=t.animator,this.activeBracketId=null,this.rowHeight=t.rowHeight??45,this.rowWidth=t.rowWidth??125,this.rowGap=t.rowGap??4,this.columnGap=t.columnGap??4,this.wrapper=nt("div").classed("round-robin-renderer__wrapper",!0),this.gridElement=this.wrapper.append("div").classed("round-robin-renderer",!0).style("column-gap",`${this.columnGap}px`).style("row-gap",`${this.rowGap}px`),this.zoomer=new wt(this.wrapper,this.onZoom.bind(this),t.maxScale??1.5)}onZoom(t){this.gridElement.style("transform",wt.toCSSTransform(t))}destroy(){this.zoomer.disconnect(),this.wrapper.remove()}getElement(){return this.wrapper.node()}async hide(t={}){if(this.activeBracketId!=null){const i=this.getElement();this.animator.roundRobinAnimator.beforeHide(i,this),await this.animator.roundRobinAnimator.hide(i,{renderer:this,...t}),i.style.visibility="hidden"}}beforeReveal(){const t=this.getElement();this.animator.roundRobinAnimator.beforeReveal(t,this),t.style.visibility="visible"}async reveal(t={}){await this.animator.roundRobinAnimator.reveal(this.getElement(),{renderer:this,...t})}install(t){t.appendChild(this.getElement()),this.zoomer.recalculateContainerSize()}async setData(t){const i=this.getElement();if(i.style.visibility="visible",t.matchGroups.length!==1)throw new Error(`Cannot render more (or less) than one match group at once! (Found ${t.matchGroups.length})`);const r=t.matchGroups[0],n=tp(r.matches.flatMap(s=>[s.bottomTeam,s.topTeam]).filter(s=>s.id!=null&&s.name!=null),s=>s.id),a=n.length+1,o=this.activeGridSize!==a||this.activeBracketId!==r.id;this.activeBracketId=r.id,this.activeGridSize=a,o&&(await this.hide(),this.gridElement.selectChildren().remove()),this.gridElement.style("grid-template-rows",`repeat(${a}, ${this.rowHeight}px)`).style("grid-template-columns",`repeat(${a}, ${this.rowWidth}px)`),this.zoomer.setContentSize(this.rowWidth*a+(this.columnGap*a-this.columnGap),this.rowHeight*a+(this.rowGap*a-this.rowGap));const h=[];for(let s=0;s<a;s++)for(let u=0;u<a;u++)if(s===0&&u===0)h.push({type:"blank",style:"blank",x:u,y:s});else if(s===0){const d=n[u-1];h.push({type:"teamName",side:"top",name:this.formatter.formatTeamName(d.name),isDisqualified:d.isDisqualified})}else if(u===0){const d=n[s-1];h.push({type:"teamName",side:"left",name:this.formatter.formatTeamName(d.name),isDisqualified:d.isDisqualified})}else if(s===u)h.push({x:u,y:s,type:"blank",style:"no-match"});else{const d=n[s-1],p=n[u-1],v=r.matches.find(g=>(g.topTeam.id===d.id||g.bottomTeam.id===d.id)&&(g.topTeam.id===p.id||g.bottomTeam.id===p.id)),_=d.id===(v==null?void 0:v.bottomTeam.id),T=_?v==null?void 0:v.bottomTeam:v==null?void 0:v.topTeam,N=_?v==null?void 0:v.topTeam:v==null?void 0:v.bottomTeam;h.push({type:"match",x:u,y:s,match:v,leftTeam:T,topTeam:N,leftTeamScore:this.formatter.formatScore({team:T,opponentTeam:N,bracketType:I.ROUND_ROBIN,matchState:(v==null?void 0:v.state)??j.UNKNOWN}),topTeamScore:this.formatter.formatScore({team:N,opponentTeam:T,bracketType:I.ROUND_ROBIN,matchState:(v==null?void 0:v.state)??j.UNKNOWN})})}const c=this;this.gridElement.selectAll("div.round-robin-grid-item").data(h).join(s=>s.append("div").classed("round-robin-grid-item",!0).each(function(u){u.type==="blank"?this.classList.add("type-blank",`type-blank-${u.style}`):u.type==="teamName"?(this.classList.add("type-team-name",`type-team-name-${u.side}`),c.animator.setTeamName(this,"",u.name,u.isDisqualified,I.ROUND_ROBIN)):this.classList.add(`type-${u.type}`),u.type==="match"&&(this.dataset.xPosition=u.x.toString(),this.dataset.yPosition=u.y.toString(),c.insertScoreLayout(this,u),c.setWinnerClasses(this,u))}),s=>s.each(function(u){if(c.setWinnerClasses(this,u),u.type==="match")c.updateScore(this,u);else if(u.type==="teamName"){const d=this.innerText;d!==u.name&&c.animator.animateTeamNameUpdate(this,d,u.name,u.isDisqualified,I.ROUND_ROBIN)}})),o&&(this.beforeReveal(),await this.reveal())}setWinnerClasses(t,i){var r,n,a,o,h,c,s;i.type!=="match"||((r=i.match)==null?void 0:r.state)!==j.IN_PROGRESS&&((n=i.match)==null?void 0:n.state)!==j.COMPLETED?t.classList.remove("left-team-winner","top-team-winner","in-progress"):((a=i.match)==null?void 0:a.state)===j.IN_PROGRESS?t.classList.add("in-progress"):((o=i.match)==null?void 0:o.state)===j.COMPLETED&&((h=i.leftTeam)!=null&&h.isWinner||(c=i.topTeam)!=null&&c.isWinner)&&(t.classList.remove("in-progress"),(s=i.leftTeam)!=null&&s.isWinner?(t.classList.remove("top-team-winner"),t.classList.add("left-team-winner")):(t.classList.remove("left-team-winner"),t.classList.add("top-team-winner")))}updateScore(t,i){["left","top"].forEach(r=>{const n=t.querySelector(`.${r}-score-wrapper > .team-score`),a=n.textContent??"",o=r==="left"?i.leftTeam:i.topTeam,h=r==="left"?i.leftTeamScore:i.topTeamScore;a!==h&&this.animator.animateScoreUpdate(n,parseInt(a),(o==null?void 0:o.score)??NaN,h,(o==null?void 0:o.isDisqualified)??!1,I.ROUND_ROBIN)})}insertScoreWrapper(t,i,r,n){const a=this.animator;t.append("div").classed("score-wrapper",!0).classed(`${r}-score-wrapper`,!0).append("div").classed("team-score",!0).each(function(){a.setScore(this,0,(n==null?void 0:n.score)??NaN,i,(n==null?void 0:n.isDisqualified)??!1,I.ROUND_ROBIN)})}insertScoreLayout(t,i){L(t).append("div").classed("score-layout",!0).call(this.insertScoreWrapper.bind(this),i.leftTeamScore,"left",i.leftTeam).call(r=>{r.append("div").classed("score-separator",!0)}).call(this.insertScoreWrapper.bind(this),i.topTeamScore,"top",i.topTeam)}}f(te,"compatibleBracketTypes",[I.ROUND_ROBIN]);class ep{constructor(t){f(this,"activeRenderer"),f(this,"opts"),f(this,"element"),this.activeRenderer=null,this.opts={animator:(t==null?void 0:t.animator)??new Jr,formatter:(t==null?void 0:t.formatter)??new tn,eliminationOpts:(t==null?void 0:t.eliminationOpts)??{},swissOpts:(t==null?void 0:t.swissOpts)??{},roundRobinOpts:(t==null?void 0:t.roundRobinOpts)??{}},this.element=nt("div").classed("bracket-renderer",!0).node()}async setData(t){var i,r;return(this.activeRenderer==null||!this.activeRenderer.constructor.compatibleBracketTypes.includes(t.type))&&(await((i=this.activeRenderer)==null?void 0:i.hide()),(r=this.activeRenderer)==null||r.destroy(),this.activeRenderer=this.getRenderer(t.type),this.activeRenderer.install(this.element)),this.activeRenderer.setData(t)}beforeReveal(){var t;(t=this.activeRenderer)==null||t.beforeReveal()}async reveal(t={}){var i;await((i=this.activeRenderer)==null?void 0:i.reveal(t))}getRenderer(t){return Xt.compatibleBracketTypes.includes(t)?new Xt({animator:this.opts.animator,formatter:this.opts.formatter,...this.opts.swissOpts}):Vt.compatibleBracketTypes.includes(t)?new Vt({animator:this.opts.animator,formatter:this.opts.formatter,...this.opts.eliminationOpts}):te.compatibleBracketTypes.includes(t)?new te({animator:this.opts.animator,formatter:this.opts.formatter,...this.opts.roundRobinOpts}):new Qe}}class ip{beforeHide(){}async hide(t,i){return L(t).transition().duration(350).delay(i.delay??0).ease(q).style("opacity","0").end()}beforeReveal(t){const i=L(t);i.style("opacity","1"),i.selectAll("div.match-cell").interrupt().style("opacity","0").style("transform","translateX(-10px)"),i.selectAll(".round-label, .elimination-renderer__bracket-title").interrupt().style("opacity","0"),i.selectAll(".bracket-link").interrupt().style("stroke-dashoffset","-1")}async reveal(t,i){const r=L(t),n=i.renderer.getBracketDepth(),a=i.delay??0;await Promise.all([r.selectAll("div.match-cell").transition().duration(350).ease(Ut).style("opacity","1").style("transform","translateX(0px)").delay(o=>a+(n-o.depth)*200).end(),r.selectAll(".round-label, .elimination-renderer__bracket-title").transition().duration(350).delay(a).ease(Ut).style("opacity","1").delay(function(){return a+Number(this.dataset.roundIndex??0)*200}).end(),r.selectAll(".bracket-link").transition().duration(750).delay(a).ease(Mi).style("stroke-dashoffset","0").delay(o=>(n-o.source.depth)*300+100+a).end()]).catch(()=>{})}}class rp{beforeHide(){}beforeReveal(t){L(t).style("opacity","1").selectAll("div.match-row").interrupt().style("opacity","0")}async hide(t,i){return L(t).transition().duration(350).delay(i.delay??0).ease(q).style("opacity","0").end()}async reveal(t,i){return L(t).selectAll("div.match-row").transition().duration(350).ease(q).style("opacity","1").delay((r,n)=>n*50+(i.delay??0)).end()}}class np{beforeHide(){}hide(t,i){return L(t).transition().duration(350).delay(i.delay??0).ease(q).style("opacity","0").end()}beforeReveal(t){Ki(".round-robin-grid-item").interrupt().style("opacity","0"),t.style.opacity="1"}reveal(t,i){const r=L(t),n=i.delay??0;return Promise.all([r.selectAll(".type-blank-blank, .type-team-name").transition().duration(350).delay(n).ease(q).style("opacity","1").end(),r.selectAll(".type-match, .type-blank-no-match").transition().duration(350).ease(q).style("opacity","1").delay(a=>(a.y+a.x)*100+n).end()])}}class ap extends Ke{constructor(){super(new ip,new rp,new np)}setScore(t,i,r,n,a){t.innerText=n,this.setDisqualifiedClass(t,a)}animateScoreUpdate(t,i,r,n,a,o){const h=o===I.SWISS||o===I.ROUND_ROBIN?"translateY":"translateX",c=h==="translateY"?t.getBoundingClientRect().height:t.getBoundingClientRect().width,s=isNaN(i)||i<r?-1:1,u=L(t),d=this;u.call(p=>p.transition().duration(250).ease(Ii).style("transform",`${h}(${c*s}px)`).on("end",function(){L(this).text(n).style("transform",`${h}(${-c*s}px)`),d.setDisqualifiedClass(this,a)}).transition().ease(Ut).style("transform",`${h}(0px)`))}setTeamName(t,i,r,n){t.innerText=r,this.setDisqualifiedClass(t,n)}animateTeamNameUpdate(t,i,r,n){const a=L(t),o=this;a.call(h=>h.transition().duration(250).ease(q).style("opacity","0").on("end",function(){L(this).text(r),o.setDisqualifiedClass(this,n)}).transition().ease(q).style("opacity","1"))}}class sp{beforeHide(){}beforeReveal(t){G.set(t,{opacity:1}),G.set(t.querySelectorAll(".match-row-wrapper"),{width:0,opacity:0})}async hide(t,i){return G.to(t,{duration:.35,opacity:0,delay:i.delay})}async reveal(t,i){const r=t.querySelectorAll(".match-row-wrapper");return Promise.all([G.to(r,{width:1e3,duration:.5,stagger:.05,ease:"power2.out",delay:i.delay}),G.to(r,{opacity:1,duration:.1,stagger:.05,delay:i.delay})])}}class op{beforeHide(){}async hide(t,i){return G.to(t,{opacity:0,duration:.35,delay:i.delay})}beforeReveal(t){G.set(t,{opacity:1}),G.set(t.querySelectorAll(".match-cell-accent-color, .match-cell-accent-white"),{drawSVG:"50% 50%"}),G.set(t.querySelectorAll(".bracket-link"),{strokeDashoffset:"-1"}),G.set(t.querySelectorAll(".match-cell"),{opacity:0}),G.set(t.querySelectorAll(".round-label, .elimination-renderer__bracket-title"),{opacity:0})}async reveal(t,i){const r=i.renderer.getBracketDepth(),n=G.timeline({delay:i.delay});return n.to(t.querySelectorAll(".round-label, .elimination-renderer__bracket-title"),{duration:.35,opacity:1,stagger:function(a,o){return(o.__data__??0)*.5}},"matches-in").to(t.querySelectorAll(".bracket-link"),{duration:.75,ease:"power3.inOut",strokeDashoffset:"0",autoRound:!1,delay:r*.5,stagger:function(a,o){return(r-o.__data__.source.depth)*.35}},"matches-in").to(t.querySelectorAll(".match-cell-accent-color, .match-cell-accent-white"),{duration:1,ease:"power2.inOut",drawSVG:!0,stagger:function(a,o){return(r-o.__data__.depth)*.5}},"matches-in").to(t.querySelectorAll(".match-cell"),{duration:.15,ease:"none",opacity:1,delay:.75,stagger:function(a,o){return(r-o.__data__.depth)*.5+.1}},"matches-in"),n}}class lp extends ap{constructor(){super(...arguments),this.swissAnimator=new sp,this.eliminationAnimator=new op}}const cp={class:"bracket-title-wrapper layout c-horiz c-vert"},hp={class:"bracket-title-box glow-border glow-blue layout c-horiz c-vert"},up=Bi({__name:"BracketGraphic",setup(e){function t(o){o.each(function(){const h={height:this.clientHeight,width:this.clientWidth},c=10,s=h.height+c*2,u=h.width+c*2,d=10,p=Ye();p.moveTo(u-c,c+d),p.lineTo(u-c,c+d),p.arc(u-c-d,s-c-d,d,0,Math.PI*.5),p.lineTo(c+d,s-c),p.arc(c+d,s-c-d,d,Math.PI*.5,Math.PI),p.lineTo(c,c+d),p.arc(c+d,c+d,d,Math.PI,Math.PI*1.5),p.lineTo(u-c-d,c),p.arc(u-c-d,c+d,d,Math.PI*1.5,0),p.lineTo(u-c,s-c-d);const v=(_,T)=>{_.append("path").classed(T,!0).attr("fill","transparent").attr("d",p.toString())};L(this).append("svg").classed("sj-cell-border",!0).style("position","absolute").style("top","-10px").style("left","-10px").attr("width",h.width+20).attr("height",h.height+20).attr("viewBox",[0,0,h.width+20,h.height+20]).call(v,"match-cell-accent-color").call(v,"match-cell-accent-white")})}const i=Hi(),r=xi(),n=Di(()=>{var h,c,s;let o=(h=r.bracketData)==null?void 0:h.name;return((c=r.bracketData)==null?void 0:c.roundNumber)!=null&&(o+=` - Round ${(s=r.bracketData)==null?void 0:s.roundNumber}`),o}),a=new ep({animator:new lp,swissOpts:{rowHeight:70},eliminationOpts:{cellHeight:75,onCellCreation(o){t(o)},onCellUpdate(o){o.selectAll(".sj-cell-border").remove(),t(o)}}});return ji(async()=>{i.value.appendChild(a.element),await Promise.all([document.fonts.load("500 32px Nunito"),document.fonts.load("500 32px Kosugi Maru")]),Pi(()=>r.bracketData,o=>{o!=null&&a.setData(o)},{immediate:!0})}),(o,h)=>(ue(),$i(Gi,null,[At("div",cp,[At("div",hp,[de(Ai,null,{default:pe(()=>[(ue(),Ui(Wi,{key:n.value,"max-width":650},{default:pe(()=>[qi(Fi(n.value),1)]),_:1}))]),_:1})])]),At("div",{ref_key:"wrapper",ref:i,class:"bracket-wrapper"},null,512),de(Ci,{"animate-on-entrance":!1})],64))}}),dp=Vi(up,[["__scopeId","data-v-19ed591e"]]);G.registerPlugin(ki);G.registerPlugin(Ze);Ze.registerPIXI(Li);(async()=>{const e=Xi(dp);e.use(Yi()),await Ni(),e.mount("#app")})();
