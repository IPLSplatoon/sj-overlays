import{g as Ii}from"./DrawSVGPlugin-49hUBmER.js";import{M as be,N as ii,O as Ea,P as Fh,Q as Ia,R as Aa,S as Ra,U as Ca,V as Uh,W as Mh,X as Na,Y as Lh,Z as Bh,$ as Gh,a0 as ne,a1 as kh,a2 as Oa,a3 as Dh,a4 as Xh,m as Hh,y as Xn,d as Vh,r as $h,o as zh,_ as jh,a as Yh,b as qh}from"./_plugin-vue_export-helper-DsXqNseE.js";import{t as Wh,i as Br}from"./toNumber-BrOljPEc.js";var Kh={value:()=>{}};function Sa(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new gr(r)}function gr(t){this._=t}function Zh(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}gr.prototype=Sa.prototype={constructor:gr,on:function(t,e){var r=this._,i=Zh(t+"",r),n,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((n=(t=i[s]).type)&&(n=Jh(r[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=i[s]).type)r[n]=Hn(r[n],t.name,e);else if(e==null)for(n in r)r[n]=Hn(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new gr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,s;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,n=s.length;i<n;++i)s[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,s=i.length;n<s;++n)i[n].value.apply(e,r)}};function Jh(t,e){for(var r=0,i=t.length,n;r<i;++r)if((n=t[r]).name===e)return n.value}function Hn(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=Kh,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var Ai="http://www.w3.org/1999/xhtml";const Vn={svg:"http://www.w3.org/2000/svg",xhtml:Ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gr(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Vn.hasOwnProperty(e)?{space:Vn[e],local:t}:t}function Qh(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ai&&e.documentElement.namespaceURI===Ai?e.createElement(t):e.createElementNS(r,t)}}function tu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Pa(t){var e=Gr(t);return(e.local?tu:Qh)(e)}function eu(){}function sn(t){return t==null?eu:function(){return this.querySelector(t)}}function ru(t){typeof t!="function"&&(t=sn(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],a=s.length,o=i[n]=new Array(a),h,u,f=0;f<a;++f)(h=s[f])&&(u=t.call(h,h.__data__,f,s))&&("__data__"in h&&(u.__data__=h.__data__),o[f]=u);return new dt(i,this._parents)}function iu(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function nu(){return[]}function Fa(t){return t==null?nu:function(){return this.querySelectorAll(t)}}function su(t){return function(){return iu(t.apply(this,arguments))}}function au(t){typeof t=="function"?t=su(t):t=Fa(t);for(var e=this._groups,r=e.length,i=[],n=[],s=0;s<r;++s)for(var a=e[s],o=a.length,h,u=0;u<o;++u)(h=a[u])&&(i.push(t.call(h,h.__data__,u,a)),n.push(h));return new dt(i,n)}function Ua(t){return function(){return this.matches(t)}}function Ma(t){return function(e){return e.matches(t)}}var ou=Array.prototype.find;function hu(t){return function(){return ou.call(this.children,t)}}function uu(){return this.firstElementChild}function fu(t){return this.select(t==null?uu:hu(typeof t=="function"?t:Ma(t)))}var lu=Array.prototype.filter;function cu(){return Array.from(this.children)}function du(t){return function(){return lu.call(this.children,t)}}function pu(t){return this.selectAll(t==null?cu:du(typeof t=="function"?t:Ma(t)))}function vu(t){typeof t!="function"&&(t=Ua(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],a=s.length,o=i[n]=[],h,u=0;u<a;++u)(h=s[u])&&t.call(h,h.__data__,u,s)&&o.push(h);return new dt(i,this._parents)}function La(t){return new Array(t.length)}function _u(){return new dt(this._enter||this._groups.map(La),this._parents)}function wr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wr.prototype={constructor:wr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yu(t){return function(){return t}}function mu(t,e,r,i,n,s){for(var a=0,o,h=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):r[a]=new wr(t,s[a]);for(;a<h;++a)(o=e[a])&&(n[a]=o)}function gu(t,e,r,i,n,s,a){var o,h,u=new Map,f=e.length,l=s.length,c=new Array(f),d;for(o=0;o<f;++o)(h=e[o])&&(c[o]=d=a.call(h,h.__data__,o,e)+"",u.has(d)?n[o]=h:u.set(d,h));for(o=0;o<l;++o)d=a.call(t,s[o],o,s)+"",(h=u.get(d))?(i[o]=h,h.__data__=s[o],u.delete(d)):r[o]=new wr(t,s[o]);for(o=0;o<f;++o)(h=e[o])&&u.get(c[o])===h&&(n[o]=h)}function xu(t){return t.__data__}function bu(t,e){if(!arguments.length)return Array.from(this,xu);var r=e?gu:mu,i=this._parents,n=this._groups;typeof t!="function"&&(t=yu(t));for(var s=n.length,a=new Array(s),o=new Array(s),h=new Array(s),u=0;u<s;++u){var f=i[u],l=n[u],c=l.length,d=Tu(t.call(f,f&&f.__data__,u,i)),p=d.length,_=o[u]=new Array(p),v=a[u]=new Array(p),m=h[u]=new Array(c);r(f,l,_,v,m,d,e);for(var y=0,g=0,A,T;y<p;++y)if(A=_[y]){for(y>=g&&(g=y+1);!(T=v[g])&&++g<p;);A._next=T||null}}return a=new dt(a,i),a._enter=o,a._exit=h,a}function Tu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wu(){return new dt(this._exit||this._groups.map(La),this._parents)}function Eu(t,e,r){var i=this.enter(),n=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(n=e(n),n&&(n=n.selection())),r==null?s.remove():r(s),i&&n?i.merge(n).order():n}function Iu(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,s=i.length,a=Math.min(n,s),o=new Array(n),h=0;h<a;++h)for(var u=r[h],f=i[h],l=u.length,c=o[h]=new Array(l),d,p=0;p<l;++p)(d=u[p]||f[p])&&(c[p]=d);for(;h<n;++h)o[h]=r[h];return new dt(o,this._parents)}function Au(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],n=i.length-1,s=i[n],a;--n>=0;)(a=i[n])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ru(t){t||(t=Cu);function e(l,c){return l&&c?t(l.__data__,c.__data__):!l-!c}for(var r=this._groups,i=r.length,n=new Array(i),s=0;s<i;++s){for(var a=r[s],o=a.length,h=n[s]=new Array(o),u,f=0;f<o;++f)(u=a[f])&&(h[f]=u);h.sort(e)}return new dt(n,this._parents).order()}function Cu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Nu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ou(){return Array.from(this)}function Su(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length;n<s;++n){var a=i[n];if(a)return a}return null}function Pu(){let t=0;for(const e of this)++t;return t}function Fu(){return!this.node()}function Uu(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n=e[r],s=0,a=n.length,o;s<a;++s)(o=n[s])&&t.call(o,o.__data__,s,n);return this}function Mu(t){return function(){this.removeAttribute(t)}}function Lu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bu(t,e){return function(){this.setAttribute(t,e)}}function Gu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ku(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Du(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Xu(t,e){var r=Gr(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?Lu:Mu:typeof e=="function"?r.local?Du:ku:r.local?Gu:Bu)(r,e))}function Ba(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hu(t){return function(){this.style.removeProperty(t)}}function Vu(t,e,r){return function(){this.style.setProperty(t,e,r)}}function $u(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function zu(t,e,r){return arguments.length>1?this.each((e==null?Hu:typeof e=="function"?$u:Vu)(t,e,r??"")):ve(this.node(),t)}function ve(t,e){return t.style.getPropertyValue(e)||Ba(t).getComputedStyle(t,null).getPropertyValue(e)}function ju(t){return function(){delete this[t]}}function Yu(t,e){return function(){this[t]=e}}function qu(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Wu(t,e){return arguments.length>1?this.each((e==null?ju:typeof e=="function"?qu:Yu)(t,e)):this.node()[t]}function Ga(t){return t.trim().split(/^|\s+/)}function an(t){return t.classList||new ka(t)}function ka(t){this._node=t,this._names=Ga(t.getAttribute("class")||"")}ka.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Da(t,e){for(var r=an(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function Xa(t,e){for(var r=an(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function Ku(t){return function(){Da(this,t)}}function Zu(t){return function(){Xa(this,t)}}function Ju(t,e){return function(){(e.apply(this,arguments)?Da:Xa)(this,t)}}function Qu(t,e){var r=Ga(t+"");if(arguments.length<2){for(var i=an(this.node()),n=-1,s=r.length;++n<s;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof e=="function"?Ju:e?Ku:Zu)(r,e))}function tf(){this.textContent=""}function ef(t){return function(){this.textContent=t}}function rf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function nf(t){return arguments.length?this.each(t==null?tf:(typeof t=="function"?rf:ef)(t)):this.node().textContent}function sf(){this.innerHTML=""}function af(t){return function(){this.innerHTML=t}}function of(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function hf(t){return arguments.length?this.each(t==null?sf:(typeof t=="function"?of:af)(t)):this.node().innerHTML}function uf(){this.nextSibling&&this.parentNode.appendChild(this)}function ff(){return this.each(uf)}function lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cf(){return this.each(lf)}function df(t){var e=typeof t=="function"?t:Pa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pf(){return null}function vf(t,e){var r=typeof t=="function"?t:Pa(t),i=e==null?pf:typeof e=="function"?e:sn(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function _f(){var t=this.parentNode;t&&t.removeChild(this)}function yf(){return this.each(_f)}function mf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xf(t){return this.select(t?gf:mf)}function bf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tf(t){return function(e){t.call(this,e,this.__data__)}}function wf(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function Ef(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,n=e.length,s;r<n;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function If(t,e,r){return function(){var i=this.__on,n,s=Tf(e);if(i){for(var a=0,o=i.length;a<o;++a)if((n=i[a]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=e;return}}this.addEventListener(t.type,s,r),n={type:t.type,name:t.name,value:e,listener:s,options:r},i?i.push(n):this.__on=[n]}}function Af(t,e,r){var i=wf(t+""),n,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var h=0,u=o.length,f;h<u;++h)for(n=0,f=o[h];n<s;++n)if((a=i[n]).type===f.type&&a.name===f.name)return f.value}return}for(o=e?If:Ef,n=0;n<s;++n)this.each(o(i[n],e,r));return this}function Ha(t,e,r){var i=Ba(t),n=i.CustomEvent;typeof n=="function"?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function Rf(t,e){return function(){return Ha(this,t,e)}}function Cf(t,e){return function(){return Ha(this,t,e.apply(this,arguments))}}function Nf(t,e){return this.each((typeof e=="function"?Cf:Rf)(t,e))}function*Of(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length,a;n<s;++n)(a=i[n])&&(yield a)}var Sf=[null];function dt(t,e){this._groups=t,this._parents=e}function We(){return new dt([[document.documentElement]],Sf)}function Pf(){return this}dt.prototype=We.prototype={constructor:dt,select:ru,selectAll:au,selectChild:fu,selectChildren:pu,filter:vu,data:bu,enter:_u,exit:wu,join:Eu,merge:Iu,selection:Pf,order:Au,sort:Ru,call:Nu,nodes:Ou,node:Su,size:Pu,empty:Fu,each:Uu,attr:Xu,style:zu,property:Wu,classed:Qu,text:nf,html:hf,raise:ff,lower:cf,append:df,insert:vf,remove:yf,clone:xf,datum:bf,on:Af,dispatch:Nf,[Symbol.iterator]:Of};function on(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Va(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function Ke(){}var Me=.7,Er=1/Me,de="\\s*([+-]?\\d+)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ff=/^#([0-9a-f]{3,8})$/,Uf=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),Mf=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Lf=new RegExp(`^rgba\\(${de},${de},${de},${Le}\\)$`),Bf=new RegExp(`^rgba\\(${gt},${gt},${gt},${Le}\\)$`),Gf=new RegExp(`^hsl\\(${Le},${gt},${gt}\\)$`),kf=new RegExp(`^hsla\\(${Le},${gt},${gt},${Le}\\)$`),$n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};on(Ke,Be,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zn,formatHex:zn,formatHex8:Df,formatHsl:Xf,formatRgb:jn,toString:jn});function zn(){return this.rgb().formatHex()}function Df(){return this.rgb().formatHex8()}function Xf(){return $a(this).formatHsl()}function jn(){return this.rgb().formatRgb()}function Be(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Ff.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Yn(e):r===3?new Z(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?rr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?rr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Uf.exec(t))?new Z(e[1],e[2],e[3],1):(e=Mf.exec(t))?new Z(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Lf.exec(t))?rr(e[1],e[2],e[3],e[4]):(e=Bf.exec(t))?rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Gf.exec(t))?Kn(e[1],e[2]/100,e[3]/100,1):(e=kf.exec(t))?Kn(e[1],e[2]/100,e[3]/100,e[4]):$n.hasOwnProperty(t)?Yn($n[t]):t==="transparent"?new Z(NaN,NaN,NaN,0):null}function Yn(t){return new Z(t>>16&255,t>>8&255,t&255,1)}function rr(t,e,r,i){return i<=0&&(t=e=r=NaN),new Z(t,e,r,i)}function Hf(t){return t instanceof Ke||(t=Be(t)),t?(t=t.rgb(),new Z(t.r,t.g,t.b,t.opacity)):new Z}function Ri(t,e,r,i){return arguments.length===1?Hf(t):new Z(t,e,r,i??1)}function Z(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}on(Z,Ri,Va(Ke,{brighter(t){return t=t==null?Er:Math.pow(Er,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Me:Math.pow(Me,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Z(Qt(this.r),Qt(this.g),Qt(this.b),Ir(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qn,formatHex:qn,formatHex8:Vf,formatRgb:Wn,toString:Wn}));function qn(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Vf(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wn(){const t=Ir(this.opacity);return`${t===1?"rgb(":"rgba("}${Qt(this.r)}, ${Qt(this.g)}, ${Qt(this.b)}${t===1?")":`, ${t})`}`}function Ir(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return t=Qt(t),(t<16?"0":"")+t.toString(16)}function Kn(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ut(t,e,r,i)}function $a(t){if(t instanceof ut)return new ut(t.h,t.s,t.l,t.opacity);if(t instanceof Ke||(t=Be(t)),!t)return new ut;if(t instanceof ut)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),s=Math.max(e,r,i),a=NaN,o=s-n,h=(s+n)/2;return o?(e===s?a=(r-i)/o+(r<i)*6:r===s?a=(i-e)/o+2:a=(e-r)/o+4,o/=h<.5?s+n:2-s-n,a*=60):o=h>0&&h<1?0:a,new ut(a,o,h,t.opacity)}function $f(t,e,r,i){return arguments.length===1?$a(t):new ut(t,e,r,i??1)}function ut(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}on(ut,$f,Va(Ke,{brighter(t){return t=t==null?Er:Math.pow(Er,t),new ut(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Me:Math.pow(Me,t),new ut(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new Z(ni(t>=240?t-240:t+120,n,i),ni(t,n,i),ni(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new ut(Zn(this.h),ir(this.s),ir(this.l),Ir(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ir(this.opacity);return`${t===1?"hsl(":"hsla("}${Zn(this.h)}, ${ir(this.s)*100}%, ${ir(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Zn(t){return t=(t||0)%360,t<0?t+360:t}function ir(t){return Math.max(0,Math.min(1,t||0))}function ni(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const za=t=>()=>t;function zf(t,e){return function(r){return t+r*e}}function jf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function Yf(t){return(t=+t)==1?ja:function(e,r){return r-e?jf(e,r,t):za(isNaN(e)?r:e)}}function ja(t,e){var r=e-t;return r?zf(t,r):za(isNaN(t)?e:t)}const Jn=function t(e){var r=Yf(e);function i(n,s){var a=r((n=Ri(n)).r,(s=Ri(s)).r),o=r(n.g,s.g),h=r(n.b,s.b),u=ja(n.opacity,s.opacity);return function(f){return n.r=a(f),n.g=o(f),n.b=h(f),n.opacity=u(f),n+""}}return i.gamma=t,i}(1);function Lt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,si=new RegExp(Ci.source,"g");function qf(t){return function(){return t}}function Wf(t){return function(e){return t(e)+""}}function Kf(t,e){var r=Ci.lastIndex=si.lastIndex=0,i,n,s,a=-1,o=[],h=[];for(t=t+"",e=e+"";(i=Ci.exec(t))&&(n=si.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,h.push({i:a,x:Lt(i,n)})),r=si.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?h[0]?Wf(h[0].x):qf(e):(e=h.length,function(u){for(var f=0,l;f<e;++f)o[(l=h[f]).i]=l.x(u);return o.join("")})}var Qn=180/Math.PI,Ni={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ya(t,e,r,i,n,s){var a,o,h;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(h=t*r+e*i)&&(r-=t*h,i-=e*h),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,h/=o),t*i<e*r&&(t=-t,e=-e,h=-h,a=-a),{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Qn,skewX:Math.atan(h)*Qn,scaleX:a,scaleY:o}}var nr;function Zf(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ni:Ya(e.a,e.b,e.c,e.d,e.e,e.f)}function Jf(t){return t==null||(nr||(nr=document.createElementNS("http://www.w3.org/2000/svg","g")),nr.setAttribute("transform",t),!(t=nr.transform.baseVal.consolidate()))?Ni:(t=t.matrix,Ya(t.a,t.b,t.c,t.d,t.e,t.f))}function qa(t,e,r,i){function n(u){return u.length?u.pop()+" ":""}function s(u,f,l,c,d,p){if(u!==l||f!==c){var _=d.push("translate(",null,e,null,r);p.push({i:_-4,x:Lt(u,l)},{i:_-2,x:Lt(f,c)})}else(l||c)&&d.push("translate("+l+e+c+r)}function a(u,f,l,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:l.push(n(l)+"rotate(",null,i)-2,x:Lt(u,f)})):f&&l.push(n(l)+"rotate("+f+i)}function o(u,f,l,c){u!==f?c.push({i:l.push(n(l)+"skewX(",null,i)-2,x:Lt(u,f)}):f&&l.push(n(l)+"skewX("+f+i)}function h(u,f,l,c,d,p){if(u!==l||f!==c){var _=d.push(n(d)+"scale(",null,",",null,")");p.push({i:_-4,x:Lt(u,l)},{i:_-2,x:Lt(f,c)})}else(l!==1||c!==1)&&d.push(n(d)+"scale("+l+","+c+")")}return function(u,f){var l=[],c=[];return u=t(u),f=t(f),s(u.translateX,u.translateY,f.translateX,f.translateY,l,c),a(u.rotate,f.rotate,l,c),o(u.skewX,f.skewX,l,c),h(u.scaleX,u.scaleY,f.scaleX,f.scaleY,l,c),u=f=null,function(d){for(var p=-1,_=c.length,v;++p<_;)l[(v=c[p]).i]=v.x(d);return l.join("")}}}var Qf=qa(Zf,"px, ","px)","deg)"),tl=qa(Jf,", ",")",")"),_e=0,Ne=0,Te=0,Wa=1e3,Ar,Oe,Rr=0,re=0,kr=0,Ge=typeof performance=="object"&&performance.now?performance:Date,Ka=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hn(){return re||(Ka(el),re=Ge.now()+kr)}function el(){re=0}function Cr(){this._call=this._time=this._next=null}Cr.prototype=Za.prototype={constructor:Cr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?hn():+r)+(e==null?0:+e),!this._next&&Oe!==this&&(Oe?Oe._next=this:Ar=this,Oe=this),this._call=t,this._time=r,Oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oi())}};function Za(t,e,r){var i=new Cr;return i.restart(t,e,r),i}function rl(){hn(),++_e;for(var t=Ar,e;t;)(e=re-t._time)>=0&&t._call.call(void 0,e),t=t._next;--_e}function ts(){re=(Rr=Ge.now())+kr,_e=Ne=0;try{rl()}finally{_e=0,nl(),re=0}}function il(){var t=Ge.now(),e=t-Rr;e>Wa&&(kr-=e,Rr=t)}function nl(){for(var t,e=Ar,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Ar=r);Oe=t,Oi(i)}function Oi(t){if(!_e){Ne&&(Ne=clearTimeout(Ne));var e=t-re;e>24?(t<1/0&&(Ne=setTimeout(ts,t-Ge.now()-kr)),Te&&(Te=clearInterval(Te))):(Te||(Rr=Ge.now(),Te=setInterval(il,Wa)),_e=1,Ka(ts))}}function es(t,e,r){var i=new Cr;return e=e==null?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,r),i}var sl=Sa("start","end","cancel","interrupt"),al=[],Ja=0,rs=1,Si=2,xr=3,is=4,Pi=5,br=6;function Dr(t,e,r,i,n,s){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;ol(t,r,{name:e,index:i,group:n,on:sl,tween:al,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ja})}function un(t,e){var r=pt(t,e);if(r.state>Ja)throw new Error("too late; already scheduled");return r}function Tt(t,e){var r=pt(t,e);if(r.state>xr)throw new Error("too late; already running");return r}function pt(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ol(t,e,r){var i=t.__transition,n;i[e]=r,r.timer=Za(s,0,r.time);function s(u){r.state=rs,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var f,l,c,d;if(r.state!==rs)return h();for(f in i)if(d=i[f],d.name===r.name){if(d.state===xr)return es(a);d.state===is?(d.state=br,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[f]):+f<e&&(d.state=br,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[f])}if(es(function(){r.state===xr&&(r.state=is,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=Si,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Si){for(r.state=xr,n=new Array(c=r.tween.length),f=0,l=-1;f<c;++f)(d=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(n[++l]=d);n.length=l+1}}function o(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(h),r.state=Pi,1),l=-1,c=n.length;++l<c;)n[l].call(t,f);r.state===Pi&&(r.on.call("end",t,t.__data__,r.index,r.group),h())}function h(){r.state=br,r.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function hl(t,e){var r=t.__transition,i,n,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){s=!1;continue}n=i.state>Si&&i.state<Pi,i.state=br,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[a]}s&&delete t.__transition}}function ul(t){return this.each(function(){hl(this,t)})}function fl(t,e){var r,i;return function(){var n=Tt(this,t),s=n.tween;if(s!==r){i=r=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}n.tween=i}}function ll(t,e,r){var i,n;if(typeof r!="function")throw new Error;return function(){var s=Tt(this,t),a=s.tween;if(a!==i){n=(i=a).slice();for(var o={name:e,value:r},h=0,u=n.length;h<u;++h)if(n[h].name===e){n[h]=o;break}h===u&&n.push(o)}s.tween=n}}function cl(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=pt(this.node(),r).tween,n=0,s=i.length,a;n<s;++n)if((a=i[n]).name===t)return a.value;return null}return this.each((e==null?fl:ll)(r,t,e))}function fn(t,e,r){var i=t._id;return t.each(function(){var n=Tt(this,i);(n.value||(n.value={}))[e]=r.apply(this,arguments)}),function(n){return pt(n,i).value[e]}}function Qa(t,e){var r;return(typeof e=="number"?Lt:e instanceof Be?Jn:(r=Be(e))?(e=r,Jn):Kf)(t,e)}function dl(t){return function(){this.removeAttribute(t)}}function pl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vl(t,e,r){var i,n=r+"",s;return function(){var a=this.getAttribute(t);return a===n?null:a===i?s:s=e(i=a,r)}}function _l(t,e,r){var i,n=r+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===i?s:s=e(i=a,r)}}function yl(t,e,r){var i,n,s;return function(){var a,o=r(this),h;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),h=o+"",a===h?null:a===i&&h===n?s:(n=h,s=e(i=a,o)))}}function ml(t,e,r){var i,n,s;return function(){var a,o=r(this),h;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),h=o+"",a===h?null:a===i&&h===n?s:(n=h,s=e(i=a,o)))}}function gl(t,e){var r=Gr(t),i=r==="transform"?tl:Qa;return this.attrTween(t,typeof e=="function"?(r.local?ml:yl)(r,i,fn(this,"attr."+t,e)):e==null?(r.local?pl:dl)(r):(r.local?_l:vl)(r,i,e))}function xl(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function bl(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Tl(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&bl(t,s)),r}return n._value=e,n}function wl(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&xl(t,s)),r}return n._value=e,n}function El(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Gr(t);return this.tween(r,(i.local?Tl:wl)(i,e))}function Il(t,e){return function(){un(this,t).delay=+e.apply(this,arguments)}}function Al(t,e){return e=+e,function(){un(this,t).delay=e}}function Rl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Il:Al)(e,t)):pt(this.node(),e).delay}function Cl(t,e){return function(){Tt(this,t).duration=+e.apply(this,arguments)}}function Nl(t,e){return e=+e,function(){Tt(this,t).duration=e}}function Ol(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Cl:Nl)(e,t)):pt(this.node(),e).duration}function Sl(t,e){if(typeof e!="function")throw new Error;return function(){Tt(this,t).ease=e}}function Pl(t){var e=this._id;return arguments.length?this.each(Sl(e,t)):pt(this.node(),e).ease}function Fl(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Tt(this,t).ease=r}}function Ul(t){if(typeof t!="function")throw new Error;return this.each(Fl(this._id,t))}function Ml(t){typeof t!="function"&&(t=Ua(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],a=s.length,o=i[n]=[],h,u=0;u<a;++u)(h=s[u])&&t.call(h,h.__data__,u,s)&&o.push(h);return new St(i,this._parents,this._name,this._id)}function Ll(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,s=Math.min(i,n),a=new Array(i),o=0;o<s;++o)for(var h=e[o],u=r[o],f=h.length,l=a[o]=new Array(f),c,d=0;d<f;++d)(c=h[d]||u[d])&&(l[d]=c);for(;o<i;++o)a[o]=e[o];return new St(a,this._parents,this._name,this._id)}function Bl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Gl(t,e,r){var i,n,s=Bl(e)?un:Tt;return function(){var a=s(this,t),o=a.on;o!==i&&(n=(i=o).copy()).on(e,r),a.on=n}}function kl(t,e){var r=this._id;return arguments.length<2?pt(this.node(),r).on.on(t):this.each(Gl(r,t,e))}function Dl(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Xl(){return this.on("end.remove",Dl(this._id))}function Hl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=sn(t));for(var i=this._groups,n=i.length,s=new Array(n),a=0;a<n;++a)for(var o=i[a],h=o.length,u=s[a]=new Array(h),f,l,c=0;c<h;++c)(f=o[c])&&(l=t.call(f,f.__data__,c,o))&&("__data__"in f&&(l.__data__=f.__data__),u[c]=l,Dr(u[c],e,r,c,u,pt(f,r)));return new St(s,this._parents,e,r)}function Vl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Fa(t));for(var i=this._groups,n=i.length,s=[],a=[],o=0;o<n;++o)for(var h=i[o],u=h.length,f,l=0;l<u;++l)if(f=h[l]){for(var c=t.call(f,f.__data__,l,h),d,p=pt(f,r),_=0,v=c.length;_<v;++_)(d=c[_])&&Dr(d,e,r,_,c,p);s.push(c),a.push(f)}return new St(s,a,e,r)}var $l=We.prototype.constructor;function zl(){return new $l(this._groups,this._parents)}function jl(t,e){var r,i,n;return function(){var s=ve(this,t),a=(this.style.removeProperty(t),ve(this,t));return s===a?null:s===r&&a===i?n:n=e(r=s,i=a)}}function to(t){return function(){this.style.removeProperty(t)}}function Yl(t,e,r){var i,n=r+"",s;return function(){var a=ve(this,t);return a===n?null:a===i?s:s=e(i=a,r)}}function ql(t,e,r){var i,n,s;return function(){var a=ve(this,t),o=r(this),h=o+"";return o==null&&(h=o=(this.style.removeProperty(t),ve(this,t))),a===h?null:a===i&&h===n?s:(n=h,s=e(i=a,o))}}function Wl(t,e){var r,i,n,s="style."+e,a="end."+s,o;return function(){var h=Tt(this,t),u=h.on,f=h.value[s]==null?o||(o=to(e)):void 0;(u!==r||n!==f)&&(i=(r=u).copy()).on(a,n=f),h.on=i}}function Kl(t,e,r){var i=(t+="")=="transform"?Qf:Qa;return e==null?this.styleTween(t,jl(t,i)).on("end.style."+t,to(t)):typeof e=="function"?this.styleTween(t,ql(t,i,fn(this,"style."+t,e))).each(Wl(this._id,t)):this.styleTween(t,Yl(t,i,e),r).on("end.style."+t,null)}function Zl(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function Jl(t,e,r){var i,n;function s(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&Zl(t,a,r)),i}return s._value=e,s}function Ql(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Jl(t,e,r??""))}function tc(t){return function(){this.textContent=t}}function ec(t){return function(){var e=t(this);this.textContent=e??""}}function rc(t){return this.tween("text",typeof t=="function"?ec(fn(this,"text",t)):tc(t==null?"":t+""))}function ic(t){return function(e){this.textContent=t.call(this,e)}}function nc(t){var e,r;function i(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&ic(n)),e}return i._value=t,i}function sc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,nc(t))}function ac(){for(var t=this._name,e=this._id,r=eo(),i=this._groups,n=i.length,s=0;s<n;++s)for(var a=i[s],o=a.length,h,u=0;u<o;++u)if(h=a[u]){var f=pt(h,e);Dr(h,t,r,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new St(i,this._parents,t,r)}function oc(){var t,e,r=this,i=r._id,n=r.size();return new Promise(function(s,a){var o={value:a},h={value:function(){--n===0&&s()}};r.each(function(){var u=Tt(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(h)),u.on=e}),n===0&&s()})}var hc=0;function St(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function eo(){return++hc}var It=We.prototype;St.prototype={constructor:St,select:Hl,selectAll:Vl,selectChild:It.selectChild,selectChildren:It.selectChildren,filter:Ml,merge:Ll,selection:zl,transition:ac,call:It.call,nodes:It.nodes,node:It.node,size:It.size,empty:It.empty,each:It.each,on:kl,attr:gl,attrTween:El,style:Kl,styleTween:Ql,text:rc,textTween:sc,remove:Xl,tween:cl,delay:Rl,duration:Ol,ease:Pl,easeVarying:Ul,end:oc,[Symbol.iterator]:It[Symbol.iterator]};function $x(t){return t*t*t}function zx(t){return--t*t*t+1}function uc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var fc={time:null,delay:0,duration:250,ease:uc};function lc(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function cc(t){var e,r;t instanceof St?(e=t._id,t=t._name):(e=eo(),(r=fc).time=hn(),t=t==null?null:t+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var a=i[s],o=a.length,h,u=0;u<o;++u)(h=a[u])&&Dr(h,t,e,u,a,r||lc(h,e));return new St(i,this._parents,t,e)}We.prototype.interrupt=ul;We.prototype.transition=cc;function ue(t,e,r){this.k=t,this.x=e,this.y=r}ue.prototype={constructor:ue,scale:function(t){return t===1?this:new ue(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ue(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jx=new ue(1,0,0);ue.prototype;/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xt;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(xt||(xt={}));var ye;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ye||(ye={}));var ke;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ke||(ke={}));var w;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(w||(w={}));var me;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(me||(me={}));var x;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(x||(x={}));var kt;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(kt||(kt={}));var R;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(R||(R={}));var De;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(De||(De={}));var yt;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(yt||(yt={}));var Nr;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Nr||(Nr={}));var Dt;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Dt||(Dt={}));var Pt;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Pt||(Pt={}));var Rt;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Rt||(Rt={}));var Or;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Or||(Or={}));var ft;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ft||(ft={}));var q;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(q||(q={}));var L;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(L||(L={}));var lt;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(lt||(lt={}));/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ro=Math.PI*2,io=180/Math.PI,no=Math.PI/180,Xt;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(Xt||(Xt={}));var N=function(){function t(e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(n),this.type=Xt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=n,this.height=Math.max(s-n,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*e)/e,n=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=n,this.height=s-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),dc=function(){function t(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.radius=i,this.type=Xt.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-e,s=this.y-r;return n*=n,s*=s,n+s<=i},t.prototype.getBounds=function(){return new N(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),pc=function(){function t(e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=e,this.y=r,this.width=i,this.height=n,this.type=Xt.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,n=(r-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new N(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),vc=function(){function t(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=Array.isArray(r[0])?r[0]:r;if(typeof n[0]!="number"){for(var s=[],a=0,o=n.length;a<o;a++)s.push(n[a].x,n[a].y);n=s}this.points=n,this.type=Xt.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var i=!1,n=this.points.length/2,s=0,a=n-1;s<n;a=s++){var o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],f=this.points[a*2+1],l=h>r!=f>r&&e<(u-o)*((r-h)/(f-h))+o;l&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),_c=function(){function t(e,r,i,n,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=e,this.y=r,this.width=i,this.height=n,this.radius=s,this.type=Xt.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){if(r>=this.y+this.radius&&r<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),n=r-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s||(i=e-(this.x+this.width-this.radius),i*i+n*n<=s)||(n=r-(this.y+this.height-this.radius),i*i+n*n<=s)||(i=e-(this.x+this.radius),i*i+n*n<=s))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),mt=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),fe=function(){function t(e,r,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),tt=function(){function t(e,r,i,n,s,a){e===void 0&&(e=1),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=e,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=a}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,i,n,s,a){return this.a=e,this.b=r,this.c=i,this.d=n,this.tx=s,this.ty=a,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(e,r){r=r||new mt;var i=e.x,n=e.y;return r.x=this.a*i+this.c*n+this.tx,r.y=this.b*i+this.d*n+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new mt;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return r.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,a=this.tx;return this.a=n*r-this.b*i,this.b=n*i+this.b*r,this.c=s*r-this.d*i,this.d=s*i+this.d*r,this.tx=a*r-this.ty*i,this.ty=a*i+this.ty*r,this},t.prototype.append=function(e){var r=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*r+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*r+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*r+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this},t.prototype.setTransform=function(e,r,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=e-(i*this.a+n*this.c),this.ty=r-(i*this.b+n*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,i=this.b,n=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,r),u=Math.abs(o+h);return u<1e-5||Math.abs(ro-u)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=h),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(a.x*r+a.y*n),e.position.y=this.ty+(a.x*i+a.y*s),e},t.prototype.invert=function(){var e=this.a,r=this.b,i=this.c,n=this.d,s=this.tx,a=e*n-r*i;return this.a=n/a,this.b=-r/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(e*this.ty-r*s)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),qt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Wt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Kt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Zt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Fi=[],so=[],sr=Math.sign;function yc(){for(var t=0;t<16;t++){var e=[];Fi.push(e);for(var r=0;r<16;r++)for(var i=sr(qt[t]*qt[r]+Kt[t]*Wt[r]),n=sr(Wt[t]*qt[r]+Zt[t]*Wt[r]),s=sr(qt[t]*Kt[r]+Kt[t]*Zt[r]),a=sr(Wt[t]*Kt[r]+Zt[t]*Zt[r]),o=0;o<16;o++)if(qt[o]===i&&Wt[o]===n&&Kt[o]===s&&Zt[o]===a){e.push(o);break}}for(var t=0;t<16;t++){var h=new tt;h.set(qt[t],Wt[t],Kt[t],Zt[t],0,0),so.push(h)}}yc();var P={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return qt[t]},uY:function(t){return Wt[t]},vX:function(t){return Kt[t]},vY:function(t){return Zt[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return Fi[t][e]},sub:function(t,e){return Fi[t][P.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?P.S:P.N:Math.abs(e)*2<=Math.abs(t)?t>0?P.E:P.W:e>0?t>0?P.SE:P.SW:t>0?P.NE:P.NW},matrixAppendRotationInv:function(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var n=so[P.inv(e)];n.tx=r,n.ty=i,t.append(n)}},ao=function(){function t(){this.worldTransform=new tt,this.localTransform=new tt,this.position=new fe(this.onChange,this,0,0),this.scale=new fe(this.onChange,this,1,1),this.pivot=new fe(this.onChange,this,0,0),this.skew=new fe(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,n=this.worldTransform;n.a=r.a*i.a+r.b*i.c,n.b=r.a*i.b+r.b*i.d,n.c=r.c*i.a+r.d*i.c,n.d=r.c*i.b+r.d*i.d,n.tx=r.tx*i.a+r.ty*i.c+i.tx,n.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/runner - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var X=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,i,n,s,a,o,h){if(arguments.length>8)throw new Error("max arguments reached");var u=this,f=u.name,l=u.items;this._aliasCount++;for(var c=0,d=l.length;c<d;c++)l[c][f](e,r,i,n,s,a,o,h);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(X.prototype,{dispatch:{value:X.prototype.emit},run:{value:X.prototype.emit}});var ai=/iPhone/i,ns=/iPod/i,ss=/iPad/i,as=/\biOS-universal(?:.+)Mac\b/i,oi=/\bAndroid(?:.+)Mobile\b/i,os=/Android/i,he=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ar=/Silk/i,At=/Windows Phone/i,hs=/\bWindows(?:.+)ARM\b/i,us=/BlackBerry/i,fs=/BB10/i,ls=/Opera Mini/i,cs=/\b(CriOS|Chrome)(?:.+)Mobile/i,ds=/Mobile(?:.+)Firefox\b/i,ps=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function mc(t){return function(e){return e.test(t)}}function gc(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var n=mc(r),s={apple:{phone:n(ai)&&!n(At),ipod:n(ns),tablet:!n(ai)&&(n(ss)||ps(e))&&!n(At),universal:n(as),device:(n(ai)||n(ns)||n(ss)||n(as)||ps(e))&&!n(At)},amazon:{phone:n(he),tablet:!n(he)&&n(ar),device:n(he)||n(ar)},android:{phone:!n(At)&&n(he)||!n(At)&&n(oi),tablet:!n(At)&&!n(he)&&!n(oi)&&(n(ar)||n(os)),device:!n(At)&&(n(he)||n(ar)||n(oi)||n(os))||n(/\bokhttp\b/i)},windows:{phone:n(At),tablet:n(hs),device:n(At)||n(hs)},other:{blackberry:n(us),blackberry10:n(fs),opera:n(ls),firefox:n(ds),chrome:n(cs),device:n(us)||n(fs)||n(ls)||n(ds)||n(cs)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}/*!
 * @pixi/settings - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ot=gc(self.navigator);function xc(t){var e=!0;if(Ot.tablet||Ot.phone){if(Ot.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(Ot.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}function bc(){return!Ot.apple.device}/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vs;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(vs||(vs={}));var _s;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(_s||(_s={}));var ys;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ys||(ys={}));var ms;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ms||(ms={}));var gs;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(gs||(gs={}));var xs;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(xs||(xs={}));var bs;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(bs||(bs={}));var Ts;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Ts||(Ts={}));var ws;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(ws||(ws={}));var Ui;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Ui||(Ui={}));var Mi;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Mi||(Mi={}));var Li;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Li||(Li={}));var Es;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Es||(Es={}));var Is;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Is||(Is={}));var Bi;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Bi||(Bi={}));var Pe;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Pe||(Pe={}));var As;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(As||(As={}));var Gi;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Gi||(Gi={}));var Rs;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Rs||(Rs={}));var E={MIPMAP_TEXTURES:Li.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Gi.NONE,SPRITE_MAX_TEXTURES:xc(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Bi.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Mi.CLAMP,SCALE_MODE:Ui.LINEAR,PRECISION_VERTEX:Pe.HIGH,PRECISION_FRAGMENT:Ot.apple.device?Pe.HIGH:Pe.MEDIUM,CAN_UPLOAD_SAME_BUFFER:bc(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */E.TARGET_FPMS=.06;var ge;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(ge||(ge={}));var hi=function(){function t(e,r,i,n){r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=n}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),Ct=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new hi(null,null,1/0),this.deltaMS=1/E.TARGET_FPMS,this.elapsedMS=1/E.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,i){return i===void 0&&(i=ge.NORMAL),this._addListener(new hi(e,r,i))},t.prototype.addOnce=function(e,r,i){return i===void 0&&(i=ge.NORMAL),this._addListener(new hi(e,r,i,!0))},t.prototype._addListener=function(e){var r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var i=this._head.next;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*E.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,E.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),oo=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,ge.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ct.shared:new Ct,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t}(),ho={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function n(h,u,f){this.fn=h,this.context=u,this.once=f||!1}function s(h,u,f,l,c){if(typeof f!="function")throw new TypeError("The listener must be a function");var d=new n(f,l||h,c),p=r?r+u:u;return h._events[p]?h._events[p].fn?h._events[p]=[h._events[p],d]:h._events[p].push(d):(h._events[p]=d,h._eventsCount++),h}function a(h,u){--h._eventsCount===0?h._events=new i:delete h._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,l;if(this._eventsCount===0)return u;for(l in f=this._events)e.call(f,l)&&u.push(r?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=r?r+u:u,l=this._events[f];if(!l)return[];if(l.fn)return[l.fn];for(var c=0,d=l.length,p=new Array(d);c<d;c++)p[c]=l[c].fn;return p},o.prototype.listenerCount=function(u){var f=r?r+u:u,l=this._events[f];return l?l.fn?1:l.length:0},o.prototype.emit=function(u,f,l,c,d,p){var _=r?r+u:u;if(!this._events[_])return!1;var v=this._events[_],m=arguments.length,y,g;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,l),!0;case 4:return v.fn.call(v.context,f,l,c),!0;case 5:return v.fn.call(v.context,f,l,c,d),!0;case 6:return v.fn.call(v.context,f,l,c,d,p),!0}for(g=1,y=new Array(m-1);g<m;g++)y[g-1]=arguments[g];v.fn.apply(v.context,y)}else{var A=v.length,T;for(g=0;g<A;g++)switch(v[g].once&&this.removeListener(u,v[g].fn,void 0,!0),m){case 1:v[g].fn.call(v[g].context);break;case 2:v[g].fn.call(v[g].context,f);break;case 3:v[g].fn.call(v[g].context,f,l);break;case 4:v[g].fn.call(v[g].context,f,l,c);break;default:if(!y)for(T=1,y=new Array(m-1);T<m;T++)y[T-1]=arguments[T];v[g].fn.apply(v[g].context,y)}}return!0},o.prototype.on=function(u,f,l){return s(this,u,f,l,!1)},o.prototype.once=function(u,f,l){return s(this,u,f,l,!0)},o.prototype.removeListener=function(u,f,l,c){var d=r?r+u:u;if(!this._events[d])return this;if(!f)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===f&&(!c||p.once)&&(!l||p.context===l)&&a(this,d);else{for(var _=0,v=[],m=p.length;_<m;_++)(p[_].fn!==f||c&&!p[_].once||l&&p[_].context!==l)&&v.push(p[_]);v.length?this._events[d]=v.length===1?v[0]:v:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(ho);var Tc=ho.exports;const Ze=be(Tc);var ln={exports:{}};ln.exports=Xr;ln.exports.default=Xr;function Xr(t,e,r){r=r||2;var i=e&&e.length,n=i?e[0]*r:t.length,s=uo(t,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;var o,h,u,f,l,c,d;if(i&&(s=Rc(t,e,s,r)),t.length>80*r){o=u=t[0],h=f=t[1];for(var p=r;p<n;p+=r)l=t[p],c=t[p+1],l<o&&(o=l),c<h&&(h=c),l>u&&(u=l),c>f&&(f=c);d=Math.max(u-o,f-h),d=d!==0?1/d:0}return Xe(s,a,r,o,h,d),a}function uo(t,e,r,i,n){var s,a;if(n===Xi(t,e,r,i)>0)for(s=e;s<r;s+=i)a=Cs(s,t[s],t[s+1],a);else for(s=r-i;s>=e;s-=i)a=Cs(s,t[s],t[s+1],a);return a&&Hr(a,a.next)&&(Ve(a),a=a.next),a}function Ht(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(Hr(r,r.next)||U(r.prev,r,r.next)===0)){if(Ve(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function Xe(t,e,r,i,n,s,a){if(t){!a&&s&&Pc(t,i,n,s);for(var o=t,h,u;t.prev!==t.next;){if(h=t.prev,u=t.next,s?Ec(t,i,n,s):wc(t)){e.push(h.i/r),e.push(t.i/r),e.push(u.i/r),Ve(t),t=u.next,o=u.next;continue}if(t=u,t===o){a?a===1?(t=Ic(Ht(t),e,r),Xe(t,e,r,i,n,s,2)):a===2&&Ac(t,e,r,i,n,s):Xe(Ht(t),e,r,i,n,s,1);break}}}}function wc(t){var e=t.prev,r=t,i=t.next;if(U(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(le(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&U(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Ec(t,e,r,i){var n=t.prev,s=t,a=t.next;if(U(n,s,a)>=0)return!1;for(var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,h=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,u=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,f=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,l=ki(o,h,e,r,i),c=ki(u,f,e,r,i),d=t.prevZ,p=t.nextZ;d&&d.z>=l&&p&&p.z<=c;){if(d!==t.prev&&d!==t.next&&le(n.x,n.y,s.x,s.y,a.x,a.y,d.x,d.y)&&U(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&le(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&U(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&le(n.x,n.y,s.x,s.y,a.x,a.y,d.x,d.y)&&U(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&le(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&U(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ic(t,e,r){var i=t;do{var n=i.prev,s=i.next.next;!Hr(n,s)&&fo(n,i,i.next,s)&&He(n,s)&&He(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),Ve(i),Ve(i.next),i=t=s),i=i.next}while(i!==t);return Ht(i)}function Ac(t,e,r,i,n,s){var a=t;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Mc(a,o)){var h=lo(a,o);a=Ht(a,a.next),h=Ht(h,h.next),Xe(a,e,r,i,n,s),Xe(h,e,r,i,n,s);return}o=o.next}a=a.next}while(a!==t)}function Rc(t,e,r,i){var n=[],s,a,o,h,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,h=s<a-1?e[s+1]*i:t.length,u=uo(t,o,h,i,!1),u===u.next&&(u.steiner=!0),n.push(Uc(u));for(n.sort(Cc),s=0;s<n.length;s++)r=Nc(n[s],r),r=Ht(r,r.next);return r}function Cc(t,e){return t.x-e.x}function Nc(t,e){var r=Oc(t,e);if(!r)return e;var i=lo(r,t),n=Ht(r,r.next);return Ht(i,i.next),e===r?n:e}function Oc(t,e){var r=e,i=t.x,n=t.y,s=-1/0,a;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var o=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>s){if(s=o,o===i){if(n===r.y)return r;if(n===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!a)return null;if(i===s)return a;var h=a,u=a.x,f=a.y,l=1/0,c;r=a;do i>=r.x&&r.x>=u&&i!==r.x&&le(n<f?i:s,n,u,f,n<f?s:i,n,r.x,r.y)&&(c=Math.abs(n-r.y)/(i-r.x),He(r,t)&&(c<l||c===l&&(r.x>a.x||r.x===a.x&&Sc(a,r)))&&(a=r,l=c)),r=r.next;while(r!==h);return a}function Sc(t,e){return U(t.prev,t,e.prev)<0&&U(e.next,t,t.next)<0}function Pc(t,e,r,i){var n=t;do n.z===null&&(n.z=ki(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,Fc(n)}function Fc(t){var e,r,i,n,s,a,o,h,u=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,i=r,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(h=u;o>0||h>0&&i;)o!==0&&(h===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}s.nextZ=null,u*=2}while(a>1);return t}function ki(t,e,r,i,n){return t=32767*(t-r)*n,e=32767*(e-i)*n,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Uc(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function le(t,e,r,i,n,s,a,o){return(n-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(i-o)-(r-a)*(e-o)>=0&&(r-a)*(s-o)-(n-a)*(i-o)>=0}function Mc(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Lc(t,e)&&(He(t,e)&&He(e,t)&&Bc(t,e)&&(U(t.prev,t,e.prev)||U(t,e.prev,e))||Hr(t,e)&&U(t.prev,t,t.next)>0&&U(e.prev,e,e.next)>0)}function U(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Hr(t,e){return t.x===e.x&&t.y===e.y}function fo(t,e,r,i){var n=hr(U(t,e,r)),s=hr(U(t,e,i)),a=hr(U(r,i,t)),o=hr(U(r,i,e));return!!(n!==s&&a!==o||n===0&&or(t,r,e)||s===0&&or(t,i,e)||a===0&&or(r,t,i)||o===0&&or(r,e,i))}function or(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function hr(t){return t>0?1:t<0?-1:0}function Lc(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&fo(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function He(t,e){return U(t.prev,t,t.next)<0?U(t,e,t.next)>=0&&U(t,t.prev,e)>=0:U(t,e,t.prev)<0||U(t,t.next,e)<0}function Bc(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function lo(t,e){var r=new Di(t.i,t.x,t.y),i=new Di(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function Cs(t,e,r,i){var n=new Di(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Ve(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Di(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Xr.deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,a=Math.abs(Xi(t,0,s,r));if(n)for(var o=0,h=e.length;o<h;o++){var u=e[o]*r,f=o<h-1?e[o+1]*r:t.length;a-=Math.abs(Xi(t,u,f,r))}var l=0;for(o=0;o<i.length;o+=3){var c=i[o]*r,d=i[o+1]*r,p=i[o+2]*r;l+=Math.abs((t[c]-t[p])*(t[d+1]-t[c+1])-(t[c]-t[d])*(t[p+1]-t[c+1]))}return a===0&&l===0?0:Math.abs((l-a)/a)};function Xi(t,e,r,i){for(var n=0,s=e,a=r-i;s<r;s+=i)n+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return n}Xr.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var a=0;a<e;a++)r.vertices.push(t[n][s][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r};var Gc=ln.exports;const kc=be(Gc);var Sr={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */Sr.exports;(function(t,e){(function(r){var i=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,s=typeof ii=="object"&&ii;(s.global===s||s.window===s||s.self===s)&&(r=s);var a,o=2147483647,h=36,u=1,f=26,l=38,c=700,d=72,p=128,_="-",v=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=h-u,T=Math.floor,S=String.fromCharCode,V;function B(b){throw RangeError(g[b])}function $(b,I){for(var C=b.length,F=[];C--;)F[C]=I(b[C]);return F}function wt(b,I){var C=b.split("@"),F="";C.length>1&&(F=C[0]+"@",b=C[1]),b=b.replace(y,".");var M=b.split("."),j=$(M,I).join(".");return F+j}function se(b){for(var I=[],C=0,F=b.length,M,j;C<F;)M=b.charCodeAt(C++),M>=55296&&M<=56319&&C<F?(j=b.charCodeAt(C++),(j&64512)==56320?I.push(((M&1023)<<10)+(j&1023)+65536):(I.push(M),C--)):I.push(M);return I}function tr(b){return $(b,function(I){var C="";return I>65535&&(I-=65536,C+=S(I>>>10&1023|55296),I=56320|I&1023),C+=S(I),C}).join("")}function Vt(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:h}function ae(b,I){return b+22+75*(b<26)-((I!=0)<<5)}function oe(b,I,C){var F=0;for(b=C?T(b/c):b>>1,b+=T(b/I);b>A*f>>1;F+=h)b=T(b/A);return T(F+(A+1)*b/(b+l))}function $t(b){var I=[],C=b.length,F,M=0,j=p,D=d,J,ot,vt,Et,z,et,ht,Mt,zt;for(J=b.lastIndexOf(_),J<0&&(J=0),ot=0;ot<J;++ot)b.charCodeAt(ot)>=128&&B("not-basic"),I.push(b.charCodeAt(ot));for(vt=J>0?J+1:0;vt<C;){for(Et=M,z=1,et=h;vt>=C&&B("invalid-input"),ht=Vt(b.charCodeAt(vt++)),(ht>=h||ht>T((o-M)/z))&&B("overflow"),M+=ht*z,Mt=et<=D?u:et>=D+f?f:et-D,!(ht<Mt);et+=h)zt=h-Mt,z>T(o/zt)&&B("overflow"),z*=zt;F=I.length+1,D=oe(M-Et,F,Et==0),T(M/F)>o-j&&B("overflow"),j+=T(M/F),M%=F,I.splice(M++,0,j)}return tr(I)}function er(b){var I,C,F,M,j,D,J,ot,vt,Et,z,et=[],ht,Mt,zt,ri;for(b=se(b),ht=b.length,I=p,C=0,j=d,D=0;D<ht;++D)z=b[D],z<128&&et.push(S(z));for(F=M=et.length,M&&et.push(_);F<ht;){for(J=o,D=0;D<ht;++D)z=b[D],z>=I&&z<J&&(J=z);for(Mt=F+1,J-I>T((o-C)/Mt)&&B("overflow"),C+=(J-I)*Mt,I=J,D=0;D<ht;++D)if(z=b[D],z<I&&++C>o&&B("overflow"),z==I){for(ot=C,vt=h;Et=vt<=j?u:vt>=j+f?f:vt-j,!(ot<Et);vt+=h)ri=ot-Et,zt=h-Et,et.push(S(ae(Et+ri%zt,0))),ot=T(ri/zt);et.push(S(ae(ot,0))),j=oe(C,Mt,F==M),C=0,++F}++C,++I}return et.join("")}function Sh(b){return wt(b,function(I){return v.test(I)?$t(I.slice(4).toLowerCase()):I})}function Ph(b){return wt(b,function(I){return m.test(I)?"xn--"+er(I):I})}if(a={version:"1.3.2",ucs2:{decode:se,encode:tr},decode:$t,encode:er,toASCII:Ph,toUnicode:Sh},i&&n)if(t.exports==i)n.exports=a;else for(V in a)a.hasOwnProperty(V)&&(i[V]=a[V]);else r.punycode=a})(ii)})(Sr,Sr.exports);var Dc=Sr.exports,Xc={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},$e={};function Hc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Vc=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if(typeof t!="string"||t.length===0)return n;var s=/\+/g;t=t.split(e);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var o=t.length;a>0&&o>a&&(o=a);for(var h=0;h<o;++h){var u=t[h].replace(s,"%20"),f=u.indexOf(r),l,c,d,p;f>=0?(l=u.substr(0,f),c=u.substr(f+1)):(l=u,c=""),d=decodeURIComponent(l),p=decodeURIComponent(c),Hc(n,d)?Array.isArray(n[d])?n[d].push(p):n[d]=[n[d],p]:n[d]=p}return n},we=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},$c=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var s=encodeURIComponent(we(n))+r;return Array.isArray(t[n])?t[n].map(function(a){return s+encodeURIComponent(we(a))}).join(e):s+encodeURIComponent(we(t[n]))}).join(e):i?encodeURIComponent(we(i))+r+encodeURIComponent(we(t)):""};$e.decode=$e.parse=Vc;$e.encode=$e.stringify=$c;var zc=Dc,_t=Xc,jc=Vr,Yc=nd,qc=id;function ct(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Wc=/^([a-z0-9.+-]+:)/i,Kc=/:[0-9]*$/,Zc=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Jc=["<",">",'"',"`"," ","\r",`
`,"	"],Qc=["{","}","|","\\","^","`"].concat(Jc),Hi=["'"].concat(Qc),Ns=["%","/","?",";","#"].concat(Hi),Os=["/","?","#"],td=255,Ss=/^[+a-z0-9A-Z_-]{0,63}$/,ed=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rd={javascript:!0,"javascript:":!0},Vi={javascript:!0,"javascript:":!0},pe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},$i=$e;function Vr(t,e,r){if(t&&_t.isObject(t)&&t instanceof ct)return t;var i=new ct;return i.parse(t,e,r),i}ct.prototype.parse=function(t,e,r){if(!_t.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(n),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(n);var o=t;if(o=o.trim(),!r&&t.split("#").length===1){var h=Zc.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],e?this.query=$i.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=Wc.exec(o);if(u){u=u[0];var f=u.toLowerCase();this.protocol=f,o=o.substr(u.length)}if(r||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=o.substr(0,2)==="//";l&&!(u&&Vi[u])&&(o=o.substr(2),this.slashes=!0)}if(!Vi[u]&&(l||u&&!pe[u])){for(var c=-1,d=0;d<Os.length;d++){var p=o.indexOf(Os[d]);p!==-1&&(c===-1||p<c)&&(c=p)}var _,v;c===-1?v=o.lastIndexOf("@"):v=o.lastIndexOf("@",c),v!==-1&&(_=o.slice(0,v),o=o.slice(v+1),this.auth=decodeURIComponent(_)),c=-1;for(var d=0;d<Ns.length;d++){var p=o.indexOf(Ns[d]);p!==-1&&(c===-1||p<c)&&(c=p)}c===-1&&(c=o.length),this.host=o.slice(0,c),o=o.slice(c),this.parseHost(),this.hostname=this.hostname||"";var m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m)for(var y=this.hostname.split(/\./),d=0,g=y.length;d<g;d++){var A=y[d];if(A&&!A.match(Ss)){for(var T="",S=0,V=A.length;S<V;S++)A.charCodeAt(S)>127?T+="x":T+=A[S];if(!T.match(Ss)){var B=y.slice(0,d),$=y.slice(d+1),wt=A.match(ed);wt&&(B.push(wt[1]),$.unshift(wt[2])),$.length&&(o="/"+$.join(".")+o),this.hostname=B.join(".");break}}}this.hostname.length>td?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=zc.toASCII(this.hostname));var se=this.port?":"+this.port:"",tr=this.hostname||"";this.host=tr+se,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!rd[f])for(var d=0,g=Hi.length;d<g;d++){var Vt=Hi[d];if(o.indexOf(Vt)!==-1){var ae=encodeURIComponent(Vt);ae===Vt&&(ae=escape(Vt)),o=o.split(Vt).join(ae)}}var oe=o.indexOf("#");oe!==-1&&(this.hash=o.substr(oe),o=o.slice(0,oe));var $t=o.indexOf("?");if($t!==-1?(this.search=o.substr($t),this.query=o.substr($t+1),e&&(this.query=$i.parse(this.query)),o=o.slice(0,$t)):e&&(this.search="",this.query={}),o&&(this.pathname=o),pe[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var se=this.pathname||"",er=this.search||"";this.path=se+er}return this.href=this.format(),this};function id(t){return _t.isString(t)&&(t=Vr(t)),t instanceof ct?t.format():ct.prototype.format.call(t)}ct.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&_t.isObject(this.query)&&Object.keys(this.query).length&&(s=$i.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||pe[e])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),r=r.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+n+r+a+i};function nd(t,e){return Vr(t,!1,!0).resolve(e)}ct.prototype.resolve=function(t){return this.resolveObject(Vr(t,!1,!0)).format()};ct.prototype.resolveObject=function(t){if(_t.isString(t)){var e=new ct;e.parse(t,!1,!0),t=e}for(var r=new ct,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),o=0;o<a.length;o++){var h=a[o];h!=="protocol"&&(r[h]=t[h])}return pe[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!pe[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var l=u[f];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Vi[t.protocol]){for(var g=(t.pathname||"").split("/");g.length&&!(t.host=g.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var c=r.pathname||"",d=r.search||"";r.path=c+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",_=t.host||t.pathname&&t.pathname.charAt(0)==="/",v=_||p||r.host&&t.pathname,m=v,y=r.pathname&&r.pathname.split("/")||[],g=t.pathname&&t.pathname.split("/")||[],A=r.protocol&&!pe[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(g[0]===""?g[0]=t.host:g.unshift(t.host)),t.host=null),v=v&&(g[0]===""||y[0]==="")),_)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=g;else if(g.length)y||(y=[]),y.pop(),y=y.concat(g),r.search=t.search,r.query=t.query;else if(!_t.isNullOrUndefined(t.search)){if(A){r.hostname=r.host=y.shift();var T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return r.search=t.search,r.query=t.query,(!_t.isNull(r.pathname)||!_t.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=y.slice(-1)[0],V=(r.host||t.host||y.length>1)&&(S==="."||S==="..")||S==="",B=0,$=y.length;$>=0;$--)S=y[$],S==="."?y.splice($,1):S===".."?(y.splice($,1),B++):B&&(y.splice($,1),B--);if(!v&&!m)for(;B--;B)y.unshift("..");v&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),V&&y.join("/").substr(-1)!=="/"&&y.push("");var wt=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(A){r.hostname=r.host=wt?"":y.length?y.shift():"";var T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return v=v||r.host&&y.length,v&&!wt&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(!_t.isNull(r.pathname)||!_t.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};ct.prototype.parseHost=function(){var t=this.host,e=Kc.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * @pixi/utils - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ce={parse:jc,format:qc,resolve:Yc};E.RETINA_PREFIX=/@([0-9\.]+)x/;E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var zi=!1,Ps="6.1.2";function sd(){zi=!0}function co(t){var e;if(!zi){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+Ps+" - ✰ "+t+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,r)}else self.console&&self.console.log("PixiJS "+Ps+" - "+t+" - http://www.pixijs.com/");zi=!0}}var ui;function po(){return typeof ui>"u"&&(ui=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),ui}var ad="#f0f8ff",od="#faebd7",hd="#00ffff",ud="#7fffd4",fd="#f0ffff",ld="#f5f5dc",cd="#ffe4c4",dd="#000000",pd="#ffebcd",vd="#0000ff",_d="#8a2be2",yd="#a52a2a",md="#deb887",gd="#5f9ea0",xd="#7fff00",bd="#d2691e",Td="#ff7f50",wd="#6495ed",Ed="#fff8dc",Id="#dc143c",Ad="#00ffff",Rd="#00008b",Cd="#008b8b",Nd="#b8860b",Od="#a9a9a9",Sd="#006400",Pd="#a9a9a9",Fd="#bdb76b",Ud="#8b008b",Md="#556b2f",Ld="#ff8c00",Bd="#9932cc",Gd="#8b0000",kd="#e9967a",Dd="#8fbc8f",Xd="#483d8b",Hd="#2f4f4f",Vd="#2f4f4f",$d="#00ced1",zd="#9400d3",jd="#ff1493",Yd="#00bfff",qd="#696969",Wd="#696969",Kd="#1e90ff",Zd="#b22222",Jd="#fffaf0",Qd="#228b22",tp="#ff00ff",ep="#dcdcdc",rp="#f8f8ff",ip="#daa520",np="#ffd700",sp="#808080",ap="#008000",op="#adff2f",hp="#808080",up="#f0fff0",fp="#ff69b4",lp="#cd5c5c",cp="#4b0082",dp="#fffff0",pp="#f0e68c",vp="#fff0f5",_p="#e6e6fa",yp="#7cfc00",mp="#fffacd",gp="#add8e6",xp="#f08080",bp="#e0ffff",Tp="#fafad2",wp="#d3d3d3",Ep="#90ee90",Ip="#d3d3d3",Ap="#ffb6c1",Rp="#ffa07a",Cp="#20b2aa",Np="#87cefa",Op="#778899",Sp="#778899",Pp="#b0c4de",Fp="#ffffe0",Up="#00ff00",Mp="#32cd32",Lp="#faf0e6",Bp="#ff00ff",Gp="#800000",kp="#66cdaa",Dp="#0000cd",Xp="#ba55d3",Hp="#9370db",Vp="#3cb371",$p="#7b68ee",zp="#00fa9a",jp="#48d1cc",Yp="#c71585",qp="#191970",Wp="#f5fffa",Kp="#ffe4e1",Zp="#ffe4b5",Jp="#ffdead",Qp="#000080",tv="#fdf5e6",ev="#808000",rv="#6b8e23",iv="#ffa500",nv="#ff4500",sv="#da70d6",av="#eee8aa",ov="#98fb98",hv="#afeeee",uv="#db7093",fv="#ffefd5",lv="#ffdab9",cv="#cd853f",dv="#ffc0cb",pv="#dda0dd",vv="#b0e0e6",_v="#800080",yv="#663399",mv="#ff0000",gv="#bc8f8f",xv="#4169e1",bv="#8b4513",Tv="#fa8072",wv="#f4a460",Ev="#2e8b57",Iv="#fff5ee",Av="#a0522d",Rv="#c0c0c0",Cv="#87ceeb",Nv="#6a5acd",Ov="#708090",Sv="#708090",Pv="#fffafa",Fv="#00ff7f",Uv="#4682b4",Mv="#d2b48c",Lv="#008080",Bv="#d8bfd8",Gv="#ff6347",kv="#40e0d0",Dv="#ee82ee",Xv="#f5deb3",Hv="#ffffff",Vv="#f5f5f5",$v="#ffff00",zv="#9acd32",jv={aliceblue:ad,antiquewhite:od,aqua:hd,aquamarine:ud,azure:fd,beige:ld,bisque:cd,black:dd,blanchedalmond:pd,blue:vd,blueviolet:_d,brown:yd,burlywood:md,cadetblue:gd,chartreuse:xd,chocolate:bd,coral:Td,cornflowerblue:wd,cornsilk:Ed,crimson:Id,cyan:Ad,darkblue:Rd,darkcyan:Cd,darkgoldenrod:Nd,darkgray:Od,darkgreen:Sd,darkgrey:Pd,darkkhaki:Fd,darkmagenta:Ud,darkolivegreen:Md,darkorange:Ld,darkorchid:Bd,darkred:Gd,darksalmon:kd,darkseagreen:Dd,darkslateblue:Xd,darkslategray:Hd,darkslategrey:Vd,darkturquoise:$d,darkviolet:zd,deeppink:jd,deepskyblue:Yd,dimgray:qd,dimgrey:Wd,dodgerblue:Kd,firebrick:Zd,floralwhite:Jd,forestgreen:Qd,fuchsia:tp,gainsboro:ep,ghostwhite:rp,goldenrod:ip,gold:np,gray:sp,green:ap,greenyellow:op,grey:hp,honeydew:up,hotpink:fp,indianred:lp,indigo:cp,ivory:dp,khaki:pp,lavenderblush:vp,lavender:_p,lawngreen:yp,lemonchiffon:mp,lightblue:gp,lightcoral:xp,lightcyan:bp,lightgoldenrodyellow:Tp,lightgray:wp,lightgreen:Ep,lightgrey:Ip,lightpink:Ap,lightsalmon:Rp,lightseagreen:Cp,lightskyblue:Np,lightslategray:Op,lightslategrey:Sp,lightsteelblue:Pp,lightyellow:Fp,lime:Up,limegreen:Mp,linen:Lp,magenta:Bp,maroon:Gp,mediumaquamarine:kp,mediumblue:Dp,mediumorchid:Xp,mediumpurple:Hp,mediumseagreen:Vp,mediumslateblue:$p,mediumspringgreen:zp,mediumturquoise:jp,mediumvioletred:Yp,midnightblue:qp,mintcream:Wp,mistyrose:Kp,moccasin:Zp,navajowhite:Jp,navy:Qp,oldlace:tv,olive:ev,olivedrab:rv,orange:iv,orangered:nv,orchid:sv,palegoldenrod:av,palegreen:ov,paleturquoise:hv,palevioletred:uv,papayawhip:fv,peachpuff:lv,peru:cv,pink:dv,plum:pv,powderblue:vv,purple:_v,rebeccapurple:yv,red:mv,rosybrown:gv,royalblue:xv,saddlebrown:bv,salmon:Tv,sandybrown:wv,seagreen:Ev,seashell:Iv,sienna:Av,silver:Rv,skyblue:Cv,slateblue:Nv,slategray:Ov,slategrey:Sv,snow:Pv,springgreen:Fv,steelblue:Uv,tan:Mv,teal:Lv,thistle:Bv,tomato:Gv,turquoise:kv,violet:Dv,wheat:Xv,white:Hv,whitesmoke:Vv,yellow:$v,yellowgreen:zv};function vo(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function _o(t){var e=t.toString(16);return e="000000".substr(0,6-e.length)+e,"#"+e}function Yv(t){return typeof t=="string"&&(t=jv[t.toLowerCase()]||t,t[0]==="#"&&(t=t.substr(1))),parseInt(t,16)}function qv(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function Wv(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[w.NORMAL_NPM]=w.NORMAL,t[w.ADD_NPM]=w.ADD,t[w.SCREEN_NPM]=w.SCREEN,e[w.NORMAL]=w.NORMAL_NPM,e[w.ADD]=w.ADD_NPM,e[w.SCREEN]=w.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}var cn=Wv();function Kv(t,e){return cn[e?1:0][t]}function Zv(t,e,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function yo(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,i=t>>8&255,n=t&255;return r=r*e+.5|0,i=i*e+.5|0,n=n*e+.5|0,(e*255<<24)+(r<<16)+(i<<8)+n}function Jv(t,e,r,i){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(i||i===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Qv(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function $r(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var t_={Float32Array,Uint32Array,Int32Array,Uint8Array};function e_(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var a=new ArrayBuffer(r*4),o=null,h=0,s=0;s<t.length;s++){var u=e[s],f=t[s],l=$r(f);n[l]||(n[l]=new t_[l](a)),o=n[l];for(var c=0;c<f.length;c++){var d=(c/u|0)*i+h,p=c%u;o[d+p]=f[c]}h+=u}return new Float32Array(a)}function ze(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function ji(t){return!(t&t-1)&&!!t}function Yi(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Fe(t,e,r){var i=t.length,n;if(!(e>=i||r===0)){r=e+r>i?i-e:r;var s=i-r;for(n=e;n<s;++n)t[n]=t[n+r];t.length=s}}function Se(t){return t===0?0:t<0?-1:1}var r_=0;function je(){return++r_}var Fs={};function Ft(t,e,r){if(r===void 0&&(r=3),!Fs[e]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Fs[e]=!0}}var qi={},W=Object.create(null),st=Object.create(null);function i_(){var t;for(t in W)W[t].destroy();for(t in st)st[t].destroy()}function n_(){var t;for(t in W)delete W[t];for(t in st)delete st[t]}var s_=function(){function t(e,r,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||E.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function a_(t){var e=t.width,r=t.height,i=t.getContext("2d"),n=i.getImageData(0,0,e,r),s=n.data,a=s.length,o={top:null,left:null,right:null,bottom:null},h=null,u,f,l;for(u=0;u<a;u+=4)s[u+3]!==0&&(f=u/4%e,l=~~(u/4/e),o.top===null&&(o.top=l),(o.left===null||f<o.left)&&(o.left=f),(o.right===null||o.right<f)&&(o.right=f+1),(o.bottom===null||o.bottom<l)&&(o.bottom=l));return o.top!==null&&(e=o.right-o.left,r=o.bottom-o.top+1,h=i.getImageData(o.left,o.top,e,r)),{height:r,width:e,data:h}}var mo=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function o_(t){var e=mo.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var ur;function go(t,e){if(e===void 0&&(e=self.location),t.indexOf("data:")===0)return"";e=e||self.location,ur||(ur=document.createElement("a")),ur.href=t;var r=ce.parse(ur.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function Pr(t,e){var r=E.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const h_=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:st,CanvasRenderTarget:s_,DATA_URI:mo,EventEmitter:Ze,ProgramCache:qi,TextureCache:W,clearTextureCache:n_,correctBlendMode:Kv,createIndicesForQuads:Qv,decomposeDataUri:o_,deprecation:Ft,destroyTextureCache:i_,determineCrossOrigin:go,earcut:kc,getBufferType:$r,getResolutionOfUrl:Pr,hex2rgb:vo,hex2string:_o,interleaveTypedArrays:e_,isMobile:Ot,isPow2:ji,isWebGLSupported:po,log2:Yi,nextPow2:ze,premultiplyBlendMode:cn,premultiplyRgba:Zv,premultiplyTint:yo,premultiplyTintToRgba:Jv,removeItems:Fe,rgb2hex:qv,sayHello:co,sign:Se,skipHello:sd,string2hex:Yv,trimCanvas:a_,uid:je,url:ce},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */E.SORTABLE_CHILDREN=!1;var Wi=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?N.EMPTY:(e=e||new N(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,n=e.b,s=e.c,a=e.d,o=e.tx,h=e.ty,u=i*r.x+s*r.y+o,f=n*r.x+a*r.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=e[0],o=e[1];r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=e[2],o=e[3],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=e[4],o=e[5],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=e[6],o=e[7],r=a<r?a:r,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=r,this.minY=i,this.maxX=n,this.maxY=s},t.prototype.addFrame=function(e,r,i,n,s){this.addFrameMatrix(e.worldTransform,r,i,n,s)},t.prototype.addFrameMatrix=function(e,r,i,n,s){var a=e.a,o=e.b,h=e.c,u=e.d,f=e.tx,l=e.ty,c=this.minX,d=this.minY,p=this.maxX,_=this.maxY,v=a*r+h*i+f,m=o*r+u*i+l;c=v<c?v:c,d=m<d?m:d,p=v>p?v:p,_=m>_?m:_,v=a*n+h*i+f,m=o*n+u*i+l,c=v<c?v:c,d=m<d?m:d,p=v>p?v:p,_=m>_?m:_,v=a*r+h*s+f,m=o*r+u*s+l,c=v<c?v:c,d=m<d?m:d,p=v>p?v:p,_=m>_?m:_,v=a*n+h*s+f,m=o*n+u*s+l,c=v<c?v:c,d=m<d?m:d,p=v>p?v:p,_=m>_?m:_,this.minX=c,this.minY=d,this.maxX=p,this.maxY=_},t.prototype.addVertexData=function(e,r,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=r;h<i;h+=2){var u=e[h],f=e[h+1];n=u<n?u:n,s=f<s?f:s,a=u>a?u:a,o=f>o?f:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},t.prototype.addVertices=function(e,r,i,n){this.addVerticesMatrix(e.worldTransform,r,i,n)},t.prototype.addVerticesMatrix=function(e,r,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=e.a,h=e.b,u=e.c,f=e.d,l=e.tx,c=e.ty,d=this.minX,p=this.minY,_=this.maxX,v=this.maxY,m=i;m<n;m+=2){var y=r[m],g=r[m+1],A=o*y+u*g+l,T=f*g+h*y+c;d=Math.min(d,A-s),_=Math.max(_,A+s),p=Math.min(p,T-a),v=Math.max(v,T+a)}this.minX=d,this.minY=p,this.maxX=_,this.maxY=v},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,n=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,a=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>f?a:f}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,n=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,a=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>f?a:f}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,n,s,a){e-=s,r-=a,i+=s,n+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ki=function(t,e){return Ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ki(t,e)};function dn(t,e){Ki(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ye=function(t){dn(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new ao,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Wi,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(r,s))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new N),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new N),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Wi);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,r);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},e.prototype.toGlobal=function(r,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,n,s){return i&&(r=i.toGlobal(r,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,n)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,n,s,a,o,h,u,f){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=0),this.position.x=r,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=f,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new xo),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*io},set:function(r){this.transform.rotation=r*no},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=r,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),e}(Ze),xo=function(t){dn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Ye);Ye.prototype.displayObjectUpdateTransform=Ye.prototype.updateTransform;function u_(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var xe=function(t){dn(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=E.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var n=this.getChildIndex(r),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=r,this.onChildrenChange(n<s?n:s)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(r);Fe(this.children,n,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,Fe(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,Fe(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var n=r,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!r&&s.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(u_),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var n=t.prototype.getLocalBounds.call(this,r);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else{this._render(r);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){r.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&r.filter.push(this,this._enabledFilters)}n&&r.mask.push(this,this._mask),this._render(r);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(r);r.batch.flush(),n&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Ye);xe.prototype.containerUpdateTransform=xe.prototype.updateTransform;/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */E.PREFER_ENV=Ot.any?xt.WEBGL:xt.WEBGL2;E.STRICT_TEXTURE_CACHE=!1;var qe=[];function zr(t,e){if(!t)return null;var r="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var n=qe.length-1;n>=0;--n){var s=qe[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Zi=function(t,e){return Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Zi(t,e)};function O(t,e){Zi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ji=function(){return Ji=Object.assign||function(e){for(var r=arguments,i,n=1,s=arguments.length;n<s;n++){i=r[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ji.apply(this,arguments)};function f_(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&(r[i[n]]=t[i[n]]);return r}var ie=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new X("setRealSize"),this.onUpdate=new X("update"),this.onError=new X("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),Je=function(t){O(e,t);function e(r,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=t.call(this,a,o)||this,n.data=r,n}return e.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pt.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(ie),l_={scaleMode:yt.NEAREST,format:x.RGBA,alphaMode:Pt.NPM},H=function(t){O(e,t);function e(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var n=t.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,f=i.height,l=i.wrapMode,c=i.format,d=i.type,p=i.target,_=i.resolution,v=i.resourceOptions;return r&&!(r instanceof ie)&&(r=zr(r,v),r.internal=!0),n.resolution=_||E.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((f||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:E.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:E.ANISOTROPIC_LEVEL,n._wrapMode=l||E.WRAP_MODE,n._scaleMode=h!==void 0?h:E.SCALE_MODE,n.format=c||x.RGBA,n.type=d||R.UNSIGNED_BYTE,n.target=p||kt.TEXTURE_2D,n.alphaMode=s!==void 0?s:Pt.UNPACK,n.uid=je(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&f>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(r),n}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,i){var n;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,i,n){return n=n||this.resolution,this.setRealSize(r*n,i*n,n)},e.prototype.setRealSize=function(r,i,n){return this.resolution=n||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=ji(this.realWidth)&&ji(this.realHeight)},e.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete st[this.cacheId],delete W[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,i,n){n===void 0&&(n=E.STRICT_TEXTURE_CACHE);var s=typeof r=="string",a=null;if(s)a=r;else{if(!r._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";r._pixiId=o+"_"+je()}a=r._pixiId}var h=st[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new e(r,i),h.cacheId=a,e.addToCache(h,a)),h},e.fromBuffer=function(r,i,n,s){r=r||new Float32Array(i*n*4);var a=new Je(r,{width:i,height:n}),o=r instanceof Float32Array?R.FLOAT:R.UNSIGNED_BYTE;return new e(a,Object.assign(l_,s||{width:i,height:n,type:o}))},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),st[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),st[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=st[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete st[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)delete st[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(Ze),jr=function(t){O(e,t);function e(r,i){var n=this,s=i||{},a=s.width,o=s.height;n=t.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<r;h++){var u=new H;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=r,n._load=null,n.baseTexture=null,n}return e.prototype.initFromArray=function(r,i){for(var n=0;n<this.length;n++)r[n]&&(r[n].castToBaseTexture?this.addBaseTextureAt(r[n].castToBaseTexture(),n):r[n]instanceof ie?this.addResourceAt(r[n],n):this.addResourceAt(zr(r[n],i),n))},e.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=r.items[0],a=s.realWidth,o=s.realHeight;return r.resize(a,o),Promise.resolve(r)}),this._load},e}(ie),pn=function(t){O(e,t);function e(r,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(r)?(h=r,u=r.length):u=r,n=t.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return e.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=kt.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=r.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var f=0;f<a;f++){var l=h[f];o[f]<l.dirtyId&&(o[f]=l.dirtyId,l.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,f,l.resource.width,l.resource.height,1,i.format,n.type,l.resource.source))}return!0},e}(jr),bt=function(t){O(e,t);function e(r){var i=this,n=r,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=t.call(this,s,a)||this,i.source=r,i.noSubImage=!1,i}return e.crossOrigin=function(r,i,n){n===void 0&&i.indexOf("data:")!==0?r.crossOrigin=go(i):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")},e.prototype.upload=function(r,i,n,s){var a=r.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pt.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,n=r.naturalHeight||r.videoHeight||r.height;this.resize(i,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ie),Yr=function(t){O(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var i=self.OffscreenCanvas;return i&&r instanceof i?!0:self.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(bt),vn=function(t){O(e,t);function e(r,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");n=t.call(this,6,{width:a,height:o})||this;for(var f=0;f<e.SIDES;f++)n.items[f].target=kt.TEXTURE_CUBE_MAP_POSITIVE_X+f;return n.linkBaseTexture=u!==!1,r&&n.initFromArray(r,i),h!==!1&&n.load(),n}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=kt.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=kt.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},e.prototype.upload=function(r,i,n){for(var s=this.itemDirtyIds,a=0;a<e.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(r,o,n),s[a]=o.dirtyId):s[a]<-1&&(r.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(jr),qr=function(t){O(e,t);function e(r,i){var n=this;if(i=i||{},!(r instanceof HTMLImageElement)){var s=new Image;bt.crossOrigin(s,r,i.crossorigin),s.src=r,r=s}return n=t.call(this,r)||this,!r.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=r.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:E.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},e.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===Pt.UNPACK?"premultiply":"none"})}).then(function(a){return r.destroyed?Promise.reject():(r.bitmap=a,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(bt),_n=function(t){O(e,t);function e(r,i){var n=this;return i=i||{},n=t.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=r,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},/^\<svg/.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,i=new Image;bt.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){r._resolve&&(i.onerror=null,r.onError.emit(n))},i.onload=function(){if(r._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*r.scale,o=s*r.scale;(r._overrideWidth||r._overrideHeight)&&(a=r._overrideWidth||r._overrideHeight/s*n,o=r._overrideHeight||r._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=r.source;h.width=a,h.height=o,h._pixiId="canvas_"+je(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),r._resolve(),r._resolve=null}}},e.getSize=function(r){var i=e.SVG_SIZE.exec(r),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(bt),yn=function(t){O(e,t);function e(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var a=r[0].src||r[0];bt.crossOrigin(s,a,i.crossorigin);for(var o=0;o<r.length;++o){var h=document.createElement("source"),u=r[o],f=u.src,l=u.mime;f=f||r[o];var c=f.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);l=l||e.MIME_TYPES[d]||"video/"+d,h.src=f,h.type=l,s.appendChild(h)}r=s}return n=t.call(this,r)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return e.prototype.update=function(r){if(!this.destroyed){var i=Ct.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){r.valid?n(r):(r._resolve=n,i.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ct.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ct.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,i){return self.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(bt),mn=function(t){O(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!self.createImageBitmap&&r instanceof ImageBitmap},e}(bt);qe.push(qr,mn,Yr,yn,_n,Je,vn,pn);var bo={__proto__:null,Resource:ie,BaseImageResource:bt,INSTALLED:qe,autoDetectResource:zr,AbstractMultiResource:jr,ArrayResource:pn,BufferResource:Je,CanvasResource:Yr,CubeResource:vn,ImageResource:qr,SVGResource:_n,VideoResource:yn,ImageBitmapResource:mn},c_=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,i,n){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pt.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},e}(Je),Fr=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new X("disposeFramebuffer"),this.multisample=L.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new H(null,{scaleMode:yt.NEAREST,resolution:1,mipmap:Dt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new H(new c_(null,{width:this.width,height:this.height}),{scaleMode:yt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Dt.OFF,format:x.DEPTH_COMPONENT,type:R.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(e/s,r/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,r/s)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),gn=function(t){O(e,t);function e(r){var i=this;if(typeof r=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];r={width:n,height:s,scaleMode:a,resolution:o}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:L.NONE,i=t.call(this,null,r)||this,i.mipmap=Dt.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Fr(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(H),xn=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,i){var n=r.width,s=r.height;if(i){var a=e.width/2/n,o=e.height/2/s,h=e.x/n+a,u=e.y/s+o;i=P.add(i,P.NW),this.x0=h+a*P.uX(i),this.y0=u+o*P.uY(i),i=P.add(i,2),this.x1=h+a*P.uX(i),this.y1=u+o*P.uY(i),i=P.add(i,2),this.x2=h+a*P.uX(i),this.y2=u+o*P.uY(i),i=P.add(i,2),this.x3=h+a*P.uX(i),this.y3=u+o*P.uY(i)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),Us=new xn,k=function(t){O(e,t);function e(r,i,n,s,a,o){var h=t.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new N(0,0,1,1)),r instanceof e&&(r=r.baseTexture),h.baseTexture=r,h._frame=i,h.trim=s,h.valid=!1,h._uvs=Us,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new mt(o.x,o.y):new mt(0,0),h._updateID=0,h.textureCacheIds=[],r.valid?h.noFrame?r.valid&&h.onBaseTextureUpdated(r):h.frame=i:r.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&r.on("update",h.onBaseTextureUpdated,h),h}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&W[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=r),n},e.prototype.updateUvs=function(){this._uvs===Us&&(this._uvs=new xn),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,i,n){i===void 0&&(i={}),n===void 0&&(n=E.STRICT_TEXTURE_CACHE);var s=typeof r=="string",a=null;if(s)a=r;else{if(!r._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";r._pixiId=o+"_"+je()}a=r._pixiId}var h=W[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Pr(r)),h=new e(new H(r,i)),h.baseTexture.cacheId=a,H.addToCache(h.baseTexture,a),e.addToCache(h,a)),h},e.fromURL=function(r,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=e.from(r,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(r,i,n,s){return new e(H.fromBuffer(r,i,n,s))},e.fromLoader=function(r,i,n,s){var a=new H(r,Object.assign({scaleMode:E.SCALE_MODE,resolution:Pr(i)},s)),o=a.resource;o instanceof qr&&(o.url=i);var h=new e(a);return n||(n=i),H.addToCache(h.baseTexture,n),e.addToCache(h,n),n!==i&&(H.addToCache(h.baseTexture,i),e.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),W[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),W[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=W[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete W[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)W[r.textureCacheIds[s]]===r&&delete W[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,n=r.y,s=r.width,a=r.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",f="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,l="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(f+" "+u+" "+l))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(Ze);function d_(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new k(new H(new Yr(t)))}function Wr(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}k.EMPTY=new k(new H);Wr(k.EMPTY);Wr(k.EMPTY.baseTexture);k.WHITE=d_();Wr(k.WHITE);Wr(k.WHITE.baseTexture);var Kr=function(t){O(e,t);function e(r,i){var n=t.call(this,r,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(r*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},e.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},e.create=function(r){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof r=="number"&&(Ft("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new gn(r))},e}(k),To=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,i){i===void 0&&(i=L.NONE);var n=new gn(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new Kr(n)},t.prototype.getOptimalTexture=function(e,r,i,n){i===void 0&&(i=1),n===void 0&&(n=L.NONE);var s;e=Math.ceil(e*i),r=Math.ceil(r*i),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=ze(e),r=ze(r),s=((e&65535)<<16|r&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(e,r,n)),a.filterPoolKey=s,a.setResolution(i),a},t.prototype.getFilterTexture=function(e,r,i){var n=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||L.NONE);return n.filterFrame=e.filterFrame,n},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),Qi=function(){function t(e,r,i,n,s,a,o){r===void 0&&(r=0),i===void 0&&(i=!1),n===void 0&&(n=R.FLOAT),this.buffer=e,this.size=r,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,n,s){return new t(e,r,i,n,s)},t}(),p_=0,K=function(){function t(e,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=p_++,this.disposeRunner=new X("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===lt.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?lt.ELEMENT_ARRAY_BUFFER:lt.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),v_={Float32Array,Uint32Array,Int32Array,Uint8Array};function __(t,e){for(var r=0,i=0,n={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var a=new ArrayBuffer(r*4),o=null,h=0,s=0;s<t.length;s++){var u=e[s],f=t[s],l=$r(f);n[l]||(n[l]=new v_[l](a)),o=n[l];for(var c=0;c<f.length;c++){var d=(c/u|0)*i+h,p=c%u;o[d+p]=f[c]}h+=u}return new Float32Array(a)}var Ms={5126:4,5123:2,5121:1},y_=0,m_={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Zr=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=y_++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new X("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof K||(r instanceof Array&&(r=new Float32Array(r)),r=new K(r));var u=e.split("|");if(u.length>1){for(var f=0;f<u.length;f++)this.addAttribute(u[f],r,i,n,s);return this}var l=this.buffers.indexOf(r);return l===-1&&(this.buffers.push(r),l=this.buffers.length-1),this.attributes[e]=new Qi(l,i,n,s,a,o,h),this.instanced=this.instanced||h,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof K||(e instanceof Array&&(e=new Uint16Array(e)),e=new K(e)),e.type=lt.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],i=new K,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];e.push(a.data),r.push(s.size*Ms[s.type]/4),s.buffer=0}for(i.data=__(e,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new K(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new Qi(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=lt.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,i=[],n=[],s=[],a,o=0;o<e.length;o++){a=e[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new m_[$r(a.buffers[o].data)](n[o]),r.buffers[o]=new K(i[o]);for(var o=0;o<e.length;o++){a=e[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=lt.ELEMENT_ARRAY_BUFFER;for(var u=0,f=0,l=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(f+=d.size*Ms[d.type]/4)}for(var o=0;o<e.length;o++){for(var p=e[o].indexBuffer.data,h=0;h<p.length;h++)r.indexBuffer.data[h+l]+=u;u+=e[o].buffers[c].data.length/f,l+=p.length}}return r},t}(),wo=function(t){O(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(Zr),Eo=function(t){O(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new K(r.vertices),r.uvBuffer=new K(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/r.width,this.uvs[3]=s,this.uvs[4]=n+i.width/r.width,this.uvs[5]=s+i.height/r.height,this.uvs[6]=n,this.uvs[7]=s+i.height/r.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Zr),g_=0,te=function(){function t(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=g_++,this.static=!!r,this.ubo=!!i,e instanceof K?(this.buffer=e,this.buffer.type=lt.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new K(new Float32Array(1)),this.buffer.type=lt.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,i){if(!this.ubo)this.uniforms[e]=new t(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,i){return new t(e,r,i)},t.uboFrom=function(e,r){return new t(e,r??!0,!0)},t}(),Io=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=L.NONE,this.sourceFrame=new N,this.destinationFrame=new N,this.bindingSourceFrame=new N,this.bindingDestinationFrame=new N,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),fr=[new mt,new mt,new mt,new mt],fi=new tt,bn=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new To,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new wo,this.quadUv=new Eo,this.tempRect=new N,this.activeState={},this.globalUniforms=new te({outputFrame:new N,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new Io,a=this.renderer.renderTexture,o=r[0].resolution,h=r[0].multisample,u=r[0].padding,f=r[0].autoFit,l=r[0].legacy,c=1;c<r.length;c++){var d=r[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,f=f&&d.autoFit,l=l||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=l,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u),f){var p=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(fi.copyFrom(i.projection.transform).invert(),p),s.sourceFrame.fit(p)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;var n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*r.resolution),a[1]=Math.round(s[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=r.sourceFrame.width*s[2]-.5*a[2],o[3]=r.sourceFrame.height*s[3]-.5*a[3],r.legacy){var h=n.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,u.renderTexture,Rt.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var f=r.renderTexture,l=this.getOptimalFilterTexture(f.width,f.height,r.resolution);l.filterFrame=f.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&r.multisample>1&&(l=this.getOptimalFilterTexture(f.width,f.height,r.resolution),l.filterFrame=f.filterFrame),i[c].apply(this,f,l,Rt.CLEAR,r);var d=f;f=l,l=d}i[c].apply(this,f,u.renderTexture,Rt.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(f),this.returnFilterTexture(l)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=Rt.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,n.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(r===Rt.CLEAR||r===Rt.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,i,n){var s=this.renderer;s.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(me.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(me.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=r._texture.orig,o=e.set(s.width,0,0,s.height,n.x,n.y),h=r.worldTransform.copyTo(tt.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(r.anchor.x,r.anchor.y),o},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,i,n){return i===void 0&&(i=1),n===void 0&&(n=L.NONE),this.texturePool.getOptimalTexture(e,r,i,n)},t.prototype.getFilterTexture=function(e,r,i){if(typeof e=="number"){var n=e;e=r,r=n}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||L.NONE);return s.filterFrame=e.filterFrame,s},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var i=fr[0],n=fr[1],s=fr[2],a=fr[3];i.set(r.left,r.top),n.set(r.left,r.bottom),s.set(r.right,r.top),a.set(r.right,r.bottom),e.apply(i,i),e.apply(n,n),e.apply(s,s),e.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),f=Math.max(i.y,n.y,s.y,a.y);r.x=o,r.y=h,r.width=u-o,r.height=f-h},t.prototype.roundFrame=function(e,r,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?fi.copyFrom(s):fi.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)},t}(),Tn=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),wn=function(){function t(e){this.renderer=e,this.emptyRenderer=new Tn(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var i=this.renderer.texture.boundTextures,n=r-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)},t.prototype.boundArray=function(e,r,i,n){for(var s=e.elements,a=e.ids,o=e.count,h=0,u=0;u<o;u++){var f=s[u],l=f._batchLocation;if(l>=0&&l<n&&r[l]===f){a[u]=l;continue}for(;h<n;){var c=r[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,f._batchLocation=h,r[h]=f;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),Ls=0,En=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Ls++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Ls++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var i;if(E.PREFER_ENV>=xt.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),i="WebGL2RenderingContext"in self&&e instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),Ao=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=L.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),x_=new N,In=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Fr(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new N,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;E.PREFER_ENV===xt.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=function(n){return r.drawBuffersWEBGL(n)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,i){i===void 0&&(i=0);var n=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var h=r.width>>i,u=r.height>>i,f=h/r.width;this.setViewport(r.x*f,r.y*f,h,u)}else{var h=e.width>>i,u=e.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,i,n){var s=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=i,s.height=n,this.gl.viewport(e,r,i,n))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,i,n,s){s===void 0&&(s=ke.COLOR|ke.DEPTH);var a=this.gl;a.clearColor(e,r,i,n),a.clear(s)},t.prototype.initFramebuffer=function(e){var r=this.gl,i=new Ao(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(e){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var n=e.colorTextures,s=n.length;r.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],f=u.parentTextureArray||u;this.renderer.texture.bind(f,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,f._glTextures[this.CONTEXT_UID].texture,r),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),e.depthTexture){var l=this.writeDepthTexture;if(l){var c=e.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,i=L.NONE;if(e<=1||r===null)return i;for(var n=0;n<r.length;n++)if(r[n]<=e){i=r[n];break}return i===1&&(i=L.NONE),i},t.prototype.blit=function(e,r,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!e){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new Fr(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),e=u.blitFramebuffer,e.width=s.width,e.height=s.height}r||(r=x_,r.width=s.width,r.height=s.height),i||(i=r);var f=r.width===i.width&&r.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,f?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var i=e.width,n=e.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),r.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new N},t.prototype.destroy=function(){this.renderer=null},t}(),li={5126:4,5123:2,5121:1},An=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;E.PREFER_ENV===xt.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},e.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},e.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var i=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,i=0;i<e.buffers.length;i++){var n=e.buffers[i];r.update(n)}},t.prototype.checkCompatibility=function(e,r){var i=e.attributes,n=r.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},t.prototype.getSignature=function(e,r){var i=e.attributes,n=r.attributeData,s=["g",e.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},t.prototype.initGeometryVao=function(e,r,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=r.program;o.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,o);var h=this.getSignature(e,o),u=e.glVertexArrayObjects[this.CONTEXT_UID],f=u[h];if(f)return u[o.id]=f,f;var l=e.buffers,c=e.attributes,d={},p={};for(var _ in l)d[_]=0,p[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*li[c[_].type];for(var _ in c){var v=c[_],m=v.size;v.stride===void 0&&(d[v.buffer]===m*li[v.type]?v.stride=0:v.stride=d[v.buffer]),v.start===void 0&&(v.start=p[v.buffer],p[v.buffer]+=m*li[v.type])}f=n.createVertexArray(),n.bindVertexArray(f);for(var y=0;y<l.length;y++){var g=l[y];a.bind(g),i&&g._glBuffers[s].refCount++}return this.activateVao(e,o),this._activeVao=f,u[o.id]=f,u[h]=f,f},t.prototype.disposeGeometry=function(e,r){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(a[h],r))}if(!r){for(var f in n)if(f[0]==="g"){var l=n[f];this._activeVao===l&&this.unbind(),s.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)},t.prototype.activateVao=function(e,r){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var h=null;for(var u in o){var f=o[u],l=a[f.buffer],c=l._glBuffers[n];if(r.attributeData[u]){h!==c&&(s.bind(l),h=c);var d=r.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(e,r||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(e,r||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(e,i,r||a.getSize(),n||1):s.drawArrays(e,i,r||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),Ro=function(){function t(e){e===void 0&&(e=null),this.type=q.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=E.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=q.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function Bs(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function Gs(t,e){var r=t.getShaderSource(e).split(`
`).map(function(u,f){return f+": "+u}),i=t.getShaderInfoLog(e),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){r[u-1]="%c"+r[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=r.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function b_(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Gs(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||Gs(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function ci(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Co(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ci(2*e);case"bvec3":return ci(3*e);case"bvec4":return ci(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var No={},Ee=No;function Oo(){if(Ee===No||Ee&&Ee.isContextLost()){var t=document.createElement("canvas"),e=void 0;E.PREFER_ENV>=xt.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ee=e}return Ee}var lr;function T_(){if(!lr){lr=ft.MEDIUM;var t=Oo();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);lr=e.precision?ft.HIGH:ft.MEDIUM}}return lr}function ks(t,e,r){if(t.substring(0,9)!=="precision"){var i=e;return e===ft.HIGH&&r!==ft.HIGH&&(i=ft.MEDIUM),"precision "+i+` float;
`+t}else if(r!==ft.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var w_={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function So(t){return w_[t]}var cr=null,Ds={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Po(t,e){if(!cr){var r=Object.keys(Ds);cr={};for(var i=0;i<r.length;++i){var n=r[i];cr[t[n]]=Ds[n]}}return cr[e]}var ee=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],E_={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},I_={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function A_(t,e){var r=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in t.uniforms){var n=e[i];if(!n){t.uniforms[i].group&&(t.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=t.uniforms[i],a=!1,o=0;o<ee.length;o++)if(ee[o].test(n,s)){r.push(ee[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?E_:I_,u=h[n.type].replace("location",'ud["'+i+'"].location');r.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var R_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function C_(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Fo(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=R_.replace(/%forloop%/gi,C_(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var Ie;function N_(){if(typeof Ie=="boolean")return Ie;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ie=t({a:"b"},"a","b")===!0}catch{Ie=!1}return Ie}var O_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,S_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,P_=0,dr={},Jr=function(){function t(e,r,i){i===void 0&&(i="pixi-shader"),this.id=P_++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),dr[i]?(dr[i]++,i+="-"+dr[i]):dr[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=ks(this.vertexSrc,E.PRECISION_VERTEX,ft.HIGH),this.fragmentSrc=ks(this.fragmentSrc,E.PRECISION_FRAGMENT,T_())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return S_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return O_},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var n=e+r,s=qi[n];return s||(qi[n]=s=new t(e,r,i)),s},t}(),Rn=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof te?this.uniformGroup=r:this.uniformGroup=new te(r):this.uniformGroup=new te({})}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var i in r.uniforms){var n=r.uniforms[i];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var n=Jr.from(e,r);return new t(n,i)},t}(),di=0,pi=1,vi=2,_i=3,yi=4,mi=5,Qr=function(){function t(){this.data=0,this.blendMode=w.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<di)},set:function(e){!!(this.data&1<<di)!==e&&(this.data^=1<<di)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<pi)},set:function(e){!!(this.data&1<<pi)!==e&&(this.data^=1<<pi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<vi)},set:function(e){!!(this.data&1<<vi)!==e&&(this.data^=1<<vi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<_i)},set:function(e){!!(this.data&1<<_i)!==e&&(this.data^=1<<_i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<mi)},set:function(e){!!(this.data&1<<mi)!==e&&(this.data^=1<<mi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<yi)},set:function(e){!!(this.data&1<<yi)!==e&&(this.data^=1<<yi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==w.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),F_=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,U_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Uo=function(t){O(e,t);function e(r,i,n){var s=this,a=Jr.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return s=t.call(this,a,n)||this,s.padding=0,s.resolution=E.FILTER_RESOLUTION,s.multisample=E.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Qr,s}return e.prototype.apply=function(r,i,n,s,a){r.applyFilter(this,i,n,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return F_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return U_},enumerable:!1,configurable:!0}),e}(Rn),M_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,L_=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Xs=new tt,Mo=function(){function t(e,r){this._texture=e,this.mapCoord=new tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var i=this.mapCoord,n=0;n<e.length;n+=2){var s=e[n],a=e[n+1];r[n]=s*i.a+a*i.c+i.tx,r[n+1]=s*i.b+a*i.d+i.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=r.orig,s=r.trim;s&&(Xs.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Xs));var a=r.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(r._frame.x+h+u)/a.width,o[1]=(r._frame.y+h+u)/a.height,o[2]=(r._frame.x+r._frame.width-h+u)/a.width,o[3]=(r._frame.y+r._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0},t}(),Lo=function(t){O(e,t);function e(r){var i=this,n=new tt;return i=t.call(this,M_,L_)||this,r.renderable=!1,i.maskSprite=r,i.maskMatrix=n,i}return e.prototype.apply=function(r,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Mo(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,r.applyFilter(this,i,n,s))},e}(Uo),Cn=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var i=r;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Ro;n.pooled=!0,n.maskObject=r,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=e,i.type){case q.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case q.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case q.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){switch(r.type){case q.SCISSOR:this.renderer.scissor.pop();break;case q.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case q.SPRITE:this.popSpriteMask();break}r.reset(),r.pooled&&this.maskDataPool.push(r)}},t.prototype.detect=function(e){var r=e.maskObject;if(r.isSprite){e.type=q.SPRITE;return}if(e.type=q.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()){var i=r.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(e.type=q.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var r,i,n=e.maskObject,s=e._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Lo(n)]);var o=this.renderer,h=o.renderTexture,u,f;if(h.current){var l=h.current;u=e.resolution||l.resolution,f=(r=e.multisample)!==null&&r!==void 0?r:l.multisample}else u=e.resolution||o.resolution,f=(i=e.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=f,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t.prototype.destroy=function(){this.renderer=null},t}(),Bo=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==i&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Nn=function(t){O(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.push=function(r){var i=r.maskObject;i.renderable=!0;var n=r._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=s,this._useCurrent()},e.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,f=o.height/a.height,l=((r.x-a.x)*u+o.x)*h,c=((r.y-a.y)*f+o.y)*h,d=r.width*u*h,p=r.height*f*h;s&&(l+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-p-c),l=Math.round(l),c=Math.round(c),d=Math.round(d),p=Math.round(p),this.renderer.gl.scissor(l,c,d,p)},e}(Bo),On=function(t){O(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var i=r.maskObject,n=this.renderer.gl,s=r._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),r._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Bo),Sn=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new tt,this.transform=null}return t.prototype.update=function(e,r,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/r.width*2,s.d=a*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-a-r.y*s.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),jt=new N,Ae=new N,Pn=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new N,this.destinationFrame=new N,this.viewportFrame=new N}return t.prototype.bind=function(e,r,i){e===void 0&&(e=null);var n=this.renderer;this.current=e;var s,a,o;e?(s=e.baseTexture,o=s.resolution,r||(jt.width=e.frame.width,jt.height=e.frame.height,r=jt),i||(Ae.x=e.frame.x,Ae.y=e.frame.y,Ae.width=r.width,Ae.height=r.height,i=Ae),a=s.framebuffer):(o=n.resolution,r||(jt.width=n.screen.width,jt.height=n.screen.height,r=jt),i||(i=jt,i.width=r.width,i.height=r.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,e||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,r,o,!a),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,f=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,f)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),s&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function B_(t,e,r,i,n){r.buffer.update(n)}var G_={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Go={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function ko(t){for(var e=t.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),r=0,i=0,n=0,s=0;s<e.length;s++){var a=e[s];if(r=Go[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,i%r!==0&&i<16){var o=i%r%16;i+=o,n+=o}i+r>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=r,i=r):(a.offset=n,i+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function Do(t,e){var r=[];for(var i in t)e[i]&&r.push(e[i]);return r.sort(function(n,s){return n.index-s.index}),r}function Xo(t,e){if(!t.autoManage)return{size:0,syncFunc:B_};for(var r=Do(t.uniforms,e),i=ko(r),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=t.uniforms[h.data.name],f=h.data.name,l=!1,c=0;c<ee.length;c++){var d=ee[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",ee[c].codeUbo(h.data.name,u)),l=!0;break}}if(!l)if(h.data.size>1){var p=So(h.data.type),_=Math.max(Go[h.data.type]/16,1),v=p/_,m=(4-v%4)%4;a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+v+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+m+`;
                }

                `)}else{var y=G_[h.data.type];a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+h.offset/4+`;
                `+y+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var k_=function(){function t(){}return t}(),Ho=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function D_(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=e.getActiveAttrib(t,n);if(!s.name.startsWith("gl_")){var a=Po(e,s.type),o={type:a,name:s.name,size:So(a),location:n};r[s.name]=o}}return r}function X_(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(t,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=Po(e,s.type);r[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:Co(h,s.size)}}return r}function Vo(t,e){var r=Bs(t,t.VERTEX_SHADER,e.vertexSrc),i=Bs(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();t.attachShader(n,r),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||b_(t,n,r,i),e.attributeData=D_(n,t),e.uniformData=X_(n,t);var s=Object.keys(e.attributeData);s.sort(function(f,l){return f>l?1:-1});for(var a=0;a<s.length;a++)e.attributeData[s[a]].location=a,t.bindAttribLocation(n,a,s[a]);t.linkProgram(n),t.deleteShader(r),t.deleteShader(i);var o={};for(var a in e.uniformData){var h=e.uniformData[a];o[a]={location:t.getUniformLocation(n,a),value:Co(h.type,h.size)}}var u=new Ho(n,o);return u}var H_=0,pr={textureCount:0,uboCount:0},Fn=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=H_++}return t.prototype.systemCheck=function(){if(!N_())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),r||(pr.textureCount=0,pr.uboCount=0,this.syncUniformGroup(e.uniformGroup,pr)),n},t.prototype.setUniforms=function(e){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))},t.prototype.syncUniforms=function(e,r,i){var n=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);n(r.uniformData,e.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=A_(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,pr,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,i){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=Xo(e,this.shader.program.uniformData)),e.autoManage){var h=new Float32Array(o.size/4);e.buffer.update(h)}return r.uniformGroups[e.id]=o.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,i){var n=e.uniforms,s=[i+"-"];for(var a in n)s.push(a),r[a]&&s.push(r[a].type);return s.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,i=e.program,n=Vo(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function V_(t,e){return e===void 0&&(e=[]),e[w.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.ADD]=[t.ONE,t.ONE],e[w.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.NONE]=[0,0],e[w.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[w.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[w.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[w.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[w.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[w.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[w.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[w.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[w.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[w.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[w.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var $_=0,z_=1,j_=2,Y_=3,q_=4,W_=5,Un=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=w.NONE,this._blendEq=!1,this.map=[],this.map[$_]=this.setBlend,this.map[z_]=this.setOffset,this.map[j_]=this.setCullFace,this.map[Y_]=this.setDepthTest,this.map[q_]=this.setFrontFace,this.map[W_]=this.setDepthMask,this.checks=[],this.defaultState=new Qr,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=V_(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,i=0;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Mn=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=E.GC_MAX_IDLE,this.checkCountMax=E.GC_MAX_CHECK_COUNT,this.mode=E.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Or.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,i=!1,n=0;n<r.length;n++){var s=r[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[n]=null,i=!0)}if(i){for(var a=0,n=0;n<r.length;n++)r[n]!==null&&(r[a++]=r[n]);r.length=a}},t.prototype.unload=function(e){var r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},t.prototype.destroy=function(){this.renderer=null},t}();function K_(t){var e,r,i,n,s,a,o,h,u,f,l,c,d,p,_,v,m,y,g,A,T,S,V;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?V=(e={},e[R.UNSIGNED_BYTE]=(r={},r[x.RGBA]=t.RGBA8,r[x.RGB]=t.RGB8,r[x.RG]=t.RG8,r[x.RED]=t.R8,r[x.RGBA_INTEGER]=t.RGBA8UI,r[x.RGB_INTEGER]=t.RGB8UI,r[x.RG_INTEGER]=t.RG8UI,r[x.RED_INTEGER]=t.R8UI,r[x.ALPHA]=t.ALPHA,r[x.LUMINANCE]=t.LUMINANCE,r[x.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[R.BYTE]=(i={},i[x.RGBA]=t.RGBA8_SNORM,i[x.RGB]=t.RGB8_SNORM,i[x.RG]=t.RG8_SNORM,i[x.RED]=t.R8_SNORM,i[x.RGBA_INTEGER]=t.RGBA8I,i[x.RGB_INTEGER]=t.RGB8I,i[x.RG_INTEGER]=t.RG8I,i[x.RED_INTEGER]=t.R8I,i),e[R.UNSIGNED_SHORT]=(n={},n[x.RGBA_INTEGER]=t.RGBA16UI,n[x.RGB_INTEGER]=t.RGB16UI,n[x.RG_INTEGER]=t.RG16UI,n[x.RED_INTEGER]=t.R16UI,n[x.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,n),e[R.SHORT]=(s={},s[x.RGBA_INTEGER]=t.RGBA16I,s[x.RGB_INTEGER]=t.RGB16I,s[x.RG_INTEGER]=t.RG16I,s[x.RED_INTEGER]=t.R16I,s),e[R.UNSIGNED_INT]=(a={},a[x.RGBA_INTEGER]=t.RGBA32UI,a[x.RGB_INTEGER]=t.RGB32UI,a[x.RG_INTEGER]=t.RG32UI,a[x.RED_INTEGER]=t.R32UI,a[x.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[R.INT]=(o={},o[x.RGBA_INTEGER]=t.RGBA32I,o[x.RGB_INTEGER]=t.RGB32I,o[x.RG_INTEGER]=t.RG32I,o[x.RED_INTEGER]=t.R32I,o),e[R.FLOAT]=(h={},h[x.RGBA]=t.RGBA32F,h[x.RGB]=t.RGB32F,h[x.RG]=t.RG32F,h[x.RED]=t.R32F,h[x.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,h),e[R.HALF_FLOAT]=(u={},u[x.RGBA]=t.RGBA16F,u[x.RGB]=t.RGB16F,u[x.RG]=t.RG16F,u[x.RED]=t.R16F,u),e[R.UNSIGNED_SHORT_5_6_5]=(f={},f[x.RGB]=t.RGB565,f),e[R.UNSIGNED_SHORT_4_4_4_4]=(l={},l[x.RGBA]=t.RGBA4,l),e[R.UNSIGNED_SHORT_5_5_5_1]=(c={},c[x.RGBA]=t.RGB5_A1,c),e[R.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[x.RGBA]=t.RGB10_A2,d[x.RGBA_INTEGER]=t.RGB10_A2UI,d),e[R.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[x.RGB]=t.R11F_G11F_B10F,p),e[R.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[x.RGB]=t.RGB9_E5,_),e[R.UNSIGNED_INT_24_8]=(v={},v[x.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[R.FLOAT_32_UNSIGNED_INT_24_8_REV]=(m={},m[x.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,m),e):V=(y={},y[R.UNSIGNED_BYTE]=(g={},g[x.RGBA]=t.RGBA,g[x.RGB]=t.RGB,g[x.ALPHA]=t.ALPHA,g[x.LUMINANCE]=t.LUMINANCE,g[x.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,g),y[R.UNSIGNED_SHORT_5_6_5]=(A={},A[x.RGB]=t.RGB,A),y[R.UNSIGNED_SHORT_4_4_4_4]=(T={},T[x.RGBA]=t.RGBA,T),y[R.UNSIGNED_SHORT_5_5_5_1]=(S={},S[x.RGBA]=t.RGBA,S),y),V}var Tr=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=R.UNSIGNED_BYTE,this.internalFormat=x.RGBA,this.samplerType=0}return t}(),Ln=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new H,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=K_(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new Tr(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Tr(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,i=r.gl,n=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)},t.prototype.ensureSamplerType=function(e){var r=this,i=r.boundTextures,n=r.hasIntegerTextures,s=r.CONTEXT_UID;if(n)for(var a=e-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==De.FLOAT&&this.renderer.texture.unbind(o)}}},t.prototype.initTexture=function(e){var r=new Tr(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var i,n;r.internalFormat=(n=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&n!==void 0?n:e.format,this.webGLVersion===2&&e.type===R.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(i,e,r))r.samplerType!==De.FLOAT&&(this.hasIntegerTextures=!0);else{var n=e.realWidth,s=e.realHeight,a=i.gl;(r.width!==n||r.height!==s||r.dirtyId<0)&&(r.width=n,r.height=s,a.texImage2D(e.target,0,r.internalFormat,n,s,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var n=this.managedTextures.indexOf(e);n!==-1&&Fe(this.managedTextures,n,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Dt.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Nr.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var i=this.gl;if(r.mipmap&&e.mipmap!==Dt.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===yt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===yt.LINEAR){var s=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===yt.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===yt.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),$o={__proto__:null,FilterSystem:bn,BatchSystem:wn,ContextSystem:En,FramebufferSystem:In,GeometrySystem:An,MaskSystem:Cn,ScissorSystem:Nn,StencilSystem:On,ProjectionSystem:Sn,RenderTextureSystem:Pn,ShaderSystem:Fn,StateSystem:Un,TextureGCSystem:Mn,TextureSystem:Ln},gi=new tt,zo=function(t){O(e,t);function e(r,i){r===void 0&&(r=ye.UNKNOWN);var n=t.call(this)||this;return i=Object.assign({},E.RENDER_OPTIONS,i),n.options=i,n.type=r,n.screen=new N(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||E.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(Ft("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return e.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},e.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(Ft("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=f_(i,["region"]);s=a||r.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=Kr.create(Ji({width:s.width,height:s.height},o));return gi.tx=-s.x,gi.ty=-s.y,this.render(r,{renderTexture:h,clear:!1,transform:gi,skipUpdateTransform:!!r.parent}),h},e.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=ye.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=_o(r),vo(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(Ze),Z_=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),J_=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,i=r.gl,n=r.CONTEXT_UID,s=e._glBuffers[n]||this.createGLBuffer(e);i.bindBuffer(e.type,s.buffer)},t.prototype.bindBufferBase=function(e,r){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,a.buffer)}},t.prototype.bindBufferRange=function(e,r,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,o.buffer,i*256,256)},t.prototype.update=function(e){var r=this,i=r.gl,n=r.CONTEXT_UID,s=e._glBuffers[n];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,i.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var a=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,a)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(r||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)},t.prototype.createGLBuffer=function(e){var r=this,i=r.CONTEXT_UID,n=r.gl;return e._glBuffers[i]=new Z_(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},t}(),Bn=function(t){O(e,t);function e(r){var i=t.call(this,ye.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new X("destroy"),contextChange:new X("contextChange"),reset:new X("reset"),update:new X("update"),postrender:new X("postrender"),prerender:new X("prerender"),resize:new X("resize")},i.runners.contextChange.add(i),i.globalUniforms=new te({projectionMatrix:new tt},!0),i.addSystem(Cn,"mask").addSystem(En,"context").addSystem(Un,"state").addSystem(Fn,"shader").addSystem(Ln,"texture").addSystem(J_,"buffer").addSystem(An,"geometry").addSystem(In,"framebuffer").addSystem(Nn,"scissor").addSystem(On,"stencil").addSystem(Sn,"projection").addSystem(Mn,"textureGC").addSystem(bn,"filter").addSystem(Pn,"renderTexture").addSystem(wn,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,co(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(r){if(po())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,n)}else{var n=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n)}i>=L.HIGH?this.multisample=L.HIGH:i>=L.MEDIUM?this.multisample=L.MEDIUM:i>=L.LOW?this.multisample=L.LOW:this.multisample=L.NONE},e.prototype.addSystem=function(r,i){var n=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},e.prototype.render=function(r,i){var n,s,a,o;if(i&&(i instanceof Kr?(Ft("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=r),!o){var h=r.enableTempParent();r.updateTransform(),r.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,i,n,s){i===void 0&&(i={});var a=t.prototype.generateTexture.call(this,r,i,n,s);return this.framebuffer.blit(),a},e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Ft("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,i){e.__plugins=e.__plugins||{},e.__plugins[r]=i},e}(zo);function jo(t){return Bn.create(t)}var Q_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ty=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ey=Q_,ry=ty,iy=function(){function t(e){Ft("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),Yo=function(){function t(){this.texArray=null,this.blend=0,this.type=me.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),qo=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),Wo=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),Ko=function(t){O(e,t);function e(r){var i=t.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Qr.for2d(),i.size=E.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var r=this.renderer.gl;E.PREFER_ENV===xt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),E.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Fo(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;r.length<n;)r.push(new Yo);for(;i.length<s;)i.push(new qo);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,n=r.MAX_TEXTURES,s=e._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++H._globalBatch,f=0,l=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var p=i[d];i[d]=null,p._batchEnabled!==u&&(l.count>=n&&(a.boundArray(l,o,u,n),this.buildDrawCalls(l,c,d),c=d,l=s[++f],++u),p._batchEnabled=u,p.touched=h,l.elements[l.count++]=p)}l.count>0&&(a.boundArray(l,o,u,n),this.buildDrawCalls(l,c,this._bufferSize),++f,++u);for(var d=0;d<o.length;d++)o[d]=null;H._globalBatch=u},e.prototype.buildDrawCalls=function(r,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,f=e._drawCallPool,l=this._dcIndex,c=this._aIndex,d=this._iIndex,p=f[l];p.start=this._iIndex,p.texArray=r;for(var _=i;_<n;++_){var v=a[_],m=v._texture.baseTexture,y=cn[m.alphaMode?1:0][v.blendMode];a[_]=null,i<_&&p.blend!==y&&(p.size=d-p.start,i=_,p=f[++l],p.texArray=r,p.start=d),this.packInterleavedGeometry(v,o,h,c,d),c+=v.vertexData.length/2*u,d+=v.indices.length,p.blend=y}i<n&&(p.size=d-p.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,n=0;n<r.count;n++)i.bind(r.elements[n],r.ids[n]),r.elements[n]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,n=r._attributeBuffer,s=r._indexBuffer;E.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=e._drawCallPool,o=null,h=0;h<r;h++){var u=a[h],f=u.texArray,l=u.type,c=u.size,d=u.start,p=u.blend;o!==f&&(o=f,this.bindAndClearTexArray(f)),this.state.blendMode=p,s.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,d*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),E.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var i=ze(Math.ceil(r/8)),n=Yi(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new Wo(s*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(r){var i=ze(Math.ceil(r/12)),n=Yi(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},e.prototype.packInterleavedGeometry=function(r,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,f=r.uvs,l=r.indices,c=r.vertexData,d=r._texture.baseTexture._batchLocation,p=Math.min(r.worldAlpha,1),_=p<1&&r._texture.baseTexture.alphaMode?yo(r._tintRGB,p):r._tintRGB+(p*255<<24),v=0;v<c.length;v+=2)h[s++]=c[v],h[s++]=c[v+1],h[s++]=f[v],h[s++]=f[v+1],o[s++]=_,h[s++]=d;for(var v=0;v<l.length;v++)n[a++]=u+l[v]},e._drawCallPool=[],e._textureArrayPool=[],e}(Tn),Zo=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=i;this.defaultGroupCache[e]=te.from({uSamplers:r},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+e),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Jr(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new tt,default:this.defaultGroupCache[e]};return new Rn(this.programCache[e],s)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),Jo=function(t){O(e,t);function e(r){r===void 0&&(r=!1);var i=t.call(this)||this;return i._buffer=new K(null,r,!1),i._indexBuffer=new K(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,R.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,R.FLOAT).addAttribute("aColor",i._buffer,4,!0,R.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,R.FLOAT).addIndex(i._indexBuffer),i}return e}(Zr),Hs=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Vs=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Qo=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:Hs,fragment:Vs,geometryClass:Jo,vertexSize:6},e),i=r.vertex,n=r.fragment,s=r.vertexSize,a=r.geometryClass;return function(o){O(h,o);function h(u){var f=o.call(this,u)||this;return f.shaderGenerator=new Zo(i,n),f.geometryClass=a,f.vertexSize=s,f}return h}(Ko)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Hs},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Vs},enumerable:!1,configurable:!0}),t}(),th=Qo.create(),eh={},ny=function(t){Object.defineProperty(eh,t,{get:function(){return Ft("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),bo[t]}})};for(var Gn in bo)ny(Gn);var rh={},sy=function(t){Object.defineProperty(rh,t,{get:function(){return Ft("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),$o[t]}})};for(var Gn in $o)sy(Gn);/*!
 * @pixi/loaders - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vr=function(){function t(e,r,i){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function $s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Nt=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},t.prototype.has=function(e){if(!(e instanceof vr))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,r),n=n._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return $s(this,new vr(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return $s(this,new vr(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof vr))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function ih(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[r.key[s]]=i[s]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(a,o,h){o&&(n[r.q.name][o]=h)}),n}var ay=!!(self.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),_r=null,oy=0,zs=200,hy=204,uy=1223,fy=2;function js(){}function Ys(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function xi(t){return t.toString().replace("object ","")}var Y=function(){function t(e,r,i){if(this._dequeue=js,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=js,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Nt,this.onProgress=new Nt,this.onComplete=new Nt,this.onAfterMiddleware=new Nt}return t.setExtensionLoadType=function(e,r){Ys(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){Ys(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:ay&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof self.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof self.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new self.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,i){i||(i=e+"/"+this._getExtension(r));var n=document.createElement("source");return n.src=r,n.type=i,n},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(xi(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(xi(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(xi(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",i=typeof e.status>"u"?zs:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(r=e.responseText),i===oy&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=zs:i===uy&&(i=hy);var n=i/100|0;if(n===fy)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(o){this.abort("Error trying to parse loaded json: "+o);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var s=new DOMParser;this.data=s.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=t.TYPE.XML}catch(o){this.abort("Error trying to parse loaded xml: "+o);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(self.origin!==self.location.origin)return"anonymous";r=r||self.location,_r||(_r=document.createElement("a")),_r.href=e;var i=ih(_r.href,{strictMode:!0}),n=!i.port&&r.port===""||i.port===r.port,s=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!n||s!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var i=e.indexOf("/");r=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?"),s=e.indexOf("#"),a=Math.min(n>-1?n:e.length,s>-1?s:e.length);e=e.substring(0,a),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Y||(Y={}));function Yt(){}function ly(t){return function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(t===null)throw new Error("Callback was already called.");var s=t;t=null,s.apply(this,i)}}var cy=function(){function t(e,r){this.data=e,this.callback=r}return t}(),bi=function(){function t(e,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Yt,this.unsaturated=Yt,this.empty=Yt,this.drain=Yt,this.error=Yt,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var o=new cy(n,typeof a=="function"?a:Yt);s?i._tasks.unshift(o):i._tasks.push(o),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,ly(i._next(n)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var i=arguments,n=[],s=0;s<arguments.length;s++)n[s]=i[s];r.workers-=1,e.callback.apply(e,n),n[0]!=null&&r.error(n[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Yt,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,i,n){var s=0,a=e.length;function o(h){if(h||s===a){i&&i(h);return}n?setTimeout(function(){r(e[s++],o)},1):r(e[s++],o)}o()},t.queue=function(e,r){return new t(e,r)},t}(),Ti=100,dy=/(#[\w-]+)?$/,Ut=function(){function t(e,r){var i=this;e===void 0&&(e=""),r===void 0&&(r=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this._queue=bi.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Nt,this.onError=new Nt,this.onLoad=new Nt,this.onStart=new Nt,this.onComplete=new Nt;for(var n=0;n<t._plugins.length;++n){var s=t._plugins[n],a=s.pre,o=s.use;a&&this.pre(a),o&&this.use(o)}this._protected=!1}return t.prototype._add=function(e,r,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new Y(e,r,i),typeof n=="function"&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var h=s.progressChunk*(a.length+1),u=h/(a.length+2);s.children.push(this.resources[e]),s.progressChunk=u;for(var o=0;o<a.length;++o)a[o].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=Ti/r,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=ih(e,{strictMode:!0}),i;if(r.protocol||!r.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var n=dy.exec(i)[0];i=i.substr(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,bi.eachSeries(this._beforeMiddleware,function(n,s){n.call(i,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=Ti,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),bi.eachSeries(this._afterMiddleware,function(i,n){i.call(r,e,n)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(Ti,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();Ut.prototype.add=function(e,r,i,n){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if(typeof e=="object"&&(i=e,n=r||i.callback||i.onComplete,r=i.url,e=i.name||i.key||i.url),typeof r!="string"&&(n=i,i=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(e,r,i,n)};var nh=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Ut.shared:new Ut},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),sh=function(){function t(){}return t.add=function(){Y.setExtensionLoadType("svg",Y.LOAD_TYPE.XHR),Y.setExtensionXhrType("svg",Y.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===Y.TYPE.IMAGE||e.extension==="svg")){var i=e.data,n=e.url,s=e.name,a=e.metadata;k.fromLoader(i,n,s,a).then(function(o){e.texture=o,r()}).catch(r)}else r()},t}(),py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vy(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=t.charCodeAt(r++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var a=r-(t.length-1);switch(a){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)e+=py.charAt(n[s])}return e}var qs=self.URL||self.webkitURL;function _y(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===Y.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+vy(t.xhr.responseText),t.type=Y.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var i=qs.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.type=Y.TYPE.IMAGE,t.data.onload=function(){qs.revokeObjectURL(i),t.data.onload=null,e()};return}}e()}Ut.registerPlugin({use:_y});Ut.registerPlugin(sh);/*!
 * @pixi/sprite - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tn=function(t,e){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},tn(t,e)};function yy(t,e){tn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Re=new mt,my=new Uint16Array([0,1,2,0,2,3]),ah=function(t){yy(e,t);function e(r){var i=t.call(this)||this;return i._anchor=new fe(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=w.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||k.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=my,i.pluginName="batch",i.isSprite=!0,i._roundPixels=E.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Se(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Se(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,f=this.vertexData,l=r.trim,c=r.orig,d=this._anchor,p=0,_=0,v=0,m=0;if(l?(_=l.x-d._x*c.width,p=_+l.width,m=l.y-d._y*c.height,v=m+l.height):(_=-d._x*c.width,p=_+c.width,m=-d._y*c.height,v=m+c.height),f[0]=n*_+a*m+h,f[1]=o*m+s*_+u,f[2]=n*p+a*m+h,f[3]=o*m+s*p+u,f[4]=n*p+a*v+h,f[5]=o*v+s*p+u,f[6]=n*_+a*v+h,f[7]=o*v+s*_+u,this._roundPixels)for(var y=E.RESOLUTION,g=0;g<f.length;++g)f[g]=Math.round((f[g]*y|0)/y)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,n=r.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,f=a.d,l=a.tx,c=a.ty,d=-s._x*n.width,p=d+n.width,_=-s._y*n.height,v=_+n.height;i[0]=o*d+u*_+l,i[1]=f*_+h*d+c,i[2]=o*p+u*_+l,i[3]=f*_+h*p+c,i[4]=o*p+u*v+l,i[5]=f*v+h*p+c,i[6]=o*d+u*v+l,i[7]=f*v+h*d+c},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new N),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Re);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return Re.x>=s&&Re.x<s+i&&(a=-n*this.anchor.y,Re.y>=a&&Re.y<a+n)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var n=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(r,i){var n=r instanceof k?r:k.from(r,i);return new e(n)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=Se(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=Se(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||k.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(xe);/*!
 * @pixi/app - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qe=function(){function t(e){var r=this;this.stage=new xe,e=Object.assign({forceCanvas:!1},e),this.renderer=jo(e),t._plugins.forEach(function(i){i.init.call(r,e)})}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,n=t._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),gy=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){self.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var i,n;if(r._resizeTo===self)i=self.innerWidth,n=self.innerHeight;else{var s=r._resizeTo,a=s.clientWidth,o=s.clientHeight;i=a,n=o}r.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();Qe.registerPlugin(gy);/*!
 * @pixi/spritesheet - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oh=function(){function t(e,r,i){i===void 0&&(i=null),this._texture=e instanceof k?e:null,this.baseTexture=e instanceof H?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,i=Pr(e,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var n=this._frameKeys[r],s=this._frames[n],a=s.frame;if(a){var o=null,h=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new N(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new N(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new N(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new N(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new k(this.baseTexture,o,f,h,s.rotated?2:0,s.anchor),k.addToCache(this.textures[n],n)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var i=0;i<e[r].length;i++){var n=e[r][i];this.animations[r].push(this.textures[n])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),hh=function(){function t(){}return t.use=function(e,r){var i,n,s=this,a=e.name+"_image";if(!e.data||e.type!==Y.TYPE.JSON||!e.data.frames||s.resources[a]){r();return}var o=(n=(i=e.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(o))for(var h=function(p){if(typeof p!="string")return"continue";var _=p.replace(".json",""),v=ce.resolve(e.url.replace(s.baseUrl,""),p);if(s.resources[_]||Object.values(s.resources).some(function(y){return ce.format(ce.parse(y.url))===v}))return"continue";var m={crossOrigin:e.crossOrigin,loadType:Y.LOAD_TYPE.XHR,xhrType:Y.XHR_RESPONSE_TYPE.JSON,parentResource:e};s.add(_,v,m)},u=0,f=o;u<f.length;u++){var l=f[u];h(l)}var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(a,d,c,function(_){if(_.error){r(_.error);return}var v=new oh(_.texture,e.data,e.url);v.parse(function(){e.spritesheet=v,e.textures=v.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:ce.resolve(e.url.replace(r,""),e.data.meta.image)},t}();const xy="6.1.2";Bn.registerPlugin("batch",th);Qe.registerPlugin(nh);Qe.registerPlugin(oo);Ut.registerPlugin(hh);const Yx=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Pt},AbstractBatchRenderer:Ko,AbstractMultiResource:jr,AbstractRenderer:zo,AppLoaderPlugin:nh,Application:Qe,ArrayResource:pn,Attribute:Qi,get BLEND_MODES(){return w},get BUFFER_BITS(){return ke},get BUFFER_TYPE(){return lt},BaseImageResource:bt,BaseRenderTexture:gn,BaseTexture:H,BatchDrawCall:Yo,BatchGeometry:Jo,BatchPluginFactory:Qo,BatchRenderer:th,BatchShaderGenerator:Zo,BatchSystem:wn,BatchTextureArray:qo,Bounds:Wi,Buffer:K,BufferResource:Je,get CLEAR_MODES(){return Rt},CanvasResource:Yr,Circle:dc,Container:xe,ContextSystem:En,CubeResource:vn,DEG_TO_RAD:no,get DRAW_MODES(){return me},DisplayObject:Ye,get ENV(){return xt},Ellipse:pc,get FORMATS(){return x},Filter:Uo,FilterState:Io,FilterSystem:bn,Framebuffer:Fr,FramebufferSystem:In,get GC_MODES(){return Or},GLFramebuffer:Ao,GLProgram:Ho,GLTexture:Tr,Geometry:Zr,GeometrySystem:An,IGLUniformData:k_,INSTALLED:qe,ImageBitmapResource:mn,ImageResource:qr,Loader:Ut,get LoaderResource(){return Y},get MASK_TYPES(){return q},get MIPMAP_MODES(){return Dt},get MSAA_QUALITY(){return L},MaskData:Ro,MaskSystem:Cn,Matrix:tt,ObjectRenderer:Tn,ObservablePoint:fe,PI_2:ro,get PRECISION(){return ft},Point:mt,Polygon:vc,Program:Jr,ProjectionSystem:Sn,Quad:wo,QuadUv:Eo,RAD_TO_DEG:io,get RENDERER_TYPE(){return ye},Rectangle:N,RenderTexture:Kr,RenderTexturePool:To,RenderTextureSystem:Pn,Renderer:Bn,Resource:ie,RoundedRectangle:_c,Runner:X,get SAMPLER_TYPES(){return De},get SCALE_MODES(){return yt},get SHAPES(){return Xt},SVGResource:_n,ScissorSystem:Nn,Shader:Rn,ShaderSystem:Fn,Sprite:ah,SpriteMaskFilter:Lo,Spritesheet:oh,SpritesheetLoader:hh,State:Qr,StateSystem:Un,StencilSystem:On,System:iy,get TARGETS(){return kt},get TYPES(){return R},TemporaryDisplayObject:xo,Texture:k,TextureGCSystem:Mn,TextureLoader:sh,TextureMatrix:Mo,TextureSystem:Ln,TextureUvs:xn,Ticker:Ct,TickerPlugin:oo,Transform:ao,get UPDATE_PRIORITY(){return ge},UniformGroup:te,VERSION:xy,VideoResource:yn,ViewableBuffer:Wo,get WRAP_MODES(){return Nr},autoDetectRenderer:jo,autoDetectResource:zr,checkMaxIfStatementsInShader:Fo,createUBOElements:ko,defaultFilterVertex:ry,defaultVertex:ey,generateProgram:Vo,generateUniformBufferSync:Xo,getTestContext:Oo,getUBOData:Do,groupD8:P,isMobile:Ot,resources:eh,settings:E,systems:rh,uniformParsers:ee,utils:h_},Symbol.toStringTag,{value:"Module"})),uh=1920,fh=1080,qx={red:"#E03E81",red_a_20:"rgba(224, 62, 129, 0.2)",green:"#72E98A",green_a_40:"rgba(114, 233, 138, 0.4)",blue:"#5FBFF9"};function Wx(t){const e="/bundles/sj-overlays/assets/SJ_Eyes.png";return t==null?e:by[t]??e}const by={"Splat Zones":"/bundles/sj-overlays/assets/SJ_SZ-Glow.png",Rainmaker:"/bundles/sj-overlays/assets/SJ_RM-Glow.png","Clam Blitz":"/bundles/sj-overlays/assets/SJ_CB-Glow.png","Tower Control":"/bundles/sj-overlays/assets/SJ_TC-Glow.png"};function Kx(t){return Ty[t]??""}const Ty={"Splat Zones":"/bundles/sj-overlays/assets/SJ_SZ.png",Rainmaker:"/bundles/sj-overlays/assets/SJ_RM.png","Clam Blitz":"/bundles/sj-overlays/assets/SJ_CB.png","Tower Control":"/bundles/sj-overlays/assets/SJ_TC.png"};function Ws(t){return Math.sqrt(1-Math.pow(t-1,2))}function lh(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function*wy(t,e,r){const n=r*r,s=r*Math.SQRT1_2,a=Math.ceil(t/s),o=Math.ceil(e/s),h=new Array(a*o),u=[];yield l(t/2,e/2);t:for(;u.length;){const c=Math.random()*u.length|0,d=u[c],p=Math.random(),_=1e-7;for(let m=0;m<4;++m){const y=2*Math.PI*(p+m/4),g=r+_,A=d.x+g*Math.cos(y),T=d.y+g*Math.sin(y);if(0<=A&&A<t&&0<=T&&T<e&&f(A,T)){yield l(A,T);continue t}}const v=u.pop();c<u.length&&(u[c]=v)}function f(c,d){const p=c/s|0,_=d/s|0,v=Math.max(p-2,0),m=Math.max(_-2,0),y=Math.min(p+3,a),g=Math.min(_+3,o);for(let A=m;A<g;++A){const T=A*a;for(let S=v;S<y;++S){const V=h[T+S];if(V){const B=V[0]-c,$=V[1]-d;if(B*B+$*$<n)return!1}}}return!0}function l(c,d){h[a*(d/s|0)+(c/s|0)]=[c,d];const p={x:c,y:d};return u.push(p),p}}var Ey=Math.floor,Iy=Math.random;function Ay(t,e){return t+Ey(Iy()*(e-t+1))}var ch=Ay,Ry=Ea,Cy=Fh,Ny=Ia,Oy=Aa;function Sy(t,e,r){if(!Oy(r))return!1;var i=typeof e;return(i=="number"?Cy(r)&&Ny(e,r.length):i=="string"&&e in r)?Ry(r[e],t):!1}var Py=Sy,Fy=Wh,Ks=1/0,Uy=17976931348623157e292;function My(t){if(!t)return t===0?t:0;if(t=Fy(t),t===Ks||t===-Ks){var e=t<0?-1:1;return e*Uy}return t===t?t:0}var Ly=My,By=ch,Gy=Py,Zs=Ly,ky=parseFloat,Dy=Math.min,Xy=Math.random;function Hy(t,e,r){if(r&&typeof r!="boolean"&&Gy(t,e,r)&&(e=r=void 0),r===void 0&&(typeof e=="boolean"?(r=e,e=void 0):typeof t=="boolean"&&(r=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=Zs(t),e===void 0?(e=t,t=0):e=Zs(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var n=Xy();return Dy(t+n*(e-t+ky("1e-"+((n+"").length-1))),e)}return By(t,e)}var Vy=Hy;const en=be(Vy);var $y=Br;function zy(t,e,r){for(var i=-1,n=t.length;++i<n;){var s=t[i],a=e(s);if(a!=null&&(o===void 0?a===a&&!$y(a):r(a,o)))var o=a,h=s}return h}var dh=zy;function jy(t,e){return t<e}var Yy=jy;function qy(t){return t}var ph=qy,Wy=dh,Ky=Yy,Zy=ph;function Jy(t){return t&&t.length?Wy(t,Zy,Ky):void 0}var Qy=Jy;const Js=be(Qy);function tm(t,e){return t>e}var em=tm,rm="__lodash_hash_undefined__";function im(t){return this.__data__.set(t,rm),this}var nm=im;function sm(t){return this.__data__.has(t)}var am=sm,om=Ra,hm=nm,um=am;function Ur(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new om;++e<r;)this.add(t[e])}Ur.prototype.add=Ur.prototype.push=hm;Ur.prototype.has=um;var fm=Ur;function lm(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var cm=lm;function dm(t,e){return t.has(e)}var pm=dm,vm=fm,_m=cm,ym=pm,mm=1,gm=2;function xm(t,e,r,i,n,s){var a=r&mm,o=t.length,h=e.length;if(o!=h&&!(a&&h>o))return!1;var u=s.get(t),f=s.get(e);if(u&&f)return u==e&&f==t;var l=-1,c=!0,d=r&gm?new vm:void 0;for(s.set(t,e),s.set(e,t);++l<o;){var p=t[l],_=e[l];if(i)var v=a?i(_,p,l,e,t,s):i(p,_,l,t,e,s);if(v!==void 0){if(v)continue;c=!1;break}if(d){if(!_m(e,function(m,y){if(!ym(d,y)&&(p===m||n(p,m,r,i,s)))return d.push(y)})){c=!1;break}}else if(!(p===_||n(p,_,r,i,s))){c=!1;break}}return s.delete(t),s.delete(e),c}var vh=xm;function bm(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}var Tm=bm;function wm(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var Em=wm,Qs=Ca,ta=Uh,Im=Ea,Am=vh,Rm=Tm,Cm=Em,Nm=1,Om=2,Sm="[object Boolean]",Pm="[object Date]",Fm="[object Error]",Um="[object Map]",Mm="[object Number]",Lm="[object RegExp]",Bm="[object Set]",Gm="[object String]",km="[object Symbol]",Dm="[object ArrayBuffer]",Xm="[object DataView]",ea=Qs?Qs.prototype:void 0,wi=ea?ea.valueOf:void 0;function Hm(t,e,r,i,n,s,a){switch(r){case Xm:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Dm:return!(t.byteLength!=e.byteLength||!s(new ta(t),new ta(e)));case Sm:case Pm:case Mm:return Im(+t,+e);case Fm:return t.name==e.name&&t.message==e.message;case Lm:case Gm:return t==e+"";case Um:var o=Rm;case Bm:var h=i&Nm;if(o||(o=Cm),t.size!=e.size&&!h)return!1;var u=a.get(t);if(u)return u==e;i|=Om,a.set(t,e);var f=Am(o(t),o(e),i,n,s,a);return a.delete(t),f;case km:if(wi)return wi.call(t)==wi.call(e)}return!1}var Vm=Hm,ra=Mh,$m=1,zm=Object.prototype,jm=zm.hasOwnProperty;function Ym(t,e,r,i,n,s){var a=r&$m,o=ra(t),h=o.length,u=ra(e),f=u.length;if(h!=f&&!a)return!1;for(var l=h;l--;){var c=o[l];if(!(a?c in e:jm.call(e,c)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var _=!0;s.set(t,e),s.set(e,t);for(var v=a;++l<h;){c=o[l];var m=t[c],y=e[c];if(i)var g=a?i(y,m,c,e,t,s):i(m,y,c,t,e,s);if(!(g===void 0?m===y||n(m,y,r,i,s):g)){_=!1;break}v||(v=c=="constructor")}if(_&&!v){var A=t.constructor,T=e.constructor;A!=T&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof T=="function"&&T instanceof T)&&(_=!1)}return s.delete(t),s.delete(e),_}var qm=Ym,Ei=Na,Wm=vh,Km=Vm,Zm=qm,ia=Lh,na=ne,sa=Bh,Jm=Gh,Qm=1,aa="[object Arguments]",oa="[object Array]",yr="[object Object]",t0=Object.prototype,ha=t0.hasOwnProperty;function e0(t,e,r,i,n,s){var a=na(t),o=na(e),h=a?oa:ia(t),u=o?oa:ia(e);h=h==aa?yr:h,u=u==aa?yr:u;var f=h==yr,l=u==yr,c=h==u;if(c&&sa(t)){if(!sa(e))return!1;a=!0,f=!1}if(c&&!f)return s||(s=new Ei),a||Jm(t)?Wm(t,e,r,i,n,s):Km(t,e,h,r,i,n,s);if(!(r&Qm)){var d=f&&ha.call(t,"__wrapped__"),p=l&&ha.call(e,"__wrapped__");if(d||p){var _=d?t.value():t,v=p?e.value():e;return s||(s=new Ei),n(_,v,r,i,s)}}return c?(s||(s=new Ei),Zm(t,e,r,i,n,s)):!1}var r0=e0,i0=r0,ua=kh;function _h(t,e,r,i,n){return t===e?!0:t==null||e==null||!ua(t)&&!ua(e)?t!==t&&e!==e:i0(t,e,r,i,_h,n)}var yh=_h,n0=Na,s0=yh,a0=1,o0=2;function h0(t,e,r,i){var n=r.length,s=n,a=!i;if(t==null)return!s;for(t=Object(t);n--;){var o=r[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){o=r[n];var h=o[0],u=t[h],f=o[1];if(a&&o[2]){if(u===void 0&&!(h in t))return!1}else{var l=new n0;if(i)var c=i(u,f,h,t,e,l);if(!(c===void 0?s0(f,u,a0|o0,i,l):c))return!1}}return!0}var u0=h0,f0=Aa;function l0(t){return t===t&&!f0(t)}var mh=l0,c0=mh,d0=Oa;function p0(t){for(var e=d0(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,c0(n)]}return e}var v0=p0;function _0(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var gh=_0,y0=u0,m0=v0,g0=gh;function x0(t){var e=m0(t);return e.length==1&&e[0][2]?g0(e[0][0],e[0][1]):function(r){return r===t||y0(r,t,e)}}var b0=x0,T0=ne,w0=Br,E0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I0=/^\w*$/;function A0(t,e){if(T0(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||w0(t)?!0:I0.test(t)||!E0.test(t)||e!=null&&t in Object(e)}var kn=A0,xh=Ra,R0="Expected a function";function Dn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(R0);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(Dn.Cache||xh),r}Dn.Cache=xh;var C0=Dn,N0=C0,O0=500;function S0(t){var e=N0(t,function(i){return r.size===O0&&r.clear(),i}),r=e.cache;return e}var P0=S0,F0=P0,U0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M0=/\\(\\)?/g,L0=F0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(U0,function(r,i,n,s){e.push(n?s.replace(M0,"$1"):i||r)}),e}),B0=L0;function G0(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var bh=G0,fa=Ca,k0=bh,D0=ne,X0=Br,H0=1/0,la=fa?fa.prototype:void 0,ca=la?la.toString:void 0;function Th(t){if(typeof t=="string")return t;if(D0(t))return k0(t,Th)+"";if(X0(t))return ca?ca.call(t):"";var e=t+"";return e=="0"&&1/t==-H0?"-0":e}var V0=Th,$0=V0;function z0(t){return t==null?"":$0(t)}var j0=z0,Y0=ne,q0=kn,W0=B0,K0=j0;function Z0(t,e){return Y0(t)?t:q0(t,e)?[t]:W0(K0(t))}var wh=Z0,J0=Br,Q0=1/0;function tg(t){if(typeof t=="string"||J0(t))return t;var e=t+"";return e=="0"&&1/t==-Q0?"-0":e}var ti=tg,eg=wh,rg=ti;function ig(t,e){e=eg(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[rg(e[r++])];return r&&r==i?t:void 0}var Eh=ig,ng=Eh;function sg(t,e,r){var i=t==null?void 0:ng(t,e);return i===void 0?r:i}var ag=sg;function og(t,e){return t!=null&&e in Object(t)}var hg=og,ug=wh,fg=Dh,lg=ne,cg=Ia,dg=Xh,pg=ti;function vg(t,e,r){e=ug(e,t);for(var i=-1,n=e.length,s=!1;++i<n;){var a=pg(e[i]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++i!=n?s:(n=t==null?0:t.length,!!n&&dg(n)&&cg(a,n)&&(lg(t)||fg(t)))}var _g=vg,yg=hg,mg=_g;function gg(t,e){return t!=null&&mg(t,e,yg)}var xg=gg,bg=yh,Tg=ag,wg=xg,Eg=kn,Ig=mh,Ag=gh,Rg=ti,Cg=1,Ng=2;function Og(t,e){return Eg(t)&&Ig(e)?Ag(Rg(t),e):function(r){var i=Tg(r,t);return i===void 0&&i===e?wg(r,t):bg(e,i,Cg|Ng)}}var Sg=Og;function Pg(t){return function(e){return e==null?void 0:e[t]}}var Fg=Pg,Ug=Eh;function Mg(t){return function(e){return Ug(e,t)}}var Lg=Mg,Bg=Fg,Gg=Lg,kg=kn,Dg=ti;function Xg(t){return kg(t)?Bg(Dg(t)):Gg(t)}var Hg=Xg,Vg=b0,$g=Sg,zg=ph,jg=ne,Yg=Hg;function qg(t){return typeof t=="function"?t:t==null?zg:typeof t=="object"?jg(t)?$g(t[0],t[1]):Vg(t):Yg(t)}var Wg=qg,Kg=dh,Zg=em,Jg=Wg;function Qg(t,e){return t&&t.length?Kg(t,Jg(e),Zg):void 0}var tx=Qg;const ex=be(tx);var rx=ch;function ix(t){var e=t.length;return e?t[rx(0,e-1)]:void 0}var Ih=ix,nx=bh;function sx(t,e){return nx(e,function(r){return t[r]})}var ax=sx,ox=ax,hx=Oa;function ux(t){return t==null?[]:ox(t,hx(t))}var fx=ux,lx=Ih,cx=fx;function dx(t){return lx(cx(t))}var px=dx,vx=Ih,_x=px,yx=ne;function mx(t){var e=yx(t)?vx:_x;return e(t)}var gx=mx;const da=be(gx);function xx(t,e,r){t[e]?t[e].push(r):t[e]=[r]}Hh("graphicVariables",{state:()=>({sceneChangeStartDelay:.8})});function bx(t,e,r){window.obsstudio!=null?(window.addEventListener("obsSourceActiveChanged",t),window.addEventListener("obsSourceVisibleChanged",t),Xn(()=>{window.removeEventListener("obsSourceActiveChanged",t),window.removeEventListener("obsSourceVisibleChanged",t)})):(window.addEventListener("dblclick",i=>t(Object.assign({...i},{detail:{active:!0}}))),Xn(()=>{window.removeEventListener("dblclick",t)}))}function Tx(t){const e=new Qe({width:uh,height:fh,view:t,backgroundColor:4004427});return e.ticker.stop(),Ii.ticker.add(r=>{e.ticker.update(r)}),e}const Bt=2115;function wx(){const t=new xe;return t.width=Bt,t.height=Bt,t.pivot.set(Bt/2,Bt/2),t.x=uh/2,t.y=fh/2,t}function Ex(t){var s;const e=[14696065,7530890,11366635,6275065,16289103],r=wy(2110,2110,125),i={};let n=r.next().value;for(;n!=null&&(n=r.next().value,!!n);){const a=e.reduce((l,c)=>{var d;return l[c]=((d=i[c])==null?void 0:d.length)??0,l},{}),o=Js(Object.values(a)),h=Object.entries(a).filter(l=>l[1]===o).map(l=>l[0]),u=Number(((s=ex(Object.entries(h.reduce((l,c)=>{var p;const d=Number(c);return l[d]=Js((p=i[d])==null?void 0:p.map(_=>lh(n.x,n.y,_.x,_.y))),l},{})),l=>l[1]??0))==null?void 0:s[0])??da(h)),f=new ah(da(Ut.shared.resources["bg-icons"].spritesheet.textures));f.tint=u,f.scale.set(en(.3,.5)),f.x=n.x+10,f.y=n.y+25,f.anchor.set(.5),f.alpha=0,f.angle=Math.random()*360,xx(i,u,f),t.addChild(f)}}const Ix=Vh({name:"IconBackground",props:{animateOnEntrance:{type:Boolean,default:!0}},setup(t){const e=$h();return zh(()=>{const r=Tx(e.value),i=wx();r.stage.addChild(i);const n=Ii.to(i,{duration:8,pixi:{angle:360},repeat:-1,ease:"none"}),s=Ii.timeline(),a=window.obsstudio?1.75:.25;function o(){s.clear(!0),s.addLabel("out").addLabel("in",`+=${a}`),i.children.forEach(h=>{s.to(h,{pixi:{alpha:0},duration:.15,onComplete:()=>{i.removeChild(h)}},"out")}),Ex(i),s.call(()=>n.timeScale(1),null,"in"),s.to(n,{timeScale:8/300,duration:3,ease:"power3.out"},"in"),i.children.forEach(h=>{const f=1/(1101/lh(Bt/2,Bt/2,h.x,h.y)),l=Math.atan2(Bt/2-h.y,Bt/2-h.x),c=h.x+Math.cos(l)*350*Ws(f),d=h.y+Math.sin(l)*350*Ws(f);s.fromTo(h,{pixi:{x:c,y:d,scale:h.scale.y-.5,angle:h.angle+en(-90,90)}},{duration:1.5,pixi:{x:h.x,y:h.y,scale:h.scale.y,alpha:1,angle:h.angle},ease:"power3.out",delay:f*.9*en(.9,1.1),immediateRender:!1},"in")})}Ut.shared.add("bg-icons","/bundles/sj-overlays/assets/sj-bg-icons.json").load(()=>{o()}),t.animateOnEntrance&&bx(h=>{(h.detail.active||h.detail.visible)&&o()})}),{iconBackgroundCanvas:e}}}),Ax={ref:"iconBackgroundCanvas",class:"icon-background-canvas"};function Rx(t,e,r,i,n,s){return Yh(),qh("canvas",Ax,null,512)}const Zx=jh(Ix,[["render",Rx]]);/*!
 * PixiPlugin 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Gt,pa,Mr,at,Ue,Ah,rn,Rh=function(){return typeof window<"u"},Ch=function(){return Gt||Rh()&&(Gt=window.gsap)&&Gt.registerPlugin&&Gt},va=function(e){return typeof e=="function"},Cx=function(e){return console.warn(e)},Nx=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],rt=.212671,it=.71516,nt=.072169,ei=function(e,r){var i=[],n=0,s=0,a,o;for(a=0;a<4;a++){for(o=0;o<5;o++)s=o===4?e[n+4]:0,i[n+o]=e[n]*r[o]+e[n+1]*r[o+5]+e[n+2]*r[o+10]+e[n+3]*r[o+15]+s;n+=5}return i},_a=function(e,r){var i=1-r,n=i*rt,s=i*it,a=i*nt;return ei([n+r,s,a,0,0,n,s+r,a,0,0,n,s,a+r,0,0,0,0,0,1,0],e)},ya=function(e,r,i){var n=Mr(r),s=n[0]/255,a=n[1]/255,o=n[2]/255,h=1-i;return ei([h+i*s*rt,i*s*it,i*s*nt,0,0,i*a*rt,h+i*a*it,i*a*nt,0,0,i*o*rt,i*o*it,h+i*o*nt,0,0,0,0,0,1,0],e)},ma=function(e,r){r*=Math.PI/180;var i=Math.cos(r),n=Math.sin(r);return ei([rt+i*(1-rt)+n*-rt,it+i*-it+n*-it,nt+i*-nt+n*(1-nt),0,0,rt+i*-rt+n*.143,it+i*(1-it)+n*.14,nt+i*-nt+n*-.283,0,0,rt+i*-rt+n*-(1-rt),it+i*-it+n*it,nt+i*(1-nt)+n*nt,0,0,0,0,0,1,0,0,0,0,0,1],e)},ga=function(e,r){return ei([r,0,0,0,.5*(1-r),0,r,0,0,.5*(1-r),0,0,r,0,.5*(1-r),0,0,0,1,0],e)},Nh=function(e,r){var i=at.filters[r],n=e.filters||[],s=n.length,a;for(i||Cx(r+" not found. PixiPlugin.registerPIXI(PIXI)");--s>-1;)if(n[s]instanceof i)return n[s];return a=new i,r==="BlurFilter"&&(a.blur=0),n.push(a),e.filters=n,a},G=function(e,r,i,n){r.add(i,e,i[e],n[e]),r._props.push(e)},xa=function(e,r){var i=new at.filters.ColorMatrixFilter;return i.matrix=r,i.brightness(e,!0),i.matrix},Ox=function(e){var r={},i;for(i in e)r[i]=e[i];return r},Q={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},Sx=function(e,r,i){var n=Nh(e,"ColorMatrixFilter"),s=e._gsColorMatrixFilter=e._gsColorMatrixFilter||Ox(Q),a=r.combineCMF&&!("colorMatrixFilter"in r&&!r.colorMatrixFilter),o,h,u;for(u=n.matrix,r.resolution&&(n.resolution=r.resolution),r.matrix&&r.matrix.length===u.length?(h=r.matrix,s.contrast!==1&&G("contrast",i,s,Q),s.hue&&G("hue",i,s,Q),s.brightness!==1&&G("brightness",i,s,Q),s.colorizeAmount&&(G("colorize",i,s,Q),G("colorizeAmount",i,s,Q)),s.saturation!==1&&G("saturation",i,s,Q)):(h=Nx.slice(),r.contrast!=null?(h=ga(h,+r.contrast),G("contrast",i,s,r)):s.contrast!==1&&(a?h=ga(h,s.contrast):G("contrast",i,s,Q)),r.hue!=null?(h=ma(h,+r.hue),G("hue",i,s,r)):s.hue&&(a?h=ma(h,s.hue):G("hue",i,s,Q)),r.brightness!=null?(h=xa(+r.brightness,h),G("brightness",i,s,r)):s.brightness!==1&&(a?h=xa(s.brightness,h):G("brightness",i,s,Q)),r.colorize!=null?(r.colorizeAmount="colorizeAmount"in r?+r.colorizeAmount:1,h=ya(h,r.colorize,r.colorizeAmount),G("colorize",i,s,r),G("colorizeAmount",i,s,r)):s.colorizeAmount&&(a?h=ya(h,s.colorize,s.colorizeAmount):(G("colorize",i,s,Q),G("colorizeAmount",i,s,Q))),r.saturation!=null?(h=_a(h,+r.saturation),G("saturation",i,s,r)):s.saturation!==1&&(a?h=_a(h,s.saturation):G("saturation",i,s,Q))),o=h.length;--o>-1;)h[o]!==u[o]&&i.add(u,o,u[o],h[o],"colorMatrixFilter");i._props.push("colorMatrixFilter")},Px=function(e,r){var i=r.t,n=r.p,s=r.color,a=r.set;a(i,n,s[0]<<16|s[1]<<8|s[2])},Fx=function(e,r){var i=r.g;i&&(i.dirty++,i.clearDirty++)},Ux=function(e,r){r.t.visible=!!r.t.alpha},ba=function(e,r,i,n){var s=e[r],a=Mr(va(s)?e[r.indexOf("set")||!va(e["get"+r.substr(3)])?r:"get"+r.substr(3)]():s),o=Mr(i);n._pt=new Ue(n._pt,e,r,0,0,Px,{t:e,p:r,color:a,set:Ah(e,r)}),n.add(a,0,a[0],o[0]),n.add(a,1,a[1],o[1]),n.add(a,2,a[2],o[2])},Mx={tint:1,lineColor:1,fillColor:1},Ta="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),nn={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},Lx={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},Lr=Math.PI/180,Oh=function(e){return typeof e=="string"},Bx=function(e){return Oh(e)&&e.charAt(1)==="="?e.substr(0,2)+parseFloat(e.substr(2))*Lr:e*Lr},Gx=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e5)/1e5,r)},kx=function(e,r,i,n,s,a){var o=360*(a?Lr:1),h=Oh(s),u=h&&s.charAt(1)==="="?+(s.charAt(0)+"1"):0,f=parseFloat(u?s.substr(2):s)*(a?Lr:1),l=u?f*u:f-n,c=n+l,d,p;return h&&(d=s.split("_")[1],d==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),d==="cw"&&l<0?l=(l+o*1e10)%o-~~(l/o)*o:d==="ccw"&&l>0&&(l=(l-o*1e10)%o-~~(l/o)*o)),e._pt=p=new Ue(e._pt,r,i,n,l,Gx),p.e=c,p},wa=function(){Rh()&&(pa=window,Gt=Ch(),at=at||pa.PIXI,rn=at&&at.VERSION&&at.VERSION.charAt(0)==="4",Mr=function(r){return Gt.utils.splitColor((r+"").substr(0,2)==="0x"?"#"+r.substr(2):r)})},mr,Ce;for(mr=0;mr<Ta.length;mr++)Ce=Ta[mr],nn[Ce+"X"]=Ce,nn[Ce+"Y"]=Ce;var Dx={version:"3.10.4",name:"pixi",register:function(e,r,i){Gt=e,Ue=i,Ah=r.getSetter,wa()},registerPIXI:function(e){at=e},init:function(e,r,i,n,s){if(at||wa(),!at||!(e instanceof at.DisplayObject))return console.warn(e,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var a,o,h,u,f,l,c,d,p;for(l in r){if(a=nn[l],h=r[l],a)o=~l.charAt(l.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(e[a],o,e[a][o],a==="skew"?Bx(h):h);else if(l==="scale"||l==="anchor"||l==="pivot"||l==="tileScale")this.add(e[l],"x",e[l].x,h),this.add(e[l],"y",e[l].y,h);else if(l==="rotation"||l==="angle")kx(this,e,l,e[l],h,l==="rotation");else if(Lx[l])u||(Sx(e,r.colorMatrixFilter||r,this),u=!0);else if(l==="blur"||l==="blurX"||l==="blurY"||l==="blurPadding"){if(f=Nh(e,"BlurFilter"),this.add(f,l,f[l],h),r.blurPadding!==0)for(c=r.blurPadding||Math.max(f[l],h)*2,d=e.filters.length;--d>-1;)e.filters[d].padding=Math.max(e.filters[d].padding,c)}else if(Mx[l])if((l==="lineColor"||l==="fillColor")&&e instanceof at.Graphics)for(p=(e.geometry||e).graphicsData,this._pt=new Ue(this._pt,e,l,0,0,Fx,{g:e.geometry||e}),d=p.length;--d>-1;)ba(rn?p[d]:p[d][l.substr(0,4)+"Style"],rn?l:"color",h,this);else ba(e,l,h,this);else l==="autoAlpha"?(this._pt=new Ue(this._pt,e,"visible",0,0,Ux),this.add(e,"alpha",e.alpha,h),this._props.push("alpha","visible")):l!=="resolution"&&this.add(e,l,"get",h);this._props.push(l)}}};Ch()&&Gt.registerPlugin(Dx);export{Zx as I,Dx as P,dt as S,ue as T,iu as a,hl as b,Lt as c,Sa as d,$x as e,zx as f,uc as g,Yx as h,jx as i,qx as j,Kx as k,Wx as l,bx as m,za as n,Be as o,Jn as p,Kf as q,Sf as r,Pa as s};
